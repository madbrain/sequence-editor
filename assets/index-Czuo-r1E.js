(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();const Xt=!1;var os=Array.isArray,ti=Array.prototype.indexOf,si=Array.from,ct=Object.defineProperty,we=Object.getOwnPropertyDescriptor,as=Object.getOwnPropertyDescriptors,ii=Object.prototype,ni=Array.prototype,xt=Object.getPrototypeOf,qt=Object.isExtensible;function ri(t){return t()}function ft(t){for(var e=0;e<t.length;e++)t[e]()}function oi(){var t,e,s=new Promise((i,n)=>{t=i,e=n});return{promise:s,resolve:t,reject:e}}const B=2,yt=4,tt=8,Oe=16,$=32,Se=64,ls=128,N=256,qe=512,E=1024,R=2048,te=4096,Q=8192,fe=16384,Lt=32768,St=65536,Yt=1<<17,ai=1<<18,Et=1<<19,bt=1<<20,ut=1<<21,Mt=1<<22,oe=1<<23,ae=Symbol("$state"),li=Symbol("legacy props"),hi=Symbol(""),kt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ci(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function fi(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ui(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function di(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function vi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function gi(t){throw new Error("https://svelte.dev/e/effect_orphan")}function mi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function _i(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function pi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function wi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function xi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const yi=2,Li=4,Si=8,Ei=1,bi=2,k=Symbol(),Mi="http://www.w3.org/1999/xhtml";function hs(t){return t===this.v}function ki(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function cs(t){return!ki(t,this.v)}let Ee=!1,Hi=!1;function Ci(){Ee=!0}let x=null;function Ye(t){x=t}function Ht(t,e=!1,s){x={p:x,c:null,e:null,s:t,x:null,l:Ee&&!e?{s:null,u:null,$:[]}:null}}function Ct(t){var e=x,s=e.e;if(s!==null){e.e=null;for(var i of s)Ls(i)}return x=e.p,{}}function Pe(){return!Ee||x!==null&&x.l===null}const Di=new WeakMap;function Ti(t){var e=_;if(e===null)return m.f|=oe,t;if((e.f&Lt)===0){if((e.f&ls)===0)throw!e.parent&&t instanceof Error&&fs(t),t;e.b.error(t)}else Dt(t,e)}function Dt(t,e){for(;e!==null;){if((e.f&ls)!==0)try{e.b.error(t);return}catch{}e=e.parent}throw t instanceof Error&&fs(t),t}function fs(t){const e=Di.get(t);e&&(ct(t,"message",{value:e.message}),ct(t,"stack",{value:e.stack}))}let Ge=[];function Ai(){var t=Ge;Ge=[],ft(t)}function us(t){Ge.length===0&&queueMicrotask(Ai),Ge.push(t)}function Oi(){for(var t=_.b;t!==null&&!t.has_pending_snippet();)t=t.parent;return t===null&&ci(),t}function Tt(t){var e=B|R,s=m!==null&&(m.f&B)!==0?m:null;return _===null||s!==null&&(s.f&N)!==0?e|=N:_.f|=Et,{ctx:x,deps:null,effects:null,equals:hs,f:e,fn:t,reactions:null,rv:0,v:k,wv:0,parent:s??_,ac:null}}function Pi(t,e){let s=_;s===null&&ui();var i=s.b,n=void 0,r=Ot(k),o=null,h=!m;return Gi(()=>{try{var a=t()}catch(u){a=Promise.reject(u)}var l=()=>a;n=o?.then(l,l)??Promise.resolve(a),o=n;var c=U,f=i.pending;h&&(i.update_pending_count(1),f||c.increment());const d=(u,g=void 0)=>{o=null,f||c.activate(),g?g!==kt&&(r.f|=oe,vt(r,g)):((r.f&oe)!==0&&(r.f^=oe),vt(r,u)),h&&(i.update_pending_count(-1),f||c.decrement()),ms()};if(n.then(d,u=>d(null,u||"unknown")),c)return()=>{queueMicrotask(()=>c.neuter())}}),new Promise(a=>{function l(c){function f(){c===n?a(r):l(n)}c.then(f,f)}l(n)})}function ds(t){const e=Tt(t);return e.equals=cs,e}function vs(t){var e=t.effects;if(e!==null){t.effects=null;for(var s=0;s<e.length;s+=1)ce(e[s])}}function Ni(t){for(var e=t.parent;e!==null;){if((e.f&B)===0)return e;e=e.parent}return null}function At(t){var e,s=_;ee(Ni(t));try{vs(t),e=Ts(t)}finally{ee(s)}return e}function gs(t){var e=At(t);if(t.equals(e)||(t.v=e,t.wv=Cs()),!ue)if(Le!==null)Le.set(t,t.v);else{var s=(J||(t.f&N)!==0)&&t.deps!==null?te:E;b(t,s)}}function Ri(t,e,s){const i=Pe()?Tt:ds;if(e.length===0){s(t.map(i));return}var n=U,r=_,o=Bi(),h=Oi();Promise.all(e.map(a=>Pi(a))).then(a=>{n?.activate(),o();try{s([...t.map(i),...a])}catch(l){(r.f&fe)===0&&Dt(l,r)}n?.deactivate(),ms()}).catch(a=>{h.error(a)})}function Bi(){var t=_,e=m,s=x;return function(){ee(t),V(e),Ye(s)}}function ms(){ee(null),V(null),Ye(null)}const Fe=new Set;let U=null,Le=null;let Me=[],$e=null,dt=!1;class st{#l=new Map;#r=new Map;#o=new Set;#t=0;#h=null;#c=!1;#i=[];#a=[];#s=[];#e=[];#n=[];skipped_effects=new Set;#u(e){Me=[];var s=null;if(Fe.size>1){s=new Map,Le=new Map;for(const[r,o]of this.#l)s.set(r,{v:r.v,wv:r.wv}),r.v=o;for(const r of Fe)if(r!==this)for(const[o,h]of r.#r)s.has(o)||(s.set(o,{v:o.v,wv:o.wv}),o.v=h)}for(const r of e)this.#d(r);if(this.#i.length===0&&this.#t===0){var i=this.#s,n=this.#e;this.#s=[],this.#e=[],this.#n=[],this.#f(),Gt(i),Gt(n),this.#h?.resolve()}else{for(const r of this.#s)b(r,E);for(const r of this.#e)b(r,E);for(const r of this.#n)b(r,E)}if(s){for(const[r,{v:o,wv:h}]of s)r.wv<=h&&(r.v=o);Le=null}for(const r of this.#i)ye(r);for(const r of this.#a)ye(r);this.#i=[],this.#a=[]}#d(e){e.f^=E;for(var s=e.first;s!==null;){var i=s.f,n=(i&($|Se))!==0,r=n&&(i&E)!==0,o=r||(i&Q)!==0||this.skipped_effects.has(s);if(!o&&s.fn!==null){if(n)s.f^=E;else if((i&yt)!==0)this.#e.push(s);else if(Ne(s))if((i&Mt)!==0){var h=s.b?.pending?this.#a:this.#i;h.push(s)}else(s.f&Oe)!==0&&this.#n.push(s),ye(s);var a=s.first;if(a!==null){s=a;continue}}var l=s.parent;for(s=s.next;s===null&&l!==null;)s=l.next,l=l.parent}}capture(e,s){this.#r.has(e)||this.#r.set(e,s),this.#l.set(e,e.v)}activate(){U=this}deactivate(){U=null}neuter(){this.#c=!0}flush(){Me.length>0?this.flush_effects():this.#f(),U===this&&(this.#t===0&&Fe.delete(this),U=null)}flush_effects(){var e=xe;dt=!0;try{var s=0;for(Kt(!0);Me.length>0;)s++>1e3&&Fi(),this.#u(Me),le.clear()}finally{dt=!1,Kt(e),$e=null}}#f(){if(!this.#c)for(const e of this.#o)e();this.#o.clear()}increment(){this.#t+=1}decrement(){if(this.#t-=1,this.#t===0){for(const e of this.#s)b(e,R),Z(e);for(const e of this.#e)b(e,R),Z(e);for(const e of this.#n)b(e,R),Z(e);this.#s=[],this.#e=[],this.flush()}}add_callback(e){this.#o.add(e)}settled(){return(this.#h??=oi()).promise}static ensure(){if(U===null){const e=U=new st;Fe.add(U),queueMicrotask(()=>{U===e&&e.flush()})}return U}}function Fi(){try{mi()}catch(t){if($e!==null)Dt(t,$e);else throw t}}function Gt(t){var e=t.length;if(e!==0){for(var s=0;s<e;s++){var i=t[s];if((i.f&(fe|Q))===0&&Ne(i)){var n=We;if(ye(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?bs(i):i.fn=null),We>n&&(i.f&bt)!==0)break}}for(;s<e;s+=1)Z(t[s])}}function Z(t){for(var e=$e=t;e.parent!==null;){e=e.parent;var s=e.f;if(dt&&e===_&&(s&Oe)!==0)return;if((s&(Se|$))!==0){if((s&E)===0)return;e.f^=E}}Me.push(e)}const le=new Map;function Ot(t,e){var s={f:0,v:t,reactions:null,equals:hs,rv:0,wv:0};return s}function W(t,e){const s=Ot(t);return Qi(s),s}function _e(t,e=!1,s=!0){const i=Ot(t);return e||(i.equals=cs),Ee&&s&&x!==null&&x.l!==null&&(x.l.s??=[]).push(i),i}function T(t,e,s=!1){m!==null&&(!z||(m.f&Yt)!==0)&&Pe()&&(m.f&(B|Oe|Mt|Yt))!==0&&!q?.includes(t)&&xi();let i=s?pe(e):e;return vt(t,i)}function vt(t,e){if(!t.equals(e)){var s=t.v;ue?le.set(t,e):le.set(t,s),t.v=e,st.ensure().capture(t,s),(t.f&B)!==0&&((t.f&R)!==0&&At(t),b(t,(t.f&N)===0?E:te)),t.wv=Cs(),_s(t,R),Pe()&&_!==null&&(_.f&E)!==0&&(_.f&($|Se))===0&&(I===null?en([t]):I.push(t))}return e}function rt(t){T(t,t.v+1)}function _s(t,e){var s=t.reactions;if(s!==null)for(var i=Pe(),n=s.length,r=0;r<n;r++){var o=s[r],h=o.f;(h&R)===0&&(!i&&o===_||(b(o,e),(h&(E|N))!==0&&((h&B)!==0?_s(o,te):Z(o))))}}function pe(t){if(typeof t!="object"||t===null||ae in t)return t;const e=xt(t);if(e!==ii&&e!==ni)return t;var s=new Map,i=os(t),n=W(0),r=he,o=h=>{if(he===r)return h();var a=m,l=he;V(null),Zt(r);var c=h();return V(a),Zt(l),c};return i&&s.set("length",W(t.length)),new Proxy(t,{defineProperty(h,a,l){(!("value"in l)||l.configurable===!1||l.enumerable===!1||l.writable===!1)&&pi();var c=s.get(a);return c===void 0?c=o(()=>{var f=W(l.value);return s.set(a,f),f}):T(c,l.value,!0),!0},deleteProperty(h,a){var l=s.get(a);if(l===void 0){if(a in h){const d=o(()=>W(k));s.set(a,d),rt(n)}}else{if(i&&typeof a=="string"){var c=s.get("length"),f=Number(a);Number.isInteger(f)&&f<c.v&&T(c,f)}T(l,k),rt(n)}return!0},get(h,a,l){if(a===ae)return t;var c=s.get(a),f=a in h;if(c===void 0&&(!f||we(h,a)?.writable)&&(c=o(()=>{var u=pe(f?h[a]:k),g=W(u);return g}),s.set(a,c)),c!==void 0){var d=v(c);return d===k?void 0:d}return Reflect.get(h,a,l)},getOwnPropertyDescriptor(h,a){var l=Reflect.getOwnPropertyDescriptor(h,a);if(l&&"value"in l){var c=s.get(a);c&&(l.value=v(c))}else if(l===void 0){var f=s.get(a),d=f?.v;if(f!==void 0&&d!==k)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return l},has(h,a){if(a===ae)return!0;var l=s.get(a),c=l!==void 0&&l.v!==k||Reflect.has(h,a);if(l!==void 0||_!==null&&(!c||we(h,a)?.writable)){l===void 0&&(l=o(()=>{var d=c?pe(h[a]):k,u=W(d);return u}),s.set(a,l));var f=v(l);if(f===k)return!1}return c},set(h,a,l,c){var f=s.get(a),d=a in h;if(i&&a==="length")for(var u=l;u<f.v;u+=1){var g=s.get(u+"");g!==void 0?T(g,k):u in h&&(g=o(()=>W(k)),s.set(u+"",g))}if(f===void 0)(!d||we(h,a)?.writable)&&(f=o(()=>W(void 0)),T(f,pe(l)),s.set(a,f));else{d=f.v!==k;var y=o(()=>pe(l));T(f,y)}var L=Reflect.getOwnPropertyDescriptor(h,a);if(L?.set&&L.set.call(c,l),!d){if(i&&typeof a=="string"){var M=s.get("length"),p=Number(a);Number.isInteger(p)&&p>=M.v&&T(M,p+1)}rt(n)}return!0},ownKeys(h){v(n);var a=Reflect.ownKeys(h).filter(f=>{var d=s.get(f);return d===void 0||d.v!==k});for(var[l,c]of s)c.v!==k&&!(l in h)&&a.push(l);return a},setPrototypeOf(){wi()}})}var $t,ps,ws,xs;function Ui(){if($t===void 0){$t=window,ps=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,s=Text.prototype;ws=we(e,"firstChild").get,xs=we(e,"nextSibling").get,qt(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),qt(s)&&(s.__t=void 0)}}function Pt(t=""){return document.createTextNode(t)}function K(t){return ws.call(t)}function Nt(t){return xs.call(t)}function j(t,e){return K(t)}function Wt(t,e){{var s=K(t);return s instanceof Comment&&s.data===""?Nt(s):s}}function ze(t,e=1,s=!1){let i=t;for(;e--;)i=Nt(i);return i}function Ii(){return!1}function ys(t){_===null&&m===null&&gi(),m!==null&&(m.f&N)!==0&&_===null&&vi(),ue&&di()}function ji(t,e){var s=e.last;s===null?e.last=e.first=t:(s.next=t,t.prev=s,e.last=t)}function X(t,e,s,i=!0){var n=_;n!==null&&(n.f&Q)!==0&&(t|=Q);var r={ctx:x,deps:null,nodes_start:null,nodes_end:null,f:t|R,first:null,fn:e,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(s)try{ye(r),r.f|=Lt}catch(a){throw ce(r),a}else e!==null&&Z(r);var o=s&&r.deps===null&&r.first===null&&r.nodes_start===null&&r.teardown===null&&(r.f&Et)===0;if(!o&&i&&(n!==null&&ji(r,n),m!==null&&(m.f&B)!==0)){var h=m;(h.effects??=[]).push(r)}return r}function zi(t){const e=X(tt,null,!1);return b(e,E),e.teardown=t,e}function gt(t){ys();var e=_.f,s=!m&&(e&$)!==0&&(e&Lt)===0;if(s){var i=x;(i.e??=[]).push(t)}else return Ls(t)}function Ls(t){return X(yt|bt,t,!1)}function Vi(t){return ys(),X(tt|bt,t,!0)}function Xi(t){st.ensure();const e=X(Se,t,!0);return(s={})=>new Promise(i=>{s.outro?Ms(e,()=>{ce(e),i(void 0)}):(ce(e),i(void 0))})}function qi(t){return X(yt,t,!1)}function Ue(t,e){var s=x,i={effect:null,ran:!1,deps:t};s.l.$.push(i),i.effect=Rt(()=>{t(),!i.ran&&(i.ran=!0,C(e))})}function Yi(){var t=x;Rt(()=>{for(var e of t.l.$){e.deps();var s=e.effect;(s.f&E)!==0&&b(s,te),Ne(s)&&ye(s),e.ran=!1}})}function Gi(t){return X(Mt|Et,t,!0)}function Rt(t,e=0){return X(tt|e,t,!0)}function Ve(t,e=[],s=[]){Ri(e,s,i=>{X(tt,()=>t(...i.map(v)),!0)})}function $i(t,e=0){var s=X(Oe|e,t,!0);return s}function mt(t,e=!0){return X($,t,!0,e)}function Ss(t){var e=t.teardown;if(e!==null){const s=ue,i=m;Jt(!0),V(null);try{e.call(null)}finally{Jt(s),V(i)}}}function Es(t,e=!1){var s=t.first;for(t.first=t.last=null;s!==null;){s.ac?.abort(kt);var i=s.next;(s.f&Se)!==0?s.parent=null:ce(s,e),s=i}}function Wi(t){for(var e=t.first;e!==null;){var s=e.next;(e.f&$)===0&&ce(e),e=s}}function ce(t,e=!0){var s=!1;(e||(t.f&ai)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Ki(t.nodes_start,t.nodes_end),s=!0),Es(t,e&&!s),Ke(t,0),b(t,fe);var i=t.transitions;if(i!==null)for(const r of i)r.stop();Ss(t);var n=t.parent;n!==null&&n.first!==null&&bs(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function Ki(t,e){for(;t!==null;){var s=t===e?null:Nt(t);t.remove(),t=s}}function bs(t){var e=t.parent,s=t.prev,i=t.next;s!==null&&(s.next=i),i!==null&&(i.prev=s),e!==null&&(e.first===t&&(e.first=i),e.last===t&&(e.last=s))}function Ms(t,e){var s=[];ks(t,s,!0),Ji(s,()=>{ce(t),e&&e()})}function Ji(t,e){var s=t.length;if(s>0){var i=()=>--s||e();for(var n of t)n.out(i)}else e()}function ks(t,e,s){if((t.f&Q)===0){if(t.f^=Q,t.transitions!==null)for(const o of t.transitions)(o.is_global||s)&&e.push(o);for(var i=t.first;i!==null;){var n=i.next,r=(i.f&St)!==0||(i.f&$)!==0;ks(i,e,r?s:!1),i=n}}}function Zi(t){Hs(t,!0)}function Hs(t,e){if((t.f&Q)!==0){t.f^=Q,(t.f&E)===0&&(b(t,R),Z(t));for(var s=t.first;s!==null;){var i=s.next,n=(s.f&St)!==0||(s.f&$)!==0;Hs(s,n?e:!1),s=i}if(t.transitions!==null)for(const r of t.transitions)(r.is_global||e)&&r.in()}}let xe=!1;function Kt(t){xe=t}let ue=!1;function Jt(t){ue=t}let m=null,z=!1;function V(t){m=t}let _=null;function ee(t){_=t}let q=null;function Qi(t){m!==null&&(q===null?q=[t]:q.push(t))}let D=null,P=0,I=null;function en(t){I=t}let We=1,Ce=0,he=Ce;function Zt(t){he=t}let J=!1;function Cs(){return++We}function Ne(t){var e=t.f;if((e&R)!==0)return!0;if((e&te)!==0){var s=t.deps,i=(e&N)!==0;if(s!==null){var n,r,o=(e&qe)!==0,h=i&&_!==null&&!J,a=s.length;if((o||h)&&(_===null||(_.f&fe)===0)){var l=t,c=l.parent;for(n=0;n<a;n++)r=s[n],(o||!r?.reactions?.includes(l))&&(r.reactions??=[]).push(l);o&&(l.f^=qe),h&&c!==null&&(c.f&N)===0&&(l.f^=N)}for(n=0;n<a;n++)if(r=s[n],Ne(r)&&gs(r),r.wv>t.wv)return!0}(!i||_!==null&&!J)&&b(t,E)}return!1}function Ds(t,e,s=!0){var i=t.reactions;if(i!==null&&!q?.includes(t))for(var n=0;n<i.length;n++){var r=i[n];(r.f&B)!==0?Ds(r,e,!1):e===r&&(s?b(r,R):(r.f&E)!==0&&b(r,te),Z(r))}}function Ts(t){var e=D,s=P,i=I,n=m,r=J,o=q,h=x,a=z,l=he,c=t.f;D=null,P=0,I=null,J=(c&N)!==0&&(z||!xe||m===null),m=(c&($|Se))===0?t:null,q=null,Ye(t.ctx),z=!1,he=++Ce,t.ac!==null&&(t.ac.abort(kt),t.ac=null);try{t.f|=ut;var f=(0,t.fn)(),d=t.deps;if(D!==null){var u;if(Ke(t,P),d!==null&&P>0)for(d.length=P+D.length,u=0;u<D.length;u++)d[P+u]=D[u];else t.deps=d=D;if(!J||(c&B)!==0&&t.reactions!==null)for(u=P;u<d.length;u++)(d[u].reactions??=[]).push(t)}else d!==null&&P<d.length&&(Ke(t,P),d.length=P);if(Pe()&&I!==null&&!z&&d!==null&&(t.f&(B|te|R))===0)for(u=0;u<I.length;u++)Ds(I[u],t);return n!==null&&n!==t&&(Ce++,I!==null&&(i===null?i=I:i.push(...I))),(t.f&oe)!==0&&(t.f^=oe),f}catch(g){return Ti(g)}finally{t.f^=ut,D=e,P=s,I=i,m=n,J=r,q=o,Ye(h),z=a,he=l}}function tn(t,e){let s=e.reactions;if(s!==null){var i=ti.call(s,t);if(i!==-1){var n=s.length-1;n===0?s=e.reactions=null:(s[i]=s[n],s.pop())}}s===null&&(e.f&B)!==0&&(D===null||!D.includes(e))&&(b(e,te),(e.f&(N|qe))===0&&(e.f^=qe),vs(e),Ke(e,0))}function Ke(t,e){var s=t.deps;if(s!==null)for(var i=e;i<s.length;i++)tn(t,s[i])}function ye(t){var e=t.f;if((e&fe)===0){b(t,E);var s=_,i=xe;_=t,xe=!0;try{(e&Oe)!==0?Wi(t):Es(t),Ss(t);var n=Ts(t);t.teardown=typeof n=="function"?n:null,t.wv=We;var r;Xt&&Hi&&(t.f&R)!==0&&t.deps}finally{xe=i,_=s}}}function v(t){var e=t.f,s=(e&B)!==0;if(m!==null&&!z){var i=_!==null&&(_.f&fe)!==0;if(!i&&!q?.includes(t)){var n=m.deps;if((m.f&ut)!==0)t.rv<Ce&&(t.rv=Ce,D===null&&n!==null&&n[P]===t?P++:D===null?D=[t]:(!J||!D.includes(t))&&D.push(t));else{(m.deps??=[]).push(t);var r=t.reactions;r===null?t.reactions=[m]:r.includes(m)||r.push(m)}}}else if(s&&t.deps===null&&t.effects===null){var o=t,h=o.parent;h!==null&&(h.f&N)===0&&(o.f^=N)}if(ue){if(le.has(t))return le.get(t);if(s){o=t;var a=o.v;return((o.f&E)!==0||As(o))&&(a=At(o)),le.set(o,a),a}}else if(s){if(o=t,Le?.has(o))return Le.get(o);Ne(o)&&gs(o)}if((t.f&oe)!==0)throw t.v;return t.v}function As(t){if(t.v===k)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(le.has(e)||(e.f&B)!==0&&As(e))return!0;return!1}function C(t){var e=z;try{return z=!0,t()}finally{z=e}}const sn=-7169;function b(t,e){t.f=t.f&sn|e}function O(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(ae in t)_t(t);else if(!Array.isArray(t))for(let e in t){const s=t[e];typeof s=="object"&&s&&ae in s&&_t(s)}}}function _t(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let i in t)try{_t(t[i],e)}catch{}const s=xt(t);if(s!==Object.prototype&&s!==Array.prototype&&s!==Map.prototype&&s!==Set.prototype&&s!==Date.prototype){const i=as(s);for(let n in i){const r=i[n].get;if(r)try{r.call(t)}catch{}}}}}const nn=["touchstart","touchmove"];function rn(t){return nn.includes(t)}function on(t){var e=m,s=_;V(null),ee(null);try{return t()}finally{V(e),ee(s)}}const an=new Set,Qt=new Set;function ln(t,e,s,i={}){function n(r){if(i.capture||ke.call(e,r),!r.cancelBubble)return on(()=>s?.call(this,r))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?us(()=>{e.addEventListener(t,n,i)}):e.addEventListener(t,n,i),n}function ot(t,e,s,i,n){var r={capture:i,passive:n},o=ln(t,e,s,r);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&zi(()=>{e.removeEventListener(t,o,r)})}function ke(t){var e=this,s=e.ownerDocument,i=t.type,n=t.composedPath?.()||[],r=n[0]||t.target,o=0,h=t.__root;if(h){var a=n.indexOf(h);if(a!==-1&&(e===document||e===window)){t.__root=e;return}var l=n.indexOf(e);if(l===-1)return;a<=l&&(o=a)}if(r=n[o]||t.target,r!==e){ct(t,"currentTarget",{configurable:!0,get(){return r||s}});var c=m,f=_;V(null),ee(null);try{for(var d,u=[];r!==null;){var g=r.assignedSlot||r.parentNode||r.host||null;try{var y=r["__"+i];if(y!=null&&(!r.disabled||t.target===r))if(os(y)){var[L,...M]=y;L.apply(r,[t,...M])}else y.call(r,t)}catch(p){d?u.push(p):d=p}if(t.cancelBubble||g===e||g===null)break;r=g}if(d){for(let p of u)queueMicrotask(()=>{throw p});throw d}}finally{t.__root=e,delete t.currentTarget,V(c),ee(f)}}}function Os(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Je(t,e){var s=_;s.nodes_start===null&&(s.nodes_start=t,s.nodes_end=e)}function hn(t,e){var s=(e&bi)!==0,i,n=!t.startsWith("<!>");return()=>{i===void 0&&(i=Os(n?t:"<!>"+t),i=K(i));var r=s||ps?document.importNode(i,!0):i.cloneNode(!0);return Je(r,r),r}}function cn(t,e,s="svg"){var i=!t.startsWith("<!>"),n=(e&Ei)!==0,r=`<${s}>${i?t:"<!>"+t}</${s}>`,o;return()=>{if(!o){var h=Os(r),a=K(h);if(n)for(o=document.createDocumentFragment();K(a);)o.appendChild(K(a));else o=K(a)}var l=o.cloneNode(!0);if(n){var c=K(l),f=l.lastChild;Je(c,f)}else Je(l,l);return l}}function Bt(t,e){return cn(t,e,"svg")}function fn(){var t=document.createDocumentFragment(),e=document.createComment(""),s=Pt();return t.append(e,s),Je(e,s),t}function He(t,e){t!==null&&t.before(e)}function un(t,e){return dn(t,e)}const me=new Map;function dn(t,{target:e,anchor:s,props:i={},events:n,context:r,intro:o=!0}){Ui();var h=new Set,a=f=>{for(var d=0;d<f.length;d++){var u=f[d];if(!h.has(u)){h.add(u);var g=rn(u);e.addEventListener(u,ke,{passive:g});var y=me.get(u);y===void 0?(document.addEventListener(u,ke,{passive:g}),me.set(u,1)):me.set(u,y+1)}}};a(si(an)),Qt.add(a);var l=void 0,c=Xi(()=>{var f=s??e.appendChild(Pt());return mt(()=>{if(r){Ht({});var d=x;d.c=r}n&&(i.$$events=n),l=t(f,i)||{},r&&Ct()}),()=>{for(var d of h){e.removeEventListener(d,ke);var u=me.get(d);--u===0?(document.removeEventListener(d,ke),me.delete(d)):me.set(d,u)}Qt.delete(a),f!==s&&f.parentNode?.removeChild(f)}});return vn.set(l,c),l}let vn=new WeakMap;function es(t,e,s=!1){var i=t,n=null,r=null,o=k,h=s?St:0,a=!1;const l=(u,g=!0)=>{a=!0,d(g,u)};var c=null;function f(){c!==null&&(c.lastChild.remove(),i.before(c),c=null);var u=o?n:r,g=o?r:n;u&&Zi(u),g&&Ms(g,()=>{o?r=null:n=null})}const d=(u,g)=>{if(o!==(o=u)){var y=Ii(),L=i;if(y&&(c=document.createDocumentFragment(),c.append(L=Pt())),o?n??=g&&mt(()=>g(L)):r??=g&&mt(()=>g(L)),y){var M=U,p=o?n:r,F=o?r:n;p&&M.skipped_effects.delete(p),F&&M.skipped_effects.add(F),M.add_callback(f)}else f()}};$i(()=>{a=!1,e(l),a||d(null,null)},h)}function Ps(t){var e,s,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(e=0;e<n;e++)t[e]&&(s=Ps(t[e]))&&(i&&(i+=" "),i+=s)}else for(s in t)t[s]&&(i&&(i+=" "),i+=s);return i}function gn(){for(var t,e,s=0,i="",n=arguments.length;s<n;s++)(t=arguments[s])&&(e=Ps(t))&&(i&&(i+=" "),i+=e);return i}function mn(t){return typeof t=="object"?gn(t):t??""}function _n(t,e,s){var i=t==null?"":""+t;return i=i?i+" "+e:e,i===""?null:i}function pn(t,e){return t==null?null:String(t)}function wn(t,e,s,i,n,r){var o=t.__className;if(o!==s||o===void 0){var h=_n(s,i);h==null?t.removeAttribute("class"):t.setAttribute("class",h),t.__className=s}return r}function xn(t,e,s,i){var n=t.__style;if(n!==e){var r=pn(e);r==null?t.removeAttribute("style"):t.style.cssText=r,t.__style=e}return i}const yn=Symbol("is custom element"),Ln=Symbol("is html");function H(t,e,s,i){var n=Sn(t);n[e]!==(n[e]=s)&&(e==="loading"&&(t[hi]=s),s==null?t.removeAttribute(e):typeof s!="string"&&En(t).includes(e)?t[e]=s:t.setAttribute(e,s))}function Sn(t){return t.__attributes??={[yn]:t.nodeName.includes("-"),[Ln]:t.namespaceURI===Mi}}var ts=new Map;function En(t){var e=ts.get(t.nodeName);if(e)return e;ts.set(t.nodeName,e=[]);for(var s,i=t,n=Element.prototype;n!==i;){s=as(i);for(var r in s)s[r].set&&e.push(r);i=xt(i)}return e}function ss(t,e){return t===e||t?.[ae]===e}function bn(t={},e,s,i){return qi(()=>{var n,r;return Rt(()=>{n=r,r=[],C(()=>{t!==s(...r)&&(e(t,...r),n&&ss(s(...n),t)&&e(null,...n))})}),()=>{us(()=>{r&&ss(s(...r),t)&&e(null,...r)})}}),t}function Ns(t=!1){const e=x,s=e.l.u;if(!s)return;let i=()=>O(e.s);if(t){let n=0,r={};const o=Tt(()=>{let h=!1;const a=e.s;for(const l in a)a[l]!==r[l]&&(r[l]=a[l],h=!0);return h&&n++,n});i=()=>v(o)}s.b.length&&Vi(()=>{is(e,i),ft(s.b)}),gt(()=>{const n=C(()=>s.m.map(ri));return()=>{for(const r of n)typeof r=="function"&&r()}}),s.a.length&&gt(()=>{is(e,i),ft(s.a)})}function is(t,e){if(t.l.s)for(const s of t.l.s)v(s);e()}let Ie=!1;function Mn(t){var e=Ie;try{return Ie=!1,[t(),Ie]}finally{Ie=e}}function S(t,e,s,i){var n=!Ee||(s&yi)!==0,r=(s&Si)!==0,o=i,h=!0,a=()=>(h&&(h=!1,o=i),o),l;{var c=ae in t||li in t;l=we(t,e)?.set??(c&&e in t?p=>t[e]=p:void 0)}var f,d=!1;[f,d]=Mn(()=>t[e]),f===void 0&&i!==void 0&&(f=a(),l&&(n&&_i(),l(f)));var u;if(n?u=()=>{var p=t[e];return p===void 0?a():(h=!0,p)}:u=()=>{var p=t[e];return p!==void 0&&(o=void 0),p===void 0?o:p},n&&(s&Li)===0)return u;if(l){var g=t.$$legacy;return function(p,F){return arguments.length>0?((!n||!F||g||d)&&l(F?u():p),p):u()}}var y=!1,L=ds(()=>(y=!1,u()));v(L);var M=_;return function(p,F){if(arguments.length>0){const se=F?v(L):n&&r?pe(p):p;return T(L,se),y=!0,o!==void 0&&(o=se),p}return ue&&y||(M.f&fe)!==0?L.v:v(L)}}function kn(t){x===null&&fi(),Ee&&x.l!==null?Hn(x).m.push(t):gt(()=>{const e=C(t);if(typeof e=="function")return e})}function Hn(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const Cn="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Cn);Ci();const Ft="gySVGObject",Dn="http://www.w3.org/2000/svg",Re="object",Rs="function",Bs="string",Tn="undefined",Fs="",at=new WeakMap,lt=new Set;class Us{constructor(e){this._el=e,this._animates=[],this._timeouts=[]}get[Symbol.toStringTag](){return Ft}get el(){return this._el}add(e){let s=Y(e,Bs)?Is(e):Ze(e)?e:De(e);return this._el.appendChild(s._el),s}attachTo(e){return(Y(e,Re)?Ze(e)?e._el:e:document.querySelector(e)).appendChild(this._el),this}id(e){return e?(this._el.setAttribute("id",e),this):this._el.id||(this._el.id=An())}ref(){return`#${this.id()}`}url(){return`url(#${this.id()})`}animateTo(e,s=200,i,n){const r=this._animates,o=this._timeouts,h=()=>{o.forEach(c=>clearTimeout(c)),o.length=0,r.forEach(c=>c.remove()),r.length=0},a=(c=!0)=>{h();for(let f of Object.keys(e))this[f](e[f]);typeof n=="function"&&n(this)};if(s===0)return a(!1),this;h();let l=!1;for(let c of Object.keys(e))if(this[c]()!==e[c]){l=!0;const f=this.add("animate").attributeName(c).to(e[c]).fill("freeze").dur(s+"ms");f.beginElement(),r.push(f)}return l&&(typeof i=="function"&&i(this),o.push(setTimeout(a,s+10))),this}}const Y=(t,e)=>typeof t===e,Xe=(t,e)=>t instanceof e,An=()=>Ft+Math.random().toString(32).substring(2),Ze=t=>typeof t===Re&&t[Symbol.toStringTag]===Ft,Is=t=>De(document.createElementNS(Dn,t)),On=t=>({content:"innerHTML",source:"outerHTML",parent:"parentElement",next:"nextElementSibling",previous:"previousElementSibling"})[t]||t,De=t=>{if(!Y(t,Re)||t===null)return null;if(at.has(t))return at.get(t);const e=new Proxy(new Us(t),{get(s,i){if(["el",Symbol.toStringTag].includes(i)||i[0]==="_")return s[i];if(!Y(s[i],Tn))return(...n)=>ne(e,i,n)||s[i].call(e,...n);if(i==="d"&&t.tagName.toLowerCase()==="path"){let n=Fs;const r=new Proxy(o=>ne(e,i,[o])||o?t.setAttribute("d",o)||e:t.getAttribute("d"),{get(o,h){return(...a)=>(n+=`${h}${ne(e,i,a)||a.join(",")}`,t.setAttribute(i,n),r)}});return r}return i=On(i),Y(t[i],Rs)?(...n)=>{const r=ne(e,i,n)||t[i].call(t,...n);return r===void 0?e:zs(r)}:js(t,i,e)}});return at.set(t,e),e},js=(t,e,s,i)=>{if(typeof e=="symbol")return t[e];const n=e.replace(/_/g,"-"),r=(...o)=>{const h=ne(s,i?`${i}.${e}`:e,o);if(h!==void 0)return h;if(o.length===0){const l=n in t&&(!t.hasAttribute||!t.hasAttribute(n))?t[n]:t.getAttribute(n);return zs(l)}const a=o[0];if(Xe(t,CSSStyleDeclaration))return t[n]=a,s;if(n in t&&!lt.has(n)){if(t[n]===a)return s;const l=t[n];try{t[n]=a}catch{lt.add(n)}if(Y(t[n],Re)&&t[n]===a||t[n]!==l)return s;lt.add(n)}return a!==0&&!a?t.removeAttribute(n):t.setAttribute(n,String(o)),s};return new Proxy(r,{get(o,h){const a=t[n][h];return Y(a,Rs)?(...l)=>{const c=ne(s,`${e}.${h}`,l)||a.call(t[n],...l);return c===void 0?s:c}:js(t[n],h,s,n)},set(o,h,a){return t[n][h]=a}})},zs=t=>Xe(t,HTMLCollection)||Xe(t,NodeList)?[...t].map(e=>De(e)):Xe(t,SVGElement)?De(t):Y(t,Bs)?Number.isNaN(Number(t))?t:Number(t):t,ne=(t,e,s)=>{if(t._call)return t._call(t,e,s)};function Te(t){return ne(Te,Fs,[t]),Y(t,Re)?Ze(t)?t:De(t):Is(t||"svg")}Te.isWrapped=Ze;Te.extend=t=>t(Te,Us);class Pn{stack=[];current=-1;listeners=[];addListener(e){this.listeners.push(e)}execute(e){this.current+1<this.stack.length&&this.stack.splice(this.current+1,this.stack.length-this.current),this.stack.push(e),this.current+=1,e.execute(),this.fireChange()}canUndo(){return this.current>=0}canRedo(){return this.current+1<this.stack.length}undo(){this.canUndo()&&(this.stack[this.current].undo(),this.current-=1,this.fireChange())}redo(){this.canRedo()&&(this.current+=1,this.stack[this.current].redo(),this.fireChange())}fireChange(){this.listeners.forEach(e=>{e({canUndo:this.canUndo(),canRedo:this.canRedo()})})}}class A{constructor(e,s){this.x=e,this.y=s}centeredRect(e,s){return new Ae(this.x-e/2,this.y-s/2,e,s)}rect(e,s){return new Ae(this.x,this.y,e,s)}distance(e){const s=this.x-e.x,i=this.y-e.y;return Math.sqrt(s*s+i*i)}move(e,s){return new A(this.x+e,this.y+s)}}class Ae{constructor(e,s,i,n){this.x=e,this.y=s,this.width=i,this.height=n}contains(e){return this.x<=e.x&&e.x<this.corner().x&&this.y<=e.y&&e.y<this.corner().y}corner(){return new A(this.x+this.width,this.y+this.height)}expand(e){return new Ae(this.x-e,this.y-e,this.width+e*2,this.height+e*2)}center(){return new A(this.x+this.width/2,this.y+this.height/2)}topCenter(){return new A(this.x+this.width/2,this.y)}topRight(){return new A(this.x+this.width,this.y)}}function Nn(){const t={},e=new Promise((s,i)=>{t.resolve=s,t.reject=i});return t.promise=e,t}function ht(t,e){const s={};return t.forEach(i=>{s[e(i)]=i}),s}class Rn{mainEl;inputEl;editDefer;constructor(e){this.mainEl=document.createElement("div"),this.mainEl.classList.add("directEdit"),e.appendChild(this.mainEl),this.inputEl=document.createElement("input"),this.mainEl.appendChild(this.inputEl),this.mainEl.addEventListener("mouseup",s=>{s.target!==this.inputEl&&(this.editDefer.reject(),this.close())}),this.inputEl.addEventListener("keyup",s=>{s.keyCode==27?(this.editDefer.reject(),this.close()):s.keyCode==13&&(this.editDefer.resolve(this.inputEl.value),this.close())})}close(){this.mainEl.classList.remove("opened")}start(e){return this.editDefer=Nn(),e?(this.mainEl.classList.add("opened"),this.inputEl.value=e.value,this.inputEl.style.left=`${e.bounds.x}px`,this.inputEl.style.top=`${e.bounds.y}px`,this.inputEl.style.width=`${e.bounds.width}px`,this.inputEl.style.height=`${e.bounds.height}px`,this.inputEl.select(),this.inputEl.focus()):(console.log("START DIRECT EDIT WITH NULL"),this.close(),this.editDefer.reject()),this.editDefer.promise}}/*!
 * Font Awesome Free 5.15.3 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */var Vs={icon:[576,512,[],"f044","M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"]},Bn={prefix:"fas",iconName:"redo",icon:[512,512,[],"f01e","M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"]},Xs={icon:[448,512,[],"f2ed","M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"]},Fn={prefix:"fas",iconName:"undo",icon:[512,512,[],"f0e2","M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"]};class Un{constructor(e,s){this.message=e,this.end=s,this.oldEnd=this.message.from}oldEnd;execute(){this.message.from=this.end}undo(){this.message.from=this.oldEnd}redo(){this.execute()}}class In{constructor(e,s){this.message=e,this.end=s,this.oldEnd=this.message.to}oldEnd;execute(){this.message.to=this.end}undo(){this.message.to=this.oldEnd}redo(){this.execute()}}class jn{constructor(e,s){this.model=e,this.lifeLine=s}execute(){this.model.lifeLines.push(this.lifeLine)}undo(){this.model.lifeLines.pop()}redo(){this.execute()}}class zn{constructor(e,s,i=-1){this.model=e,this.message=s,this.position=i,i<0&&(this.position=e.messages.length)}execute(){this.model.messages.splice(this.position,0,this.message)}undo(){this.model.messages.splice(this.position,1)}redo(){this.execute()}}class Vn{constructor(e,s,i){this.model=e,this.message=s,this.position=i,this.oldPosition=this.model.messages.indexOf(s)}oldPosition;execute(){this.model.messages.splice(this.oldPosition,1),this.model.messages.splice(this.position,0,this.message)}undo(){this.model.messages.splice(this.position,1),this.model.messages.splice(this.oldPosition,0,this.message)}redo(){this.execute()}}class Xn{constructor(e,s){this.message=e,this.newText=s,this.oldText=this.message.text}oldText;execute(){this.message.text=this.newText}undo(){this.message.text=this.oldText}redo(){this.execute()}}class qn{constructor(e,s){this.model=e,this.message=s,this.oldPosition=this.model.messages.indexOf(s)}oldPosition;execute(){this.model.messages.splice(this.model.messages.indexOf(this.message),1)}undo(){this.model.messages.splice(this.oldPosition,0,this.message)}redo(){this.execute()}}class Yn{constructor(e,s){this.lifeLine=e,this.newName=s,this.oldName=this.lifeLine.name}oldName;execute(){this.lifeLine.name=this.newName}undo(){this.lifeLine.name=this.oldName}redo(){this.execute()}}class Gn{constructor(e,s,i){this.model=e,this.lifeLine=s,this.position=i,this.oldPosition=this.model.lifeLines.indexOf(s)}oldPosition;execute(){this.model.lifeLines.splice(this.oldPosition,1),this.model.lifeLines.splice(this.position,0,this.lifeLine)}undo(){this.model.lifeLines.splice(this.position,1),this.model.lifeLines.splice(this.oldPosition,0,this.lifeLine)}redo(){this.execute()}}class $n{constructor(e,s){this.model=e,this.lifeLine=s,this.removedMessages=e.messages.map((i,n)=>({message:i,position:n})).filter(i=>i.message.from===s||i.message.to===s),this.oldPosition=this.model.lifeLines.indexOf(s)}oldPosition;removedMessages;execute(){this.removedMessages.reverse().forEach(e=>{this.model.messages.splice(e.position,1)}),this.model.lifeLines.splice(this.model.lifeLines.indexOf(this.lifeLine),1)}undo(){this.model.lifeLines.splice(this.oldPosition,0,this.lifeLine),this.removedMessages.forEach(e=>{this.model.messages.splice(e.position,0,e.message)})}redo(){this.execute()}}let qs=0;function Wn(){const t=[pt("Roméo"),pt("Juliette")];return{lifeLines:t,messages:[wt(t[0],t[1],"Je t'aime"),wt(t[1],t[0],"Moi non plus")]}}function pt(t="actor"){return{id:`L${qs++}`,name:t}}function wt(t,e,s="message"){return{id:`M${qs++}`,from:t,to:e,text:s}}class Kn{icon=Vs.icon[4];action(e,s){const{diagram:i,message:n}=s,r={value:n.model.text,bounds:n.textBounds.expand(3)};i.directEdit(r).then(o=>{e.execute(new Xn(n.model,o)),i.layout()},()=>{})}}class Jn{icon=Xs.icon[4];action(e,s){const{diagram:i,message:n}=s;e.execute(new qn(i.model,n.model)),i.unselectAll(),i.render()}}class Zn{icon=Vs.icon[4];action(e,s){const{diagram:i,lifeLine:n}=s,r={value:n.model.name,bounds:n.textBounds.expand(3)};i.directEdit(r).then(o=>{e.execute(new Yn(n.model,o)),i.layout()},()=>{})}}class Qn{icon=Xs.icon[4];action(e,s){const{diagram:i,lifeLine:n}=s;e.execute(new $n(i.model,n.model)),i.unselectAll(),i.render()}}class er{constructor(e,s,i,n,r){this.bounds=e,this.tool=s,this.context=i,this.parentSvg=n,this.commandStack=r,this.draw()}hover=!1;svg;testHover(e){this.bounds.contains(e)?this.setHover(!0):this.setHover(!1)}setHover(e){this.hover!=e&&(this.hover=e,re(this.svg,this.hover,"hover"))}draw(){this.svg=this.parentSvg.add("g").transform(`translate(${this.bounds.x},${this.bounds.y})`),this.svg.el.classList.add("tool"),this.svg.add("rect").rx(5).ry(5).width(this.bounds.width).height(this.bounds.height).fill("white"),this.svg.add("g").transform("translate(4,3) scale(0.039)").add("path").d(this.tool.icon)}action(){this.tool.action(this.commandStack,this.context)}remove(){this.svg.remove()}}class tr{constructor(e,s,i,n,r,o){this.model=e,this.style=s,this.measurer=i,this.svg=n,this.directEdit=r,this.commandStack=o,this.shapesSvg=this.svg.add("g"),this.feedbackSvg=this.svg.add("g"),this.toolsSvg=this.svg.add("g"),this.render()}messageStart=0;pendingDragMessage=null;pendingMessage=null;pendingLifeLine=null;startMessageHandle=null;tools=[];shapesSvg;feedbackSvg;toolsSvg;lifeLines=[];messages=[];render(){this.lifeLines.forEach(n=>n.clearFlags());const e=ht(this.lifeLines,n=>n.model.id);this.lifeLines=this.model.lifeLines.map((n,r)=>{const o=e[n.id],h=o!=null?o.updateIndex(r):this.createLifeline(n,r);return h.setUsed(),h});for(let n in e){const r=e[n];r.isUsed()||r.remove()}const s=ht(this.lifeLines,n=>n.model.id);this.messages.forEach(n=>n.clearFlags());const i=ht(this.messages,n=>n.model.id);this.messages=this.model.messages.map(n=>{const r=i[n.id],o=r??this.createMessage(n,s);return o.setUsed(),o});for(let n in i){const r=i[n];r.isUsed()||r.remove()}this.layout()}createLifeline(e,s){return new ar(e,s,this.style,this.measurer,this.shapesSvg)}createMessage(e,s){return new lr(e,s[e.from.id],s[e.to.id],!1,this.style,this.measurer,this.shapesSvg)}testHover(e){let s=!1;if(this.tools.forEach(n=>{n.testHover(e),s||=n.hover}),s){this.clearOtherHover();return}this.lifeLines.forEach(n=>{n.testHover(e)});let i=!1;this.messages.forEach(n=>{n.testHover(e),i||=n.hover}),i?this.clearStartMessageHandle():this.testHoverInsertMessage(e)}testHoverInsertMessage(e){let s=!1;this.lifeLines.forEach(i=>{if(i.isNearLine(e)){const n=new A(i.centerX(),e.y);this.startMessageHandle?this.startMessageHandle.update(n):this.startMessageHandle=new sr(i,n,this.feedbackSvg),s=!0}}),s||this.clearStartMessageHandle()}clearStartMessageHandle(){this.startMessageHandle&&(this.startMessageHandle.remove(),this.startMessageHandle=null)}clearOtherHover(){this.messages.forEach(e=>e.setHover(!1)),this.lifeLines.forEach(e=>e.setHover(!1))}startDragMessageHandle(e,s){this.pendingMessage=new ir(e,s,this.feedbackSvg)}startDragNewMessageHandle(e){this.pendingMessage=new nr(this,this.startMessageHandle.lifeLine,this.startMessageHandle.position.y,e,this.feedbackSvg),this.clearStartMessageHandle()}updateDragMessageHandle(e){let s=null;this.lifeLines.forEach(i=>{Math.abs(i.centerX()-e)<10&&(s=i)}),this.pendingMessage.setHover(s,e)}finishDragMessageHandle(){this.pendingMessage.finish(this.commandStack),this.pendingMessage=null,this.render()}startDragMessage(e,s){this.unselectAll(),this.pendingDragMessage=new rr(this,e,s)}updateDragMessage(e){this.pendingDragMessage.setPosition(e)}finishDragMessage(){this.pendingDragMessage.finish(this.commandStack),this.pendingDragMessage=null,this.layout()}startDragLifeLine(e,s){this.pendingLifeLine=new or(this,e,s,this.feedbackSvg)}updateDragLifeLine(e){this.pendingLifeLine.updatePosition(e)}finishDragLifeLine(){this.pendingLifeLine.finish(this.commandStack),this.pendingLifeLine=null}findMessageHandle(e){for(let s of this.messages){if(s.from.bounds().contains(e))return s.from;if(s.to.bounds().contains(e))return s.to}return null}findMessage(e){return this.messages.find(s=>s.markerBounds.contains(e))}findLifeLine(e){return this.lifeLines.find(s=>s.hoverBounds.contains(e))}findTool(e){return this.tools.find(s=>s.bounds.contains(e))}layout(){this.lifeLines.forEach(s=>s.measureText()),this.messages.forEach(s=>s.measureText()),this.messageStart=0,this.lifeLines.forEach(s=>{this.messageStart=Math.max(this.messageStart,s.headHeight)});let e=this.messageStart+this.style.messageStartGap;this.messages.forEach(s=>{s.y=e,e+=this.style.messageGap}),this.lifeLines.forEach(s=>{s.x=this.style.leftMargin,s.y=this.style.topMargin,s.lineHeight=e-this.messageStart}),this.lifeLines.forEach(s=>{if(this.messages.forEach(i=>{const n=i.width+this.style.messageMargin*2;if(i.from.lifeLine==s&&i.to.lifeLine.index<s.index){const r=s.centerX()-i.to.lifeLine.centerX();r<n&&(s.x+=n-r)}else if(i.to.lifeLine==s&&i.from.lifeLine.index<s.index){const r=s.centerX()-i.from.lifeLine.centerX();r<n&&(s.x+=n-r)}}),s.index>0){const i=this.lifeLines[s.index-1],n=i.width+this.style.minHeadGap;s.x-i.x<n&&(s.x=i.x+n)}}),this.lifeLines.forEach(s=>s.layout()),this.messages.forEach(s=>s.layout())}update(){this.lifeLines.forEach(e=>e.update()),this.messages.forEach(e=>e.update())}selectMessage(e){if(this.unselectAll(),e){e.selected=!0;const s={diagram:this,message:e};this.placeTools(e.markerBounds.topCenter().move(0,-30),s,[new Kn,new Jn])}this.update()}selectLifeLine(e){this.unselectAll();const s=this.resolveLifeline(e);if(s){s.selected=!0;const i={diagram:this,lifeLine:s};this.placeTools(s.hoverBounds.topRight().move(5,5),i,[new Zn,new Qn])}this.update()}resolveLifeline(e){return this.lifeLines.find(s=>s.model==e.model)}unselectAll(){this.messages.forEach(e=>e.selected=!1),this.lifeLines.forEach(e=>e.selected=!1),this.tools.forEach(e=>e.remove()),this.tools=[]}placeTools(e,s,i){let n=e;this.tools=i.map(r=>{const o=new er(n.rect(26,26),r,s,this.toolsSvg,this.commandStack);return n=n.move(30,0),o})}}class sr{constructor(e,s,i){this.lifeLine=e,this.position=s,this.svg=i.add("circle").r(6),this.svg.el.classList.add("point-marker","hover"),this.update(s)}svg;update(e){this.position=e,this.svg.cx(e.x).cy(e.y)}remove(){this.svg.remove()}}class Ys{constructor(e,s,i,n,r){this.y=e,this.lifeLine=i,this.isMovingFrom=n,n?(this.from=s,this.to=i.centerX()):(this.from=i.centerX(),this.to=s),this.draw(r)}from;to;hoverOther=null;svg;lineSvg;circleSvg;setHover(e,s){e&&e!=this.lifeLine?(this.addHover(e),this.setPosition(this.hoverOther.centerX())):(this.removeHover(),this.setPosition(s))}setPosition(e){this.isMovingFrom?this.from=e:this.to=e,this.update()}addHover(e){this.hoverOther||(this.circleSvg=this.svg.add("circle").r(6),this.circleSvg.el.classList.add("point-marker","hover")),this.hoverOther=e}removeHover(){this.hoverOther&&(this.hoverOther=null,this.circleSvg.remove())}draw(e){this.svg=e.add("g"),this.lineSvg=this.svg.add("line").fill("none").stroke("black").marker_end("url(#triangle)").y1(this.y).y2(this.y),this.update()}update(){this.lineSvg.x1(this.from).x2(this.to),this.hoverOther&&this.circleSvg.cx(this.hoverOther.centerX()).cy(this.y)}finish(e){this.finishAction(e),this.svg.remove()}}class ir extends Ys{constructor(e,s,i){super(e.message.y,s,e.message.other(e).lifeLine,e==e.message.from,i),this.handle=e,this.handle.setHover(!1),this.handle.message.setEditing(!0)}finishAction(e){this.handle.message.setEditing(!1),this.hoverOther!=null&&this.hoverOther!=this.lifeLine&&(this.handle.message.from==this.handle?e.execute(new Un(this.handle.message.model,this.hoverOther.model)):e.execute(new In(this.handle.message.model,this.hoverOther.model)))}}class nr extends Ys{constructor(e,s,i,n,r){super(i,n,s,!1,r),this.diagram=e,this.parentSvg=r}finishAction(e){if(this.hoverOther!=null){let s=0;for(let i of this.diagram.messages){if(this.y<=i.markerBounds.y)break;++s}e.execute(new zn(this.diagram.model,wt(this.lifeLine.model,this.hoverOther.model),s))}}}class rr{constructor(e,s,i){this.diagram=e,this.message=s,this.y=i,this.message.y=i,this.oldPosition=e.messages.indexOf(s),this.message.hover=!1}oldPosition;setPosition(e){for(let s of this.diagram.messages)if(s!=this.message&&s.markerBounds.y<=e&&e<=s.markerBounds.corner().y){const n=Math.sign(s.markerBounds.center().y-e)>0?1:0;this.diagram.messages.splice(this.diagram.messages.indexOf(this.message),1),this.diagram.messages.splice(this.diagram.messages.indexOf(s)+n,0,this.message)}this.diagram.layout(),this.message.y=e,this.message.update()}finish(e){const s=this.diagram.messages.indexOf(this.message);s!=this.oldPosition&&e.execute(new Vn(this.diagram.model,this.message.model,s))}}class or{constructor(e,s,i,n){this.diagram=e,this.lifeLine=s,this.x=i,this.y=this.lifeLine.y,this.width=this.lifeLine.width,this.height=this.lifeLine.headHeight+this.lifeLine.lineHeight,this.draw(n)}x;y;width;height;snap=!1;position=-1;lineSvg;draw(e){this.lineSvg=e.add("line").stroke_dasharray(4),this.update()}update(){this.lineSvg.x1(this.x).y1(this.y).x2(this.x).y2(this.y+this.height).stroke_width(this.snap?3:1).stroke(this.snap?"green":"#55CCFF")}updatePosition(e){this.x=e,this.snap=!1,this.position=-1;let s=null;for(let i of this.diagram.lifeLines){if(s){const n=(s.x+s.width+i.x)/2;if(Math.abs(n-e)<10){this.x=n,this.snap=!0,this.position=this.diagram.lifeLines.indexOf(i);break}}else if(e<i.x){this.x=i.x-10,this.snap=!0,this.position=0;break}s=i}!this.snap&&s&&e>s.x+s.width&&(this.x=s.x+s.width+10,this.snap=!0,this.position=this.diagram.lifeLines.indexOf(s)+1),this.update()}finish(e){this.remove(),this.position>this.lifeLine.index&&(this.position-=1);const s=this.diagram.lifeLines.indexOf(this.lifeLine);this.position>=0&&this.position!=s&&(e.execute(new Gn(this.diagram.model,this.lifeLine.model,this.position)),this.diagram.render())}remove(){this.lineSvg.remove()}}const Qe=1;class ar{constructor(e,s,i,n,r){this.model=e,this.index=s,this.style=i,this.text=new Gs(this.model.name,this.style.lifeLineHeadTextSize,1,n),this.draw(r)}flags;text;width;headHeight;lineHeight=0;x=0;y=0;selected=!1;hover=!1;hoverBounds;markerBounds;textBounds;textDy;gSvg;rectSvg;textSvg;lineSvg;selectSvg;clearFlags(){this.flags=0}setUsed(){this.flags|=Qe}isUsed(){return(this.flags&Qe)!=0}updateIndex(e){return this.index=e,this}isNearLine(e){return Math.abs(this.centerX()-e.x)<10&&this.y+this.headHeight<e.y&&e.y<this.y+this.headHeight+this.lineHeight}centerX(){return this.x+this.width/2}testHover(e){this.setHover(this.hoverBounds.contains(e))}setHover(e){this.hover!=e&&(this.hover=e,this.updateHover())}measureText(){this.text.update(this.model.name),this.headHeight=Math.max(this.text.height+this.style.lifeLineHeadMargin*2,this.style.minHeadHeight),this.width=this.text.width+this.style.lifeLineHeadMargin*2,this.textDy=this.style.lifeLineHeadMargin+this.text.ascent+10}layout(){this.textBounds=this.text.boundsAt(new A(this.x+this.width/2,this.y).move(0,this.textDy)),this.hoverBounds=new A(this.x,this.y).rect(this.width,this.headHeight).expand(10),this.markerBounds=new A(this.x,this.y).rect(this.width,this.headHeight+this.lineHeight).expand(10),this.update()}draw(e){this.gSvg=e.add("g"),this.rectSvg=this.gSvg.add("rect").stroke("black").fill("none"),this.textSvg=this.gSvg.add("text").text_anchor("middle"),this.lineSvg=this.gSvg.add("line").stroke_dasharray(4).stroke("black"),this.selectSvg=this.gSvg.add("rect").x(-10).y(-10).rx(10).ry(10).fill("none").stroke_dasharray(4).stroke_width(2),this.selectSvg.el.classList.add("select-marker")}update(){this.gSvg.transform(`translate(${this.x},${this.y})`),this.rectSvg.width(this.width).height(this.headHeight),this.textSvg.dx(this.width/2).dy(this.textDy).style.fontSize(this.text.size).content(this.text.value),this.lineSvg.x1(this.width/2).y1(this.headHeight).x2(this.width/2).y2(this.headHeight+this.lineHeight),this.selectSvg.width(this.markerBounds.width).height(this.markerBounds.height),this.updateHover(),re(this.selectSvg,this.selected,"selected")}updateHover(){re(this.selectSvg,!this.selected&&this.hover,"hover")}remove(){this.gSvg.remove()}}function re(t,e,s){e?t.el.classList.add(s):t.el.classList.remove(s)}class lr{constructor(e,s,i,n,r,o,h){this.model=e,this.selected=n,this.style=r,this.from=new ns(s,this),this.to=new ns(i,this),this.text=new Gs(this.model.text,this.style.messageTextSize,0,o),this.draw(h)}flags=0;from;to;reversed=!1;text;width;height;hover=!1;markerBounds=null;textBounds;y=0;editing=!1;gSvg;lineSvg;textSvg;startCircleSvg;endCircleSvg;selectSvg;clearFlags(){this.flags=0}setUsed(){this.flags|=Qe}isUsed(){return(this.flags&Qe)!=0}other(e){return e==this.from?this.to:this.from}testHover(e){this.markerBounds.contains(e)?(this.setHover(!0),this.checkOver(this.from.setHover(this.from.bounds().contains(e))),this.checkOver(this.to.setHover(this.to.bounds().contains(e)))):(this.setHover(!1),this.checkOver(this.from.setHover(!1)),this.checkOver(this.to.setHover(!1)))}setHover(e){this.hover!=e&&(this.hover=e,this.updateHover())}checkOver(e){e&&this.updateHover()}measureText(){this.text.update(this.model.text),this.width=this.text.width,this.height=this.text.height}layout(){this.reversed=this.from.lifeLine.index>this.to.lifeLine.index,this.text.align=this.reversed?0:2,this.markerBounds=new Ae(Math.min(this.from.lifeLine.centerX()-10,this.to.lifeLine.centerX()-10),this.y-this.height-7,Math.abs(this.from.lifeLine.centerX()-this.to.lifeLine.centerX())+20,this.height+20);const e=this.reversed?this.style.messageMargin:-this.style.messageMargin;this.textBounds=this.text.boundsAt(new A(this.to.lifeLine.centerX(),this.y).move(e,-7)),this.update()}draw(e){this.gSvg=e.add("g"),this.lineSvg=this.gSvg.add("line").stroke("black").marker_end("url(#triangle)"),this.textSvg=this.gSvg.add("text"),this.startCircleSvg=this.gSvg.add("circle").r(6),this.startCircleSvg.el.classList.add("point-marker"),this.endCircleSvg=this.gSvg.add("circle").r(6),this.endCircleSvg.el.classList.add("point-marker"),this.selectSvg=this.gSvg.add("rect").rx(10).ry(10).fill("none").stroke_dasharray(4).stroke_width(2),this.selectSvg.el.classList.add("select-marker")}update(){this.editing?this.gSvg.el.classList.add("hide"):(this.gSvg.el.classList.remove("hide"),this.lineSvg.x1(this.from.lifeLine.centerX()).y1(this.y).x2(this.to.lifeLine.centerX()).y2(this.y),this.textSvg.y(this.y-7).style.fontSize(this.text.size).content(this.text.value),this.reversed?this.textSvg.x(this.to.lifeLine.centerX()+this.style.messageMargin).text_anchor("start"):this.textSvg.x(this.to.lifeLine.centerX()-this.style.messageMargin).text_anchor("end"),this.startCircleSvg.cx(this.from.center().x).cy(this.from.center().y),this.endCircleSvg.cx(this.to.center().x).cy(this.to.center().y),this.selectSvg.x(this.markerBounds.x).y(this.markerBounds.y).width(this.markerBounds.width).height(this.markerBounds.height),this.updateHover())}updateHover(){re(this.startCircleSvg,this.from.hover,"hover"),re(this.endCircleSvg,this.to.hover,"hover"),re(this.selectSvg,!this.selected&&this.hover,"hover"),re(this.selectSvg,this.selected,"selected")}remove(){this.gSvg.remove()}setEditing(e){this.editing=e,this.update()}}class Gs{constructor(e,s,i,n){this.size=s,this.align=i,this.measurer=n,this.update(e)}value;width;height;ascent;update(e){this.value=e;const s=this.measurer.measure(this.value,this.size);this.width=s.width,this.ascent=s.actualBoundingBoxAscent,this.height=s.actualBoundingBoxAscent+s.actualBoundingBoxDescent}boundsAt(e){return this.align==2?e.move(-this.width,-this.ascent).rect(this.width,this.height):this.align==1?e.move(-this.width/2,-this.ascent).rect(this.width,this.height):e.move(0,-this.ascent).rect(this.width,this.height)}}class ns{constructor(e,s){this.lifeLine=e,this.message=s}hover=!1;center(){return new A(this.lifeLine.centerX(),this.message.y)}bounds(){return this.center().centeredRect(20,20)}setHover(e){return this.hover!=e?(this.hover=e,!0):!1}}class hr{constructor(e){this.view=e}}class G{constructor(e){this.context=e}mouseDown(e){const s=this.context.view.findTool(e);if(s)return new cr(this.context,s);const i=this.context.view.findMessageHandle(e);if(i)return new fr(this.context,e,i);const n=this.context.view.findMessage(e);if(n)return new ur(this.context,e,n);const r=this.context.view.findLifeLine(e);return r?new vr(this.context,e,r):this.context.view.startMessageHandle?(this.context.view.startDragNewMessageHandle(e.x),new $s(this.context)):this}mouseUp(e){return this.context.view.unselectAll(),this.context.view.update(),this}mouseMove(e){return this.context.view.testHover(e),this}}class cr{constructor(e,s){this.context=e,this.tool=s}mouseDown(e){return this}mouseUp(e){return this.tool.action(),new G(this.context)}mouseMove(e){return this.tool.bounds.contains(e)?this:new G(this.context)}}class fr{constructor(e,s,i){this.context=e,this.startDrag=s,this.handle=i}mouseDown(e){return this}mouseUp(e){return new G(this.context)}mouseMove(e){return e.distance(this.startDrag)>10?(this.context.view.startDragMessageHandle(this.handle,e.x),new $s(this.context)):this}}class $s{constructor(e){this.context=e}mouseDown(e){return this}mouseUp(e){return this.context.view.finishDragMessageHandle(),new G(this.context)}mouseMove(e){return this.context.view.updateDragMessageHandle(e.x),this}}class ur{constructor(e,s,i){this.context=e,this.startDrag=s,this.message=i}mouseDown(e){return this}mouseUp(e){return this.context.view.selectMessage(this.message),new G(this.context)}mouseMove(e){return e.distance(this.startDrag)>10?new dr(this.context,e,this.message):this}}class dr{constructor(e,s,i){this.context=e,this.dragPoint=s,this.message=i,this.context.view.startDragMessage(i,s.y)}mouseDown(e){return this}mouseUp(e){return this.context.view.finishDragMessage(),this.context.view.selectMessage(this.message),new G(this.context)}mouseMove(e){return this.context.view.updateDragMessage(e.y),Ws(),this}}class vr{constructor(e,s,i){this.context=e,this.startDrag=s,this.lifeLine=i}mouseDown(e){return this}mouseUp(e){return this.context.view.selectLifeLine(this.lifeLine),new G(this.context)}mouseMove(e){return e.distance(this.startDrag)>10?new gr(this.context,e,this.lifeLine):this}}class gr{constructor(e,s,i){this.context=e,this.dragPoint=s,this.lifeLine=i,this.context.view.startDragLifeLine(this.lifeLine,s.x)}mouseDown(e){return this}mouseUp(e){return this.context.view.finishDragLifeLine(),this.context.view.selectLifeLine(this.lifeLine),new G(this.context)}mouseMove(e){return this.context.view.updateDragLifeLine(e.x),Ws(),this}}function Ws(){document.selection?document.selection.empty():window.getSelection().removeAllRanges()}const mr={lifeLineHeadTextSize:"24px",lifeLineHeadMargin:10,minHeadHeight:60,topMargin:20,leftMargin:20,minHeadGap:20,messageTextSize:"18px",messageStartGap:80,messageGap:60,messageMargin:15};class _r{context;constructor(){const e=document.createElement("canvas");this.context=e.getContext("2d")}measure(e,s){return this.context.font=s+" arial",this.context.measureText(e)}}class pr{measurer=new _r;commandStack=new Pn;directEdit;model;state;style;view;container;svg;constructor(e){this.style=mr,this.container=document.createElement("div"),this.container.setAttribute("class","editor-container"),e.container.appendChild(this.container),this.container.addEventListener("mousedown",i=>this.mouseDown(i)),this.container.addEventListener("mouseup",i=>this.mouseUp(i)),this.container.addEventListener("mousemove",i=>this.mouseMove(i)),this.directEdit=new Rn(e.container),window.addEventListener("resize",i=>this.resizePage()),this.svg=Te().viewBox(0,0,100,100),this.svg.attachTo(this.container),this.svg.add("defs").add("marker").id("triangle").viewBox("0 0 10 10").refX("10").refY("5").markerUnits("strokeWidth").markerWidth("10").markerHeight("10").orient("auto-start-reverse").add("path").d("M 0 0 L 10 5 L 0 10 z").fill("black"),this.svg.add("style").content(`
        g.hide {
            visibility: hidden;
        }
        .select-marker {
            stroke: none;
        }
        .select-marker.hover {
            stroke: #55CCFF;
        }
        .select-marker.selected {
            stroke: #55CC99;
        }
        .point-marker {
            fill: none;
        }
        .point-marker.hover {
            fill: #55CCFF;
        }
        .tool rect {
            stroke: #CCCCCC;
        }
        .tool.hover rect {
            stroke: #55CCFF;
        }`),this.model=e.model,this.view=new tr(this.model,this.style,this.measurer,this.svg,i=>this.directEdit.start(i),this.commandStack);const s=new hr(this.view);this.state=new G(s),this.resizePage()}resizePage(){const e=this.container.clientWidth,s=this.container.clientHeight;this.svg.viewBox(0,0,e,s).width(e).height(s)}mouseDown(e){const s=new A(e.clientX,e.clientY);this.state=this.state.mouseDown(s)}mouseUp(e){const s=new A(e.clientX,e.clientY);this.state=this.state.mouseUp(s)}mouseMove(e){const s=new A(e.clientX,e.clientY);this.state=this.state.mouseMove(s)}undo(){this.commandStack.undo(),this.view.render()}redo(){this.commandStack.redo(),this.view.render()}executeCommand(e){this.commandStack.execute(e),this.view.render()}onStackChange(e){this.commandStack.addListener(e)}}function wr(t){return new pr(t)}const je=parseFloat;function et(t,e=";"){let s;if(Array.isArray(t))s=t.filter(i=>i);else{s=[];for(const i in t)t[i]&&s.push(`${i}:${t[i]}`)}return s.join(e)}function xr(t,e,s,i){let n,r;const o="1em";let h,a,l,c="-.125em";const f="visible";return i&&(l="center",r="1.25em"),s&&(n=s),e&&(e=="lg"?(a="1.33333em",h=".75em",c="-.225em"):e=="xs"?a=".75em":e=="sm"?a=".875em":a=e.replace("x","em")),et([et({float:n,width:r,height:o,"line-height":h,"font-size":a,"text-align":l,"vertical-align":c,"transform-origin":"center",overflow:f}),t])}function yr(t,e,s,i,n,r=1,o="",h=""){let a=1,l=1;return n&&(n=="horizontal"?a=-1:n=="vertical"?l=-1:a=l=-1),et([`translate(${je(e)*r}${o},${je(s)*r}${o})`,`scale(${a*je(t)},${l*je(t)})`,i&&`rotate(${i}${h})`]," ")}var Lr=Bt('<path class="svelte-1cj2gr0"></path>'),Sr=Bt('<path class="svelte-1cj2gr0"></path><path class="svelte-1cj2gr0"></path>',1),Er=Bt('<svg aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg"><g class="svelte-1cj2gr0"><g class="svelte-1cj2gr0"><!></g></g></svg>');function rs(t,e){Ht(e,!1);let s=S(e,"class",8,""),i=S(e,"id",8,""),n=S(e,"style",8,""),r=S(e,"icon",8),o=S(e,"size",8,""),h=S(e,"color",8,""),a=S(e,"fw",8,!1),l=S(e,"pull",8,""),c=S(e,"scale",8,1),f=S(e,"translateX",8,0),d=S(e,"translateY",8,0),u=S(e,"rotate",8,""),g=S(e,"flip",8,!1),y=S(e,"spin",8,!1),L=S(e,"pulse",8,!1),M=S(e,"primaryColor",8,""),p=S(e,"secondaryColor",8,""),F=S(e,"primaryOpacity",8,1),se=S(e,"secondaryOpacity",8,.4),de=S(e,"swapOpacity",8,!1),w=_e(),Ut=_e(),It=_e(),jt=_e();Ue(()=>O(r()),()=>{T(w,r()&&r().icon||[0,0,"",[],""])}),Ue(()=>(O(s()),O(y()),O(L())),()=>{T(Ut,et([s(),"svelte-fa",y()&&"spin",L()&&"pulse"]," "))}),Ue(()=>(O(n()),O(o()),O(l()),O(a())),()=>{T(It,xr(n(),o(),l(),a()))}),Ue(()=>(O(c()),O(f()),O(d()),O(u()),O(g())),()=>{T(jt,yr(c(),f(),d(),u(),g(),512))}),Yi(),Ns();var zt=fn(),Ks=Wt(zt);{var Js=it=>{var ve=Er(),nt=j(ve),Vt=j(nt),Zs=j(Vt);{var Qs=ge=>{var ie=Lr();Ve(()=>{H(ie,"d",(v(w),C(()=>v(w)[4]))),H(ie,"fill",h()||M()||"currentColor"),H(ie,"transform",(v(w),C(()=>`translate(${v(w)[0]/-2} ${v(w)[1]/-2})`)))}),He(ge,ie)},ei=ge=>{var ie=Sr(),be=Wt(ie),Be=ze(be);Ve(()=>{H(be,"d",(v(w),C(()=>v(w)[4][0]))),H(be,"fill",p()||h()||"currentColor"),H(be,"fill-opacity",de()!=!1?F():se()),H(be,"transform",(v(w),C(()=>`translate(${v(w)[0]/-2} ${v(w)[1]/-2})`))),H(Be,"d",(v(w),C(()=>v(w)[4][1]))),H(Be,"fill",M()||h()||"currentColor"),H(Be,"fill-opacity",de()!=!1?se():F()),H(Be,"transform",(v(w),C(()=>`translate(${v(w)[0]/-2} ${v(w)[1]/-2})`)))}),He(ge,ie)};es(Zs,ge=>{v(w),C(()=>typeof v(w)[4]=="string")?ge(Qs):ge(ei,!1)})}Ve(()=>{H(ve,"id",i()),wn(ve,0,mn(v(Ut)),"svelte-1cj2gr0"),xn(ve,v(It)),H(ve,"viewBox",(v(w),C(()=>`0 0 ${v(w)[0]} ${v(w)[1]}`))),H(nt,"transform",(v(w),C(()=>`translate(${v(w)[0]/2} ${v(w)[1]/2})`))),H(nt,"transform-origin",(v(w),C(()=>`${v(w)[0]/4} 0`))),H(Vt,"transform",v(jt))}),He(it,ve)};es(Ks,it=>{v(w),C(()=>v(w)[4])&&it(Js)})}He(t,zt),Ct()}var br=hn('<div class="container svelte-1jbr9wa"><div></div> <div class="palette svelte-1jbr9wa"><ul class="svelte-1jbr9wa"><li class="svelte-1jbr9wa"><button title="Undo"><!></button></li> <li class="svelte-1jbr9wa"><button title="Redo"><!></button></li> <li class="spacer svelte-1jbr9wa"><button>Add LifeLine</button></li></ul></div></div>');function Mr(t,e){Ht(e,!1);let s=Wn(),i=_e(),n,r=_e({canUndo:!1,canRedo:!1});kn(()=>{n=wr({container:v(i),model:s}),n.onStackChange(de=>{T(r,de)})});function o(){n.undo()}function h(){n.redo()}function a(){n.executeCommand(new jn(s,pt()))}Ns();var l=br(),c=j(l);bn(c,de=>T(i,de),()=>v(i));var f=ze(c,2),d=j(f),u=j(d),g=j(u),y=j(g);rs(y,{get icon(){return Fn}});var L=ze(u,2),M=j(L),p=j(M);rs(p,{get icon(){return Bn}});var F=ze(L,2),se=j(F);Ve(()=>{g.disabled=!v(r).canUndo,M.disabled=!v(r).canRedo}),ot("click",g,o),ot("click",M,h),ot("click",se,a),He(t,l),Ct()}function kr(t){Mr(t,{})}un(kr,{target:document.body});
