(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();const Ti=!1;var Us=Array.isArray,vr=Array.prototype.indexOf,Xs=Array.from,Ss=Object.defineProperty,ee=Object.getOwnPropertyDescriptor,Qi=Object.getOwnPropertyDescriptors,wr=Object.prototype,yr=Array.prototype,Ys=Object.getPrototypeOf,Ci=Object.isExtensible;function _r(e){return e()}function Es(e){for(var t=0;t<e.length;t++)e[t]()}function xr(){var e,t,s=new Promise((i,n)=>{e=i,t=n});return{promise:s,resolve:e,reject:t}}const rt=2,Vs=4,rs=8,Ae=16,xt=32,oe=64,Ji=128,st=256,Ye=512,j=1024,it=2048,Nt=4096,ct=8192,Yt=16384,$s=32768,Gs=65536,Ai=1<<17,br=1<<18,Ws=1<<19,Qs=1<<20,Ms=1<<21,Js=1<<22,zt=1<<23,jt=Symbol("$state"),Sr=Symbol("legacy props"),Er=Symbol(""),Ks=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Mr(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function kr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Lr(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Tr(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Cr(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ar(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Or(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Dr(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Nr(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Hr(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Pr(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const Ir=1,Rr=2,zr=16,jr=2,Fr=4,Br=8,qr=1,Ur=2,q=Symbol(),Xr="http://www.w3.org/1999/xhtml";let Yr=!1;function Ki(e){return e===this.v}function Vr(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Zi(e){return!Vr(e,this.v)}let ae=!1,$r=!1;function Gr(){ae=!0}let I=null;function Ve(e){I=e}function Zs(e,t=!1,s){I={p:I,c:null,e:null,s:e,x:null,l:ae&&!t?{s:null,u:null,$:[]}:null}}function ti(e){var t=I,s=t.e;if(s!==null){t.e=null;for(var i of s)fn(i)}return I=t.p,{}}function Oe(){return!ae||I!==null&&I.l===null}const Wr=new WeakMap;function Qr(e){var t=L;if(t===null)return C.f|=zt,e;if((t.f&$s)===0){if((t.f&Ji)===0)throw!t.parent&&e instanceof Error&&tn(e),e;t.b.error(e)}else ei(e,t)}function ei(e,t){for(;t!==null;){if((t.f&Ji)!==0)try{t.b.error(e);return}catch{}t=t.parent}throw e instanceof Error&&tn(e),e}function tn(e){const t=Wr.get(e);t&&(Ss(e,"message",{value:t.message}),Ss(e,"stack",{value:t.stack}))}let $e=[];function Jr(){var e=$e;$e=[],Es(e)}function en(e){$e.length===0&&queueMicrotask(Jr),$e.push(e)}function Kr(){for(var e=L.b;e!==null&&!e.has_pending_snippet();)e=e.parent;return e===null&&Mr(),e}function si(e){var t=rt|it,s=C!==null&&(C.f&rt)!==0?C:null;return L===null||s!==null&&(s.f&st)!==0?t|=st:L.f|=Ws,{ctx:I,deps:null,effects:null,equals:Ki,f:t,fn:e,reactions:null,rv:0,v:q,wv:0,parent:s??L,ac:null}}function Zr(e,t){let s=L;s===null&&Lr();var i=s.b,n=void 0,r=be(q),o=null,a=!C;return fo(()=>{try{var h=e()}catch(d){h=Promise.reject(d)}var l=()=>h;n=o?.then(l,l)??Promise.resolve(h),o=n;var u=et,c=i.pending;a&&(i.update_pending_count(1),c||u.increment());const f=(d,m=void 0)=>{o=null,c||u.activate(),m?m!==Ks&&(r.f|=zt,We(r,m)):((r.f&zt)!==0&&(r.f^=zt),We(r,d)),a&&(i.update_pending_count(-1),c||u.decrement()),rn()};if(n.then(f,d=>f(null,d||"unknown")),u)return()=>{queueMicrotask(()=>u.neuter())}}),new Promise(h=>{function l(u){function c(){u===n?h(r):l(n)}u.then(c,c)}l(n)})}function ii(e){const t=si(e);return t.equals=Zi,t}function sn(e){var t=e.effects;if(t!==null){e.effects=null;for(var s=0;s<t.length;s+=1)yt(t[s])}}function to(e){for(var t=e.parent;t!==null;){if((t.f&rt)===0)return t;t=t.parent}return null}function ni(e){var t,s=L;At(to(e));try{sn(e),t=xn(e)}finally{At(s)}return t}function nn(e){var t=ni(e);if(e.equals(t)||(e.v=t,e.wv=yn()),!Vt)if(ne!==null)ne.set(e,e.v);else{var s=(Tt||(e.f&st)!==0)&&e.deps!==null?Nt:j;B(e,s)}}function eo(e,t,s){const i=Oe()?si:ii;if(t.length===0){s(e.map(i));return}var n=et,r=L,o=so(),a=Kr();Promise.all(t.map(h=>Zr(h))).then(h=>{n?.activate(),o();try{s([...e.map(i),...h])}catch(l){(r.f&Yt)===0&&ei(l,r)}n?.deactivate(),rn()}).catch(h=>{a.error(h)})}function so(){var e=L,t=C,s=I;return function(){At(e),pt(t),Ve(s)}}function rn(){At(null),pt(null),Ve(null)}const Fe=new Set;let et=null,ne=null;let we=[],Ge=null,ks=!1;class os{#h=new Map;#r=new Map;#o=new Set;#e=0;#l=null;#u=!1;#i=[];#a=[];#s=[];#t=[];#n=[];skipped_effects=new Set;#f(t){we=[];var s=null;if(Fe.size>1){s=new Map,ne=new Map;for(const[r,o]of this.#h)s.set(r,{v:r.v,wv:r.wv}),r.v=o;for(const r of Fe)if(r!==this)for(const[o,a]of r.#r)s.has(o)||(s.set(o,{v:o.v,wv:o.wv}),o.v=a)}for(const r of t)this.#d(r);if(this.#i.length===0&&this.#e===0){var i=this.#s,n=this.#t;this.#s=[],this.#t=[],this.#n=[],this.#c(),Oi(i),Oi(n),this.#l?.resolve()}else{for(const r of this.#s)B(r,j);for(const r of this.#t)B(r,j);for(const r of this.#n)B(r,j)}if(s){for(const[r,{v:o,wv:a}]of s)r.wv<=a&&(r.v=o);ne=null}for(const r of this.#i)ie(r);for(const r of this.#a)ie(r);this.#i=[],this.#a=[]}#d(t){t.f^=j;for(var s=t.first;s!==null;){var i=s.f,n=(i&(xt|oe))!==0,r=n&&(i&j)!==0,o=r||(i&ct)!==0||this.skipped_effects.has(s);if(!o&&s.fn!==null){if(n)s.f^=j;else if((i&Vs)!==0)this.#t.push(s);else if(De(s))if((i&Js)!==0){var a=s.b?.pending?this.#a:this.#i;a.push(s)}else(s.f&Ae)!==0&&this.#n.push(s),ie(s);var h=s.first;if(h!==null){s=h;continue}}var l=s.parent;for(s=s.next;s===null&&l!==null;)s=l.next,l=l.parent}}capture(t,s){this.#r.has(t)||this.#r.set(t,s),this.#h.set(t,t.v)}activate(){et=this}deactivate(){et=null}neuter(){this.#u=!0}flush(){we.length>0?this.flush_effects():this.#c(),et===this&&(this.#e===0&&Fe.delete(this),et=null)}flush_effects(){var t=se;ks=!0;try{var s=0;for(Hi(!0);we.length>0;)s++>1e3&&io(),this.#f(we),Ft.clear()}finally{ks=!1,Hi(t),Ge=null}}#c(){if(!this.#u)for(const t of this.#o)t();this.#o.clear()}increment(){this.#e+=1}decrement(){if(this.#e-=1,this.#e===0){for(const t of this.#s)B(t,it),Ct(t);for(const t of this.#t)B(t,it),Ct(t);for(const t of this.#n)B(t,it),Ct(t);this.#s=[],this.#t=[],this.flush()}}add_callback(t){this.#o.add(t)}settled(){return(this.#l??=xr()).promise}static ensure(){if(et===null){const t=et=new os;Fe.add(et),queueMicrotask(()=>{et===t&&t.flush()})}return et}}function io(){try{Or()}catch(e){if(Ge!==null)ei(e,Ge);else throw e}}function Oi(e){var t=e.length;if(t!==0){for(var s=0;s<t;s++){var i=e[s];if((i.f&(Yt|ct))===0&&De(i)){var n=Qe;if(ie(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?gn(i):i.fn=null),Qe>n&&(i.f&Qs)!==0)break}}for(;s<t;s+=1)Ct(e[s])}}function Ct(e){for(var t=Ge=e;t.parent!==null;){t=t.parent;var s=t.f;if(ks&&t===L&&(s&Ae)!==0)return;if((s&(oe|xt))!==0){if((s&j)===0)return;t.f^=j}}we.push(t)}const Ft=new Map;function be(e,t){var s={f:0,v:e,reactions:null,equals:Ki,rv:0,wv:0};return s}function Et(e,t){const s=be(e);return go(s),s}function Lt(e,t=!1,s=!0){const i=be(e);return t||(i.equals=Zi),ae&&s&&I!==null&&I.l!==null&&(I.l.s??=[]).push(i),i}function Y(e,t,s=!1){C!==null&&(!mt||(C.f&Ai)!==0)&&Oe()&&(C.f&(rt|Ae|Js|Ai))!==0&&!wt?.includes(e)&&Pr();let i=s?Jt(t):t;return We(e,i)}function We(e,t){if(!e.equals(t)){var s=e.v;Vt?Ft.set(e,t):Ft.set(e,s),e.v=t,os.ensure().capture(e,s),(e.f&rt)!==0&&((e.f&it)!==0&&ni(e),B(e,(e.f&st)===0?j:Nt)),e.wv=yn(),on(e,it),Oe()&&L!==null&&(L.f&j)!==0&&(L.f&(xt|oe))===0&&(ht===null?vo([e]):ht.push(e))}return t}function ds(e){Y(e,e.v+1)}function on(e,t){var s=e.reactions;if(s!==null)for(var i=Oe(),n=s.length,r=0;r<n;r++){var o=s[r],a=o.f;(a&it)===0&&(!i&&o===L||(B(o,t),(a&(j|st))!==0&&((a&rt)!==0?on(o,Nt):Ct(o))))}}function Jt(e){if(typeof e!="object"||e===null||jt in e)return e;const t=Ys(e);if(t!==wr&&t!==yr)return e;var s=new Map,i=Us(e),n=Et(0),r=Bt,o=a=>{if(Bt===r)return a();var h=C,l=Bt;pt(null),Ii(r);var u=a();return pt(h),Ii(l),u};return i&&s.set("length",Et(e.length)),new Proxy(e,{defineProperty(a,h,l){(!("value"in l)||l.configurable===!1||l.enumerable===!1||l.writable===!1)&&Nr();var u=s.get(h);return u===void 0?u=o(()=>{var c=Et(l.value);return s.set(h,c),c}):Y(u,l.value,!0),!0},deleteProperty(a,h){var l=s.get(h);if(l===void 0){if(h in a){const f=o(()=>Et(q));s.set(h,f),ds(n)}}else{if(i&&typeof h=="string"){var u=s.get("length"),c=Number(h);Number.isInteger(c)&&c<u.v&&Y(u,c)}Y(l,q),ds(n)}return!0},get(a,h,l){if(h===jt)return e;var u=s.get(h),c=h in a;if(u===void 0&&(!c||ee(a,h)?.writable)&&(u=o(()=>{var d=Jt(c?a[h]:q),m=Et(d);return m}),s.set(h,u)),u!==void 0){var f=w(u);return f===q?void 0:f}return Reflect.get(a,h,l)},getOwnPropertyDescriptor(a,h){var l=Reflect.getOwnPropertyDescriptor(a,h);if(l&&"value"in l){var u=s.get(h);u&&(l.value=w(u))}else if(l===void 0){var c=s.get(h),f=c?.v;if(c!==void 0&&f!==q)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return l},has(a,h){if(h===jt)return!0;var l=s.get(h),u=l!==void 0&&l.v!==q||Reflect.has(a,h);if(l!==void 0||L!==null&&(!u||ee(a,h)?.writable)){l===void 0&&(l=o(()=>{var f=u?Jt(a[h]):q,d=Et(f);return d}),s.set(h,l));var c=w(l);if(c===q)return!1}return u},set(a,h,l,u){var c=s.get(h),f=h in a;if(i&&h==="length")for(var d=l;d<c.v;d+=1){var m=s.get(d+"");m!==void 0?Y(m,q):d in a&&(m=o(()=>Et(q)),s.set(d+"",m))}if(c===void 0)(!f||ee(a,h)?.writable)&&(c=o(()=>Et(void 0)),Y(c,Jt(l)),s.set(h,c));else{f=c.v!==q;var p=o(()=>Jt(l));Y(c,p)}var v=Reflect.getOwnPropertyDescriptor(a,h);if(v?.set&&v.set.call(u,l),!f){if(i&&typeof h=="string"){var y=s.get("length"),g=Number(h);Number.isInteger(g)&&g>=y.v&&Y(y,g+1)}ds(n)}return!0},ownKeys(a){w(n);var h=Reflect.ownKeys(a).filter(c=>{var f=s.get(c);return f===void 0||f.v!==q});for(var[l,u]of s)u.v!==q&&!(l in a)&&h.push(l);return h},setPrototypeOf(){Hr()}})}var Di,an,hn,ln;function no(){if(Di===void 0){Di=window,an=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,s=Text.prototype;hn=ee(t,"firstChild").get,ln=ee(t,"nextSibling").get,Ci(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ci(s)&&(s.__t=void 0)}}function as(e=""){return document.createTextNode(e)}function Mt(e){return hn.call(e)}function hs(e){return ln.call(e)}function at(e,t){return Mt(e)}function Ni(e,t){{var s=Mt(e);return s instanceof Comment&&s.data===""?hs(s):s}}function Xe(e,t=1,s=!1){let i=e;for(;t--;)i=hs(i);return i}function ro(e){e.textContent=""}function un(){return!1}function cn(e){L===null&&C===null&&Ar(),C!==null&&(C.f&st)!==0&&L===null&&Cr(),Vt&&Tr()}function oo(e,t){var s=t.last;s===null?t.last=t.first=e:(s.next=e,e.prev=s,t.last=e)}function gt(e,t,s,i=!0){var n=L;n!==null&&(n.f&ct)!==0&&(e|=ct);var r={ctx:I,deps:null,nodes_start:null,nodes_end:null,f:e|it,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(s)try{ie(r),r.f|=$s}catch(h){throw yt(r),h}else t!==null&&Ct(r);var o=s&&r.deps===null&&r.first===null&&r.nodes_start===null&&r.teardown===null&&(r.f&Ws)===0;if(!o&&i&&(n!==null&&oo(r,n),C!==null&&(C.f&rt)!==0)){var a=C;(a.effects??=[]).push(r)}return r}function ao(e){const t=gt(rs,null,!1);return B(t,j),t.teardown=e,t}function Ls(e){cn();var t=L.f,s=!C&&(t&xt)!==0&&(t&$s)===0;if(s){var i=I;(i.e??=[]).push(e)}else return fn(e)}function fn(e){return gt(Vs|Qs,e,!1)}function ho(e){return cn(),gt(rs|Qs,e,!0)}function lo(e){os.ensure();const t=gt(oe,e,!0);return(s={})=>new Promise(i=>{s.outro?oi(t,()=>{yt(t),i(void 0)}):(yt(t),i(void 0))})}function uo(e){return gt(Vs,e,!1)}function Be(e,t){var s=I,i={effect:null,ran:!1,deps:e};s.l.$.push(i),i.effect=ri(()=>{e(),!i.ran&&(i.ran=!0,z(t))})}function co(){var e=I;ri(()=>{for(var t of e.l.$){t.deps();var s=t.effect;(s.f&j)!==0&&B(s,Nt),De(s)&&ie(s),t.ran=!1}})}function fo(e){return gt(Js|Ws,e,!0)}function ri(e,t=0){return gt(rs|t,e,!0)}function xe(e,t=[],s=[]){eo(t,s,i=>{gt(rs,()=>e(...i.map(w)),!0)})}function dn(e,t=0){var s=gt(Ae|t,e,!0);return s}function Se(e,t=!0){return gt(xt,e,!0,t)}function mn(e){var t=e.teardown;if(t!==null){const s=Vt,i=C;Pi(!0),pt(null);try{t.call(null)}finally{Pi(s),pt(i)}}}function pn(e,t=!1){var s=e.first;for(e.first=e.last=null;s!==null;){s.ac?.abort(Ks);var i=s.next;(s.f&oe)!==0?s.parent=null:yt(s,t),s=i}}function mo(e){for(var t=e.first;t!==null;){var s=t.next;(t.f&xt)===0&&yt(t),t=s}}function yt(e,t=!0){var s=!1;(t||(e.f&br)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(po(e.nodes_start,e.nodes_end),s=!0),pn(e,t&&!s),Je(e,0),B(e,Yt);var i=e.transitions;if(i!==null)for(const r of i)r.stop();mn(e);var n=e.parent;n!==null&&n.first!==null&&gn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function po(e,t){for(;e!==null;){var s=e===t?null:hs(e);e.remove(),e=s}}function gn(e){var t=e.parent,s=e.prev,i=e.next;s!==null&&(s.next=i),i!==null&&(i.prev=s),t!==null&&(t.first===e&&(t.first=i),t.last===e&&(t.last=s))}function oi(e,t){var s=[];ai(e,s,!0),vn(s,()=>{yt(e),t&&t()})}function vn(e,t){var s=e.length;if(s>0){var i=()=>--s||t();for(var n of e)n.out(i)}else t()}function ai(e,t,s){if((e.f&ct)===0){if(e.f^=ct,e.transitions!==null)for(const o of e.transitions)(o.is_global||s)&&t.push(o);for(var i=e.first;i!==null;){var n=i.next,r=(i.f&Gs)!==0||(i.f&xt)!==0;ai(i,t,r?s:!1),i=n}}}function hi(e){wn(e,!0)}function wn(e,t){if((e.f&ct)!==0){e.f^=ct,(e.f&j)===0&&(B(e,it),Ct(e));for(var s=e.first;s!==null;){var i=s.next,n=(s.f&Gs)!==0||(s.f&xt)!==0;wn(s,n?t:!1),s=i}if(e.transitions!==null)for(const r of e.transitions)(r.is_global||t)&&r.in()}}let se=!1;function Hi(e){se=e}let Vt=!1;function Pi(e){Vt=e}let C=null,mt=!1;function pt(e){C=e}let L=null;function At(e){L=e}let wt=null;function go(e){C!==null&&(wt===null?wt=[e]:wt.push(e))}let $=null,tt=0,ht=null;function vo(e){ht=e}let Qe=1,Ee=0,Bt=Ee;function Ii(e){Bt=e}let Tt=!1;function yn(){return++Qe}function De(e){var t=e.f;if((t&it)!==0)return!0;if((t&Nt)!==0){var s=e.deps,i=(t&st)!==0;if(s!==null){var n,r,o=(t&Ye)!==0,a=i&&L!==null&&!Tt,h=s.length;if((o||a)&&(L===null||(L.f&Yt)===0)){var l=e,u=l.parent;for(n=0;n<h;n++)r=s[n],(o||!r?.reactions?.includes(l))&&(r.reactions??=[]).push(l);o&&(l.f^=Ye),a&&u!==null&&(u.f&st)===0&&(l.f^=st)}for(n=0;n<h;n++)if(r=s[n],De(r)&&nn(r),r.wv>e.wv)return!0}(!i||L!==null&&!Tt)&&B(e,j)}return!1}function _n(e,t,s=!0){var i=e.reactions;if(i!==null&&!wt?.includes(e))for(var n=0;n<i.length;n++){var r=i[n];(r.f&rt)!==0?_n(r,t,!1):t===r&&(s?B(r,it):(r.f&j)!==0&&B(r,Nt),Ct(r))}}function xn(e){var t=$,s=tt,i=ht,n=C,r=Tt,o=wt,a=I,h=mt,l=Bt,u=e.f;$=null,tt=0,ht=null,Tt=(u&st)!==0&&(mt||!se||C===null),C=(u&(xt|oe))===0?e:null,wt=null,Ve(e.ctx),mt=!1,Bt=++Ee,e.ac!==null&&(e.ac.abort(Ks),e.ac=null);try{e.f|=Ms;var c=(0,e.fn)(),f=e.deps;if($!==null){var d;if(Je(e,tt),f!==null&&tt>0)for(f.length=tt+$.length,d=0;d<$.length;d++)f[tt+d]=$[d];else e.deps=f=$;if(!Tt||(u&rt)!==0&&e.reactions!==null)for(d=tt;d<f.length;d++)(f[d].reactions??=[]).push(e)}else f!==null&&tt<f.length&&(Je(e,tt),f.length=tt);if(Oe()&&ht!==null&&!mt&&f!==null&&(e.f&(rt|Nt|it))===0)for(d=0;d<ht.length;d++)_n(ht[d],e);return n!==null&&n!==e&&(Ee++,ht!==null&&(i===null?i=ht:i.push(...ht))),(e.f&zt)!==0&&(e.f^=zt),c}catch(m){return Qr(m)}finally{e.f^=Ms,$=t,tt=s,ht=i,C=n,Tt=r,wt=o,Ve(a),mt=h,Bt=l}}function wo(e,t){let s=t.reactions;if(s!==null){var i=vr.call(s,e);if(i!==-1){var n=s.length-1;n===0?s=t.reactions=null:(s[i]=s[n],s.pop())}}s===null&&(t.f&rt)!==0&&($===null||!$.includes(t))&&(B(t,Nt),(t.f&(st|Ye))===0&&(t.f^=Ye),sn(t),Je(t,0))}function Je(e,t){var s=e.deps;if(s!==null)for(var i=t;i<s.length;i++)wo(e,s[i])}function ie(e){var t=e.f;if((t&Yt)===0){B(e,j);var s=L,i=se;L=e,se=!0;try{(t&Ae)!==0?mo(e):pn(e),mn(e);var n=xn(e);e.teardown=typeof n=="function"?n:null,e.wv=Qe;var r;Ti&&$r&&(e.f&it)!==0&&e.deps}finally{se=i,L=s}}}function w(e){var t=e.f,s=(t&rt)!==0;if(C!==null&&!mt){var i=L!==null&&(L.f&Yt)!==0;if(!i&&!wt?.includes(e)){var n=C.deps;if((C.f&Ms)!==0)e.rv<Ee&&(e.rv=Ee,$===null&&n!==null&&n[tt]===e?tt++:$===null?$=[e]:(!Tt||!$.includes(e))&&$.push(e));else{(C.deps??=[]).push(e);var r=e.reactions;r===null?e.reactions=[C]:r.includes(C)||r.push(C)}}}else if(s&&e.deps===null&&e.effects===null){var o=e,a=o.parent;a!==null&&(a.f&st)===0&&(o.f^=st)}if(Vt){if(Ft.has(e))return Ft.get(e);if(s){o=e;var h=o.v;return((o.f&j)!==0||bn(o))&&(h=ni(o)),Ft.set(o,h),h}}else if(s){if(o=e,ne?.has(o))return ne.get(o);De(o)&&nn(o)}if((e.f&zt)!==0)throw e.v;return e.v}function bn(e){if(e.v===q)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Ft.has(t)||(t.f&rt)!==0&&bn(t))return!0;return!1}function z(e){var t=mt;try{return mt=!0,e()}finally{mt=t}}const yo=-7169;function B(e,t){e.f=e.f&yo|t}function V(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(jt in e)Ts(e);else if(!Array.isArray(e))for(let t in e){const s=e[t];typeof s=="object"&&s&&jt in s&&Ts(s)}}}function Ts(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let i in e)try{Ts(e[i],t)}catch{}const s=Ys(e);if(s!==Object.prototype&&s!==Array.prototype&&s!==Map.prototype&&s!==Set.prototype&&s!==Date.prototype){const i=Qi(s);for(let n in i){const r=i[n].get;if(r)try{r.call(e)}catch{}}}}}const _o=["touchstart","touchmove"];function xo(e){return _o.includes(e)}function bo(e){var t=C,s=L;pt(null),At(null);try{return e()}finally{pt(t),At(s)}}const So=new Set,Ri=new Set;function Eo(e,t,s,i={}){function n(r){if(i.capture||ye.call(t,r),!r.cancelBubble)return bo(()=>s?.call(this,r))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?en(()=>{t.addEventListener(e,n,i)}):t.addEventListener(e,n,i),n}function ms(e,t,s,i,n){var r={capture:i,passive:n},o=Eo(e,t,s,r);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&ao(()=>{t.removeEventListener(e,o,r)})}function ye(e){var t=this,s=t.ownerDocument,i=e.type,n=e.composedPath?.()||[],r=n[0]||e.target,o=0,a=e.__root;if(a){var h=n.indexOf(a);if(h!==-1&&(t===document||t===window)){e.__root=t;return}var l=n.indexOf(t);if(l===-1)return;h<=l&&(o=h)}if(r=n[o]||e.target,r!==t){Ss(e,"currentTarget",{configurable:!0,get(){return r||s}});var u=C,c=L;pt(null),At(null);try{for(var f,d=[];r!==null;){var m=r.assignedSlot||r.parentNode||r.host||null;try{var p=r["__"+i];if(p!=null&&(!r.disabled||e.target===r))if(Us(p)){var[v,...y]=p;v.apply(r,[e,...y])}else p.call(r,e)}catch(g){f?d.push(g):f=g}if(e.cancelBubble||m===t||m===null)break;r=m}if(f){for(let g of d)queueMicrotask(()=>{throw g});throw f}}finally{e.__root=t,delete e.currentTarget,pt(u),At(c)}}}function Sn(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Ke(e,t){var s=L;s.nodes_start===null&&(s.nodes_start=e,s.nodes_end=t)}function En(e,t){var s=(t&Ur)!==0,i,n=!e.startsWith("<!>");return()=>{i===void 0&&(i=Sn(n?e:"<!>"+e),i=Mt(i));var r=s||an?document.importNode(i,!0):i.cloneNode(!0);return Ke(r,r),r}}function Mo(e,t,s="svg"){var i=!e.startsWith("<!>"),n=(t&qr)!==0,r=`<${s}>${i?e:"<!>"+e}</${s}>`,o;return()=>{if(!o){var a=Sn(r),h=Mt(a);if(n)for(o=document.createDocumentFragment();Mt(h);)o.appendChild(Mt(h));else o=Mt(h)}var l=o.cloneNode(!0);if(n){var u=Mt(l),c=l.lastChild;Ke(u,c)}else Ke(l,l);return l}}function li(e,t){return Mo(e,t,"svg")}function ko(){var e=document.createDocumentFragment(),t=document.createComment(""),s=as();return e.append(t,s),Ke(t,s),e}function Kt(e,t){e!==null&&e.before(t)}function Lo(e,t){var s=t==null?"":typeof t=="object"?t+"":t;s!==(e.__t??=e.nodeValue)&&(e.__t=s,e.nodeValue=s+"")}function To(e,t){return Co(e,t)}const Gt=new Map;function Co(e,{target:t,anchor:s,props:i={},events:n,context:r,intro:o=!0}){no();var a=new Set,h=c=>{for(var f=0;f<c.length;f++){var d=c[f];if(!a.has(d)){a.add(d);var m=xo(d);t.addEventListener(d,ye,{passive:m});var p=Gt.get(d);p===void 0?(document.addEventListener(d,ye,{passive:m}),Gt.set(d,1)):Gt.set(d,p+1)}}};h(Xs(So)),Ri.add(h);var l=void 0,u=lo(()=>{var c=s??t.appendChild(as());return Se(()=>{if(r){Zs({});var f=I;f.c=r}n&&(i.$$events=n),l=e(c,i)||{},r&&ti()}),()=>{for(var f of a){t.removeEventListener(f,ye);var d=Gt.get(f);--d===0?(document.removeEventListener(f,ye),Gt.delete(f)):Gt.set(f,d)}Ri.delete(h),c!==s&&c.parentNode?.removeChild(c)}});return Ao.set(l,u),l}let Ao=new WeakMap;function zi(e,t,s=!1){var i=e,n=null,r=null,o=q,a=s?Gs:0,h=!1;const l=(d,m=!0)=>{h=!0,f(m,d)};var u=null;function c(){u!==null&&(u.lastChild.remove(),i.before(u),u=null);var d=o?n:r,m=o?r:n;d&&hi(d),m&&oi(m,()=>{o?r=null:n=null})}const f=(d,m)=>{if(o!==(o=d)){var p=un(),v=i;if(p&&(u=document.createDocumentFragment(),u.append(v=as())),o?n??=m&&Se(()=>m(v)):r??=m&&Se(()=>m(v)),p){var y=et,g=o?n:r,x=o?r:n;g&&y.skipped_effects.delete(g),x&&y.skipped_effects.add(x),y.add_callback(c)}else c()}};dn(()=>{h=!1,t(l),h||f(null,null)},a)}function Oo(e,t){return t}function Do(e,t,s){for(var i=e.items,n=[],r=t.length,o=0;o<r;o++)ai(t[o].e,n,!0);var a=r>0&&n.length===0&&s!==null;if(a){var h=s.parentNode;ro(h),h.append(s),i.clear(),dt(e,t[0].prev,t[r-1].next)}vn(n,()=>{for(var l=0;l<r;l++){var u=t[l];a||(i.delete(u.k),dt(e,u.prev,u.next)),yt(u.e,!a)}})}function No(e,t,s,i,n,r=null){var o=e,a={flags:t,items:new Map,first:null},h=null,l=!1,u=new Map,c=ii(()=>{var p=s();return Us(p)?p:p==null?[]:Xs(p)}),f,d;function m(){Ho(d,f,a,u,o,n,t,i,s),r!==null&&(f.length===0?h?hi(h):h=Se(()=>r(o)):h!==null&&oi(h,()=>{h=null}))}dn(()=>{d??=L,f=w(c);var p=f.length;if(!(l&&p===0)){l=p===0;var v,y,g,x;if(un()){var O=new Set,P=et;for(y=0;y<p;y+=1){g=f[y],x=i(g,y);var S=a.items.get(x)??u.get(x);S?Mn(S,g,y):(v=kn(null,a,null,null,g,x,y,n,t,s,!0),u.set(x,v)),O.add(x)}for(const[ut,Q]of a.items)O.has(ut)||P.skipped_effects.add(Q.e);P.add_callback(m)}else m();w(c)}})}function Ho(e,t,s,i,n,r,o,a,h){var l=t.length,u=s.items,c=s.first,f=c,d,m=null,p=[],v=[],y,g,x,O;for(O=0;O<l;O+=1){if(y=t[O],g=a(y,O),x=u.get(g),x===void 0){var P=i.get(g);if(P!==void 0){i.delete(g),u.set(g,P);var S=m?m.next:f;dt(s,m,P),dt(s,P,S),ps(P,S,n),m=P}else{var ut=f?f.e.nodes_start:n;m=kn(ut,s,m,m===null?s.first:m.next,y,g,O,r,o,h)}u.set(g,m),p=[],v=[],f=m.next;continue}if(Mn(x,y,O),(x.e.f&ct)!==0&&hi(x.e),x!==f){if(d!==void 0&&d.has(x)){if(p.length<v.length){var Q=v[0],Z;m=Q.prev;var ce=p[0],fe=p[p.length-1];for(Z=0;Z<p.length;Z+=1)ps(p[Z],Q,n);for(Z=0;Z<v.length;Z+=1)d.delete(v[Z]);dt(s,ce.prev,fe.next),dt(s,m,ce),dt(s,fe,Q),f=Q,m=fe,O-=1,p=[],v=[]}else d.delete(x),ps(x,f,n),dt(s,x.prev,x.next),dt(s,x,m===null?s.first:m.next),dt(s,m,x),m=x;continue}for(p=[],v=[];f!==null&&f.k!==g;)(f.e.f&ct)===0&&(d??=new Set).add(f),v.push(f),f=f.next;if(f===null)continue;x=f}p.push(x),m=x,f=x.next}if(f!==null||d!==void 0){for(var de=d===void 0?[]:Xs(d);f!==null;)(f.e.f&ct)===0&&de.push(f),f=f.next;var me=de.length;if(me>0){var St=null;Do(s,de,St)}}e.first=s.first&&s.first.e,e.last=m&&m.e;for(var pe of i.values())yt(pe.e);i.clear()}function Mn(e,t,s,i){We(e.v,t),e.i=s}function kn(e,t,s,i,n,r,o,a,h,l,u){var c=(h&Ir)!==0,f=(h&zr)===0,d=c?f?Lt(n,!1,!1):be(n):n,m=(h&Rr)===0?o:be(o),p={i:m,v:d,k:r,a:null,e:null,prev:s,next:i};try{if(e===null){var v=document.createDocumentFragment();v.append(e=as())}return p.e=Se(()=>a(e,d,m,l),Yr),p.e.prev=s&&s.e,p.e.next=i&&i.e,s===null?u||(t.first=p):(s.next=p,s.e.next=p.e),i!==null&&(i.prev=p,i.e.prev=p.e),p}finally{}}function ps(e,t,s){for(var i=e.next?e.next.e.nodes_start:s,n=t?t.e.nodes_start:s,r=e.e.nodes_start;r!==null&&r!==i;){var o=hs(r);n.before(r),r=o}}function dt(e,t,s){t===null?e.first=s:(t.next=s,t.e.next=s&&s.e),s!==null&&(s.prev=t,s.e.prev=t&&t.e)}function Ln(e){var t,s,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(s=Ln(e[t]))&&(i&&(i+=" "),i+=s)}else for(s in e)e[s]&&(i&&(i+=" "),i+=s);return i}function Po(){for(var e,t,s=0,i="",n=arguments.length;s<n;s++)(e=arguments[s])&&(t=Ln(e))&&(i&&(i+=" "),i+=t);return i}function Io(e){return typeof e=="object"?Po(e):e??""}function Ro(e,t,s){var i=e==null?"":""+e;return i=i?i+" "+t:t,i===""?null:i}function zo(e,t){return e==null?null:String(e)}function jo(e,t,s,i,n,r){var o=e.__className;if(o!==s||o===void 0){var a=Ro(s,i);a==null?e.removeAttribute("class"):e.setAttribute("class",a),e.__className=s}return r}function Fo(e,t,s,i){var n=e.__style;if(n!==t){var r=zo(t);r==null?e.removeAttribute("style"):e.style.cssText=r,e.__style=t}return i}const Bo=Symbol("is custom element"),qo=Symbol("is html");function X(e,t,s,i){var n=Uo(e);n[t]!==(n[t]=s)&&(t==="loading"&&(e[Er]=s),s==null?e.removeAttribute(t):typeof s!="string"&&Xo(e).includes(t)?e[t]=s:e.setAttribute(t,s))}function Uo(e){return e.__attributes??={[Bo]:e.nodeName.includes("-"),[qo]:e.namespaceURI===Xr}}var ji=new Map;function Xo(e){var t=ji.get(e.nodeName);if(t)return t;ji.set(e.nodeName,t=[]);for(var s,i=e,n=Element.prototype;n!==i;){s=Qi(i);for(var r in s)s[r].set&&t.push(r);i=Ys(i)}return t}function Fi(e,t){return e===t||e?.[jt]===t}function Yo(e={},t,s,i){return uo(()=>{var n,r;return ri(()=>{n=r,r=[],z(()=>{e!==s(...r)&&(t(e,...r),n&&Fi(s(...n),e)&&t(null,...n))})}),()=>{en(()=>{r&&Fi(s(...r),e)&&t(null,...r)})}}),e}function Tn(e=!1){const t=I,s=t.l.u;if(!s)return;let i=()=>V(t.s);if(e){let n=0,r={};const o=si(()=>{let a=!1;const h=t.s;for(const l in h)h[l]!==r[l]&&(r[l]=h[l],a=!0);return a&&n++,n});i=()=>w(o)}s.b.length&&ho(()=>{Bi(t,i),Es(s.b)}),Ls(()=>{const n=z(()=>s.m.map(_r));return()=>{for(const r of n)typeof r=="function"&&r()}}),s.a.length&&Ls(()=>{Bi(t,i),Es(s.a)})}function Bi(e,t){if(e.l.s)for(const s of e.l.s)w(s);t()}let qe=!1;function Vo(e){var t=qe;try{return qe=!1,[e(),qe]}finally{qe=t}}function R(e,t,s,i){var n=!ae||(s&jr)!==0,r=(s&Br)!==0,o=i,a=!0,h=()=>(a&&(a=!1,o=i),o),l;{var u=jt in e||Sr in e;l=ee(e,t)?.set??(u&&t in e?g=>e[t]=g:void 0)}var c,f=!1;[c,f]=Vo(()=>e[t]),c===void 0&&i!==void 0&&(c=h(),l&&(n&&Dr(),l(c)));var d;if(n?d=()=>{var g=e[t];return g===void 0?h():(a=!0,g)}:d=()=>{var g=e[t];return g!==void 0&&(o=void 0),g===void 0?o:g},n&&(s&Fr)===0)return d;if(l){var m=e.$$legacy;return function(g,x){return arguments.length>0?((!n||!x||m||f)&&l(x?d():g),g):d()}}var p=!1,v=ii(()=>(p=!1,d()));w(v);var y=L;return function(g,x){if(arguments.length>0){const O=x?w(v):n&&r?Jt(g):g;return Y(v,O),p=!0,o!==void 0&&(o=O),g}return Vt&&p||(y.f&Yt)!==0?v.v:w(v)}}function $o(e){I===null&&kr(),ae&&I.l!==null?Go(I).m.push(e):Ls(()=>{const t=z(e);if(typeof t=="function")return t})}function Go(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const Wo="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Wo);Gr();const Cs={},Cn=[];function E(e,t){if(Array.isArray(e)){for(const s of e)E(s,t);return}if(typeof e=="object"){for(const s in e)E(s,e[s]);return}An(Object.getOwnPropertyNames(t)),Cs[e]=Object.assign(Cs[e]||{},t)}function J(e){return Cs[e]||{}}function Qo(){return[...new Set(Cn)]}function An(e){Cn.push(...e)}function ui(e,t){let s;const i=e.length,n=[];for(s=0;s<i;s++)n.push(t(e[s]));return n}function Jo(e,t){let s;const i=e.length,n=[];for(s=0;s<i;s++)t(e[s])&&n.push(e[s]);return n}function gs(e){return e%360*Math.PI/180}function Ko(e){return e.replace(/([A-Z])/g,function(t,s){return"-"+s.toLowerCase()})}function On(e){return e.charAt(0).toUpperCase()+e.slice(1)}function he(e,t,s,i){return(t==null||s==null)&&(i=i||e.bbox(),t==null?t=i.width/i.height*s:s==null&&(s=i.height/i.width*t)),{width:t,height:s}}function As(e,t){const s=e.origin;let i=e.ox!=null?e.ox:e.originX!=null?e.originX:"center",n=e.oy!=null?e.oy:e.originY!=null?e.originY:"center";s!=null&&([i,n]=Array.isArray(s)?s:typeof s=="object"?[s.x,s.y]:[s,s]);const r=typeof i=="string",o=typeof n=="string";if(r||o){const{height:a,width:h,x:l,y:u}=t.bbox();r&&(i=i.includes("left")?l:i.includes("right")?l+h:l+h/2),o&&(n=n.includes("top")?u:n.includes("bottom")?u+a:u+a/2)}return[i,n]}const Zo=new Set(["desc","metadata","title"]),Os=e=>Zo.has(e.nodeName),Dn=(e,t,s={})=>{const i={...t};for(const n in i)i[n].valueOf()===s[n]&&delete i[n];Object.keys(i).length?e.node.setAttribute("data-svgjs",JSON.stringify(i)):(e.node.removeAttribute("data-svgjs"),e.node.removeAttribute("svgjs:data"))},ci="http://www.w3.org/2000/svg",ta="http://www.w3.org/1999/xhtml",vs="http://www.w3.org/2000/xmlns/",Ne="http://www.w3.org/1999/xlink",k={window:typeof window>"u"?null:window,document:typeof document>"u"?null:document};function ea(){return k.window}class fi{}const qt={},di="___SYMBOL___ROOT___";function Me(e,t=ci){return k.document.createElementNS(t,e)}function G(e,t=!1){if(e instanceof fi)return e;if(typeof e=="object")return ws(e);if(e==null)return new qt[di];if(typeof e=="string"&&e.charAt(0)!=="<")return ws(k.document.querySelector(e));const s=t?k.document.createElement("div"):Me("svg");return s.innerHTML=e,e=ws(s.firstChild),s.removeChild(s.firstChild),e}function H(e,t){return t&&(t instanceof k.window.Node||t.ownerDocument&&t instanceof t.ownerDocument.defaultView.Node)?t:Me(e)}function lt(e){if(!e)return null;if(e.instance instanceof fi)return e.instance;if(e.nodeName==="#document-fragment")return new qt.Fragment(e);let t=On(e.nodeName||"Dom");return t==="LinearGradient"||t==="RadialGradient"?t="Gradient":qt[t]||(t="Dom"),new qt[t](e)}let ws=lt;function T(e,t=e.name,s=!1){return qt[t]=e,s&&(qt[di]=e),An(Object.getOwnPropertyNames(e.prototype)),e}function sa(e){return qt[e]}let ia=1e3;function Nn(e){return"Svgjs"+On(e)+ia++}function Hn(e){for(let t=e.children.length-1;t>=0;t--)Hn(e.children[t]);return e.id&&(e.id=Nn(e.nodeName)),e}function M(e,t){let s,i;for(e=Array.isArray(e)?e:[e],i=e.length-1;i>=0;i--)for(s in t)e[i].prototype[s]=t[s]}function N(e){return function(...t){const s=t[t.length-1];return s&&s.constructor===Object&&!(s instanceof Array)?e.apply(this,t.slice(0,-1)).attr(s):e.apply(this,t)}}function na(){return this.parent().children()}function ra(){return this.parent().index(this)}function oa(){return this.siblings()[this.position()+1]}function aa(){return this.siblings()[this.position()-1]}function ha(){const e=this.position();return this.parent().add(this.remove(),e+1),this}function la(){const e=this.position();return this.parent().add(this.remove(),e?e-1:0),this}function ua(){return this.parent().add(this.remove()),this}function ca(){return this.parent().add(this.remove(),0),this}function fa(e){e=G(e),e.remove();const t=this.position();return this.parent().add(e,t),this}function da(e){e=G(e),e.remove();const t=this.position();return this.parent().add(e,t+1),this}function ma(e){return e=G(e),e.before(this),this}function pa(e){return e=G(e),e.after(this),this}E("Dom",{siblings:na,position:ra,next:oa,prev:aa,forward:ha,backward:la,front:ua,back:ca,before:fa,after:da,insertBefore:ma,insertAfter:pa});const Pn=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,ga=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,va=/rgb\((\d+),(\d+),(\d+)\)/,wa=/(#[a-z_][a-z0-9\-_]*)/i,ya=/\)\s*,?\s*/,_a=/\s/g,qi=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,Ui=/^rgb\(/,Xi=/^(\s+)?$/,Yi=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,xa=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,bt=/[\s,]+/,mi=/[MLHVCSQTAZ]/i;function ba(){const e=this.attr("class");return e==null?[]:e.trim().split(bt)}function Sa(e){return this.classes().indexOf(e)!==-1}function Ea(e){if(!this.hasClass(e)){const t=this.classes();t.push(e),this.attr("class",t.join(" "))}return this}function Ma(e){return this.hasClass(e)&&this.attr("class",this.classes().filter(function(t){return t!==e}).join(" ")),this}function ka(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e)}E("Dom",{classes:ba,hasClass:Sa,addClass:Ea,removeClass:Ma,toggleClass:ka});function La(e,t){const s={};if(arguments.length===0)return this.node.style.cssText.split(/\s*;\s*/).filter(function(i){return!!i.length}).forEach(function(i){const n=i.split(/\s*:\s*/);s[n[0]]=n[1]}),s;if(arguments.length<2){if(Array.isArray(e)){for(const i of e){const n=i;s[i]=this.node.style.getPropertyValue(n)}return s}if(typeof e=="string")return this.node.style.getPropertyValue(e);if(typeof e=="object")for(const i in e)this.node.style.setProperty(i,e[i]==null||Xi.test(e[i])?"":e[i])}return arguments.length===2&&this.node.style.setProperty(e,t==null||Xi.test(t)?"":t),this}function Ta(){return this.css("display","")}function Ca(){return this.css("display","none")}function Aa(){return this.css("display")!=="none"}E("Dom",{css:La,show:Ta,hide:Ca,visible:Aa});function Oa(e,t,s){if(e==null)return this.data(ui(Jo(this.node.attributes,i=>i.nodeName.indexOf("data-")===0),i=>i.nodeName.slice(5)));if(e instanceof Array){const i={};for(const n of e)i[n]=this.data(n);return i}else if(typeof e=="object")for(t in e)this.data(t,e[t]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+e))}catch{return this.attr("data-"+e)}else this.attr("data-"+e,t===null?null:s===!0||typeof t=="string"||typeof t=="number"?t:JSON.stringify(t));return this}E("Dom",{data:Oa});function Da(e,t){if(typeof arguments[0]=="object")for(const s in e)this.remember(s,e[s]);else{if(arguments.length===1)return this.memory()[e];this.memory()[e]=t}return this}function Na(){if(arguments.length===0)this._memory={};else for(let e=arguments.length-1;e>=0;e--)delete this.memory()[arguments[e]];return this}function Ha(){return this._memory=this._memory||{}}E("Dom",{remember:Da,forget:Na,memory:Ha});function Pa(e){return e.length===4?["#",e.substring(1,2),e.substring(1,2),e.substring(2,3),e.substring(2,3),e.substring(3,4),e.substring(3,4)].join(""):e}function Ia(e){const t=Math.round(e),i=Math.max(0,Math.min(255,t)).toString(16);return i.length===1?"0"+i:i}function Wt(e,t){for(let s=t.length;s--;)if(e[t[s]]==null)return!1;return!0}function Ra(e,t){const s=Wt(e,"rgb")?{_a:e.r,_b:e.g,_c:e.b,_d:0,space:"rgb"}:Wt(e,"xyz")?{_a:e.x,_b:e.y,_c:e.z,_d:0,space:"xyz"}:Wt(e,"hsl")?{_a:e.h,_b:e.s,_c:e.l,_d:0,space:"hsl"}:Wt(e,"lab")?{_a:e.l,_b:e.a,_c:e.b,_d:0,space:"lab"}:Wt(e,"lch")?{_a:e.l,_b:e.c,_c:e.h,_d:0,space:"lch"}:Wt(e,"cmyk")?{_a:e.c,_b:e.m,_c:e.y,_d:e.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return s.space=t||s.space,s}function za(e){return e==="lab"||e==="xyz"||e==="lch"}function ys(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}class D{constructor(...t){this.init(...t)}static isColor(t){return t&&(t instanceof D||this.isRgb(t)||this.test(t))}static isRgb(t){return t&&typeof t.r=="number"&&typeof t.g=="number"&&typeof t.b=="number"}static random(t="vibrant",s){const{random:i,round:n,sin:r,PI:o}=Math;if(t==="vibrant"){const a=24*i()+57,h=38*i()+45,l=360*i();return new D(a,h,l,"lch")}else if(t==="sine"){s=s??i();const a=n(80*r(2*o*s/.5+.01)+150),h=n(50*r(2*o*s/.5+4.6)+200),l=n(100*r(2*o*s/.5+2.3)+150);return new D(a,h,l)}else if(t==="pastel"){const a=8*i()+86,h=17*i()+9,l=360*i();return new D(a,h,l,"lch")}else if(t==="dark"){const a=10+10*i(),h=50*i()+86,l=360*i();return new D(a,h,l,"lch")}else if(t==="rgb"){const a=255*i(),h=255*i(),l=255*i();return new D(a,h,l)}else if(t==="lab"){const a=100*i(),h=256*i()-128,l=256*i()-128;return new D(a,h,l,"lab")}else if(t==="grey"){const a=255*i();return new D(a,a,a)}else throw new Error("Unsupported random color mode")}static test(t){return typeof t=="string"&&(qi.test(t)||Ui.test(t))}cmyk(){const{_a:t,_b:s,_c:i}=this.rgb(),[n,r,o]=[t,s,i].map(f=>f/255),a=Math.min(1-n,1-r,1-o);if(a===1)return new D(0,0,0,1,"cmyk");const h=(1-n-a)/(1-a),l=(1-r-a)/(1-a),u=(1-o-a)/(1-a);return new D(h,l,u,a,"cmyk")}hsl(){const{_a:t,_b:s,_c:i}=this.rgb(),[n,r,o]=[t,s,i].map(p=>p/255),a=Math.max(n,r,o),h=Math.min(n,r,o),l=(a+h)/2,u=a===h,c=a-h,f=u?0:l>.5?c/(2-a-h):c/(a+h),d=u?0:a===n?((r-o)/c+(r<o?6:0))/6:a===r?((o-n)/c+2)/6:a===o?((n-r)/c+4)/6:0;return new D(360*d,100*f,100*l,"hsl")}init(t=0,s=0,i=0,n=0,r="rgb"){if(t=t||0,this.space)for(const c in this.space)delete this[this.space[c]];if(typeof t=="number")r=typeof n=="string"?n:r,n=typeof n=="string"?0:n,Object.assign(this,{_a:t,_b:s,_c:i,_d:n,space:r});else if(t instanceof Array)this.space=s||(typeof t[3]=="string"?t[3]:t[4])||"rgb",Object.assign(this,{_a:t[0],_b:t[1],_c:t[2],_d:t[3]||0});else if(t instanceof Object){const c=Ra(t,s);Object.assign(this,c)}else if(typeof t=="string")if(Ui.test(t)){const c=t.replace(_a,""),[f,d,m]=va.exec(c).slice(1,4).map(p=>parseInt(p));Object.assign(this,{_a:f,_b:d,_c:m,_d:0,space:"rgb"})}else if(qi.test(t)){const c=p=>parseInt(p,16),[,f,d,m]=ga.exec(Pa(t)).map(c);Object.assign(this,{_a:f,_b:d,_c:m,_d:0,space:"rgb"})}else throw Error("Unsupported string format, can't construct Color");const{_a:o,_b:a,_c:h,_d:l}=this,u=this.space==="rgb"?{r:o,g:a,b:h}:this.space==="xyz"?{x:o,y:a,z:h}:this.space==="hsl"?{h:o,s:a,l:h}:this.space==="lab"?{l:o,a,b:h}:this.space==="lch"?{l:o,c:a,h}:this.space==="cmyk"?{c:o,m:a,y:h,k:l}:{};Object.assign(this,u)}lab(){const{x:t,y:s,z:i}=this.xyz(),n=116*s-16,r=500*(t-s),o=200*(s-i);return new D(n,r,o,"lab")}lch(){const{l:t,a:s,b:i}=this.lab(),n=Math.sqrt(s**2+i**2);let r=180*Math.atan2(i,s)/Math.PI;return r<0&&(r*=-1,r=360-r),new D(t,n,r,"lch")}rgb(){if(this.space==="rgb")return this;if(za(this.space)){let{x:t,y:s,z:i}=this;if(this.space==="lab"||this.space==="lch"){let{l:d,a:m,b:p}=this;if(this.space==="lch"){const{c:S,h:ut}=this,Q=Math.PI/180;m=S*Math.cos(Q*ut),p=S*Math.sin(Q*ut)}const v=(d+16)/116,y=m/500+v,g=v-p/200,x=16/116,O=.008856,P=7.787;t=.95047*(y**3>O?y**3:(y-x)/P),s=1*(v**3>O?v**3:(v-x)/P),i=1.08883*(g**3>O?g**3:(g-x)/P)}const n=t*3.2406+s*-1.5372+i*-.4986,r=t*-.9689+s*1.8758+i*.0415,o=t*.0557+s*-.204+i*1.057,a=Math.pow,h=.0031308,l=n>h?1.055*a(n,1/2.4)-.055:12.92*n,u=r>h?1.055*a(r,1/2.4)-.055:12.92*r,c=o>h?1.055*a(o,1/2.4)-.055:12.92*o;return new D(255*l,255*u,255*c)}else if(this.space==="hsl"){let{h:t,s,l:i}=this;if(t/=360,s/=100,i/=100,s===0)return i*=255,new D(i,i,i);const n=i<.5?i*(1+s):i+s-i*s,r=2*i-n,o=255*ys(r,n,t+1/3),a=255*ys(r,n,t),h=255*ys(r,n,t-1/3);return new D(o,a,h)}else if(this.space==="cmyk"){const{c:t,m:s,y:i,k:n}=this,r=255*(1-Math.min(1,t*(1-n)+n)),o=255*(1-Math.min(1,s*(1-n)+n)),a=255*(1-Math.min(1,i*(1-n)+n));return new D(r,o,a)}else return this}toArray(){const{_a:t,_b:s,_c:i,_d:n,space:r}=this;return[t,s,i,n,r]}toHex(){const[t,s,i]=this._clamped().map(Ia);return`#${t}${s}${i}`}toRgb(){const[t,s,i]=this._clamped();return`rgb(${t},${s},${i})`}toString(){return this.toHex()}xyz(){const{_a:t,_b:s,_c:i}=this.rgb(),[n,r,o]=[t,s,i].map(y=>y/255),a=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,h=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,l=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,u=(a*.4124+h*.3576+l*.1805)/.95047,c=(a*.2126+h*.7152+l*.0722)/1,f=(a*.0193+h*.1192+l*.9505)/1.08883,d=u>.008856?Math.pow(u,1/3):7.787*u+16/116,m=c>.008856?Math.pow(c,1/3):7.787*c+16/116,p=f>.008856?Math.pow(f,1/3):7.787*f+16/116;return new D(d,m,p,"xyz")}_clamped(){const{_a:t,_b:s,_c:i}=this.rgb(),{max:n,min:r,round:o}=Math,a=h=>n(0,r(o(h),255));return[t,s,i].map(a)}}let F=class In{constructor(...t){this.init(...t)}clone(){return new In(this)}init(t,s){const i={x:0,y:0},n=Array.isArray(t)?{x:t[0],y:t[1]}:typeof t=="object"?{x:t.x,y:t.y}:{x:t,y:s};return this.x=n.x==null?i.x:n.x,this.y=n.y==null?i.y:n.y,this}toArray(){return[this.x,this.y]}transform(t){return this.clone().transformO(t)}transformO(t){_.isMatrixLike(t)||(t=new _(t));const{x:s,y:i}=this;return this.x=t.a*s+t.c*i+t.e,this.y=t.b*s+t.d*i+t.f,this}};function ja(e,t){return new F(e,t).transformO(this.screenCTM().inverseO())}function Qt(e,t,s){return Math.abs(t-e)<1e-6}class _{constructor(...t){this.init(...t)}static formatTransforms(t){const s=t.flip==="both"||t.flip===!0,i=t.flip&&(s||t.flip==="x")?-1:1,n=t.flip&&(s||t.flip==="y")?-1:1,r=t.skew&&t.skew.length?t.skew[0]:isFinite(t.skew)?t.skew:isFinite(t.skewX)?t.skewX:0,o=t.skew&&t.skew.length?t.skew[1]:isFinite(t.skew)?t.skew:isFinite(t.skewY)?t.skewY:0,a=t.scale&&t.scale.length?t.scale[0]*i:isFinite(t.scale)?t.scale*i:isFinite(t.scaleX)?t.scaleX*i:i,h=t.scale&&t.scale.length?t.scale[1]*n:isFinite(t.scale)?t.scale*n:isFinite(t.scaleY)?t.scaleY*n:n,l=t.shear||0,u=t.rotate||t.theta||0,c=new F(t.origin||t.around||t.ox||t.originX,t.oy||t.originY),f=c.x,d=c.y,m=new F(t.position||t.px||t.positionX||NaN,t.py||t.positionY||NaN),p=m.x,v=m.y,y=new F(t.translate||t.tx||t.translateX,t.ty||t.translateY),g=y.x,x=y.y,O=new F(t.relative||t.rx||t.relativeX,t.ry||t.relativeY),P=O.x,S=O.y;return{scaleX:a,scaleY:h,skewX:r,skewY:o,shear:l,theta:u,rx:P,ry:S,tx:g,ty:x,ox:f,oy:d,px:p,py:v}}static fromArray(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}static isMatrixLike(t){return t.a!=null||t.b!=null||t.c!=null||t.d!=null||t.e!=null||t.f!=null}static matrixMultiply(t,s,i){const n=t.a*s.a+t.c*s.b,r=t.b*s.a+t.d*s.b,o=t.a*s.c+t.c*s.d,a=t.b*s.c+t.d*s.d,h=t.e+t.a*s.e+t.c*s.f,l=t.f+t.b*s.e+t.d*s.f;return i.a=n,i.b=r,i.c=o,i.d=a,i.e=h,i.f=l,i}around(t,s,i){return this.clone().aroundO(t,s,i)}aroundO(t,s,i){const n=t||0,r=s||0;return this.translateO(-n,-r).lmultiplyO(i).translateO(n,r)}clone(){return new _(this)}decompose(t=0,s=0){const i=this.a,n=this.b,r=this.c,o=this.d,a=this.e,h=this.f,l=i*o-n*r,u=l>0?1:-1,c=u*Math.sqrt(i*i+n*n),f=Math.atan2(u*n,u*i),d=180/Math.PI*f,m=Math.cos(f),p=Math.sin(f),v=(i*r+n*o)/l,y=r*c/(v*i-n)||o*c/(v*n+i),g=a-t+t*m*c+s*(v*m*c-p*y),x=h-s+t*p*c+s*(v*p*c+m*y);return{scaleX:c,scaleY:y,shear:v,rotate:d,translateX:g,translateY:x,originX:t,originY:s,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(t){if(t===this)return!0;const s=new _(t);return Qt(this.a,s.a)&&Qt(this.b,s.b)&&Qt(this.c,s.c)&&Qt(this.d,s.d)&&Qt(this.e,s.e)&&Qt(this.f,s.f)}flip(t,s){return this.clone().flipO(t,s)}flipO(t,s){return t==="x"?this.scaleO(-1,1,s,0):t==="y"?this.scaleO(1,-1,0,s):this.scaleO(-1,-1,t,s||t)}init(t){const s=_.fromArray([1,0,0,1,0,0]);return t=t instanceof vt?t.matrixify():typeof t=="string"?_.fromArray(t.split(bt).map(parseFloat)):Array.isArray(t)?_.fromArray(t):typeof t=="object"&&_.isMatrixLike(t)?t:typeof t=="object"?new _().transform(t):arguments.length===6?_.fromArray([].slice.call(arguments)):s,this.a=t.a!=null?t.a:s.a,this.b=t.b!=null?t.b:s.b,this.c=t.c!=null?t.c:s.c,this.d=t.d!=null?t.d:s.d,this.e=t.e!=null?t.e:s.e,this.f=t.f!=null?t.f:s.f,this}inverse(){return this.clone().inverseO()}inverseO(){const t=this.a,s=this.b,i=this.c,n=this.d,r=this.e,o=this.f,a=t*n-s*i;if(!a)throw new Error("Cannot invert "+this);const h=n/a,l=-s/a,u=-i/a,c=t/a,f=-(h*r+u*o),d=-(l*r+c*o);return this.a=h,this.b=l,this.c=u,this.d=c,this.e=f,this.f=d,this}lmultiply(t){return this.clone().lmultiplyO(t)}lmultiplyO(t){const s=this,i=t instanceof _?t:new _(t);return _.matrixMultiply(i,s,this)}multiply(t){return this.clone().multiplyO(t)}multiplyO(t){const s=this,i=t instanceof _?t:new _(t);return _.matrixMultiply(s,i,this)}rotate(t,s,i){return this.clone().rotateO(t,s,i)}rotateO(t,s=0,i=0){t=gs(t);const n=Math.cos(t),r=Math.sin(t),{a:o,b:a,c:h,d:l,e:u,f:c}=this;return this.a=o*n-a*r,this.b=a*n+o*r,this.c=h*n-l*r,this.d=l*n+h*r,this.e=u*n-c*r+i*r-s*n+s,this.f=c*n+u*r-s*r-i*n+i,this}scale(){return this.clone().scaleO(...arguments)}scaleO(t,s=t,i=0,n=0){arguments.length===3&&(n=i,i=s,s=t);const{a:r,b:o,c:a,d:h,e:l,f:u}=this;return this.a=r*t,this.b=o*s,this.c=a*t,this.d=h*s,this.e=l*t-i*t+i,this.f=u*s-n*s+n,this}shear(t,s,i){return this.clone().shearO(t,s,i)}shearO(t,s=0,i=0){const{a:n,b:r,c:o,d:a,e:h,f:l}=this;return this.a=n+r*t,this.c=o+a*t,this.e=h+l*t-i*t,this}skew(){return this.clone().skewO(...arguments)}skewO(t,s=t,i=0,n=0){arguments.length===3&&(n=i,i=s,s=t),t=gs(t),s=gs(s);const r=Math.tan(t),o=Math.tan(s),{a,b:h,c:l,d:u,e:c,f}=this;return this.a=a+h*r,this.b=h+a*o,this.c=l+u*r,this.d=u+l*o,this.e=c+f*r-n*r,this.f=f+c*o-i*o,this}skewX(t,s,i){return this.skew(t,0,s,i)}skewY(t,s,i){return this.skew(0,t,s,i)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(t){if(_.isMatrixLike(t))return new _(t).multiplyO(this);const s=_.formatTransforms(t),i=this,{x:n,y:r}=new F(s.ox,s.oy).transform(i),o=new _().translateO(s.rx,s.ry).lmultiplyO(i).translateO(-n,-r).scaleO(s.scaleX,s.scaleY).skewO(s.skewX,s.skewY).shearO(s.shear).rotateO(s.theta).translateO(n,r);if(isFinite(s.px)||isFinite(s.py)){const a=new F(n,r).transform(o),h=isFinite(s.px)?s.px-a.x:0,l=isFinite(s.py)?s.py-a.y:0;o.translateO(h,l)}return o.translateO(s.tx,s.ty),o}translate(t,s){return this.clone().translateO(t,s)}translateO(t,s){return this.e+=t||0,this.f+=s||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function Fa(){return new _(this.node.getCTM())}function Ba(){try{if(typeof this.isRoot=="function"&&!this.isRoot()){const e=this.rect(1,1),t=e.node.getScreenCTM();return e.remove(),new _(t)}return new _(this.node.getScreenCTM())}catch{return console.warn(`Cannot get CTM from SVG node ${this.node.nodeName}. Is the element rendered?`),new _}}T(_,"Matrix");function kt(){if(!kt.nodes){const e=G().size(2,0);e.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),e.attr("focusable","false"),e.attr("aria-hidden","true");const t=e.path().node;kt.nodes={svg:e,path:t}}if(!kt.nodes.svg.node.parentNode){const e=k.document.body||k.document.documentElement;kt.nodes.svg.addTo(e)}return kt.nodes}function Rn(e){return!e.width&&!e.height&&!e.x&&!e.y}function qa(e){return e===k.document||(k.document.documentElement.contains||function(t){for(;t.parentNode;)t=t.parentNode;return t===k.document}).call(k.document.documentElement,e)}class U{constructor(...t){this.init(...t)}addOffset(){return this.x+=k.window.pageXOffset,this.y+=k.window.pageYOffset,new U(this)}init(t){const s=[0,0,0,0];return t=typeof t=="string"?t.split(bt).map(parseFloat):Array.isArray(t)?t:typeof t=="object"?[t.left!=null?t.left:t.x,t.top!=null?t.top:t.y,t.width,t.height]:arguments.length===4?[].slice.call(arguments):s,this.x=t[0]||0,this.y=t[1]||0,this.width=this.w=t[2]||0,this.height=this.h=t[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return Rn(this)}merge(t){const s=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x+t.width)-s,r=Math.max(this.y+this.height,t.y+t.height)-i;return new U(s,i,n,r)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(t){t instanceof _||(t=new _(t));let s=1/0,i=-1/0,n=1/0,r=-1/0;return[new F(this.x,this.y),new F(this.x2,this.y),new F(this.x,this.y2),new F(this.x2,this.y2)].forEach(function(a){a=a.transform(t),s=Math.min(s,a.x),i=Math.max(i,a.x),n=Math.min(n,a.y),r=Math.max(r,a.y)}),new U(s,n,i-s,r-n)}}function zn(e,t,s){let i;try{if(i=t(e.node),Rn(i)&&!qa(e.node))throw new Error("Element not in the dom")}catch{i=s(e)}return i}function Ua(){const s=zn(this,n=>n.getBBox(),n=>{try{const r=n.clone().addTo(kt().svg).show(),o=r.node.getBBox();return r.remove(),o}catch(r){throw new Error(`Getting bbox of element "${n.node.nodeName}" is not possible: ${r.toString()}`)}});return new U(s)}function Xa(e){const i=zn(this,r=>r.getBoundingClientRect(),r=>{throw new Error(`Getting rbox of element "${r.node.nodeName}" is not possible`)}),n=new U(i);return e?n.transform(e.screenCTM().inverseO()):n.addOffset()}function Ya(e,t){const s=this.bbox();return e>s.x&&t>s.y&&e<s.x+s.width&&t<s.y+s.height}E({viewbox:{viewbox(e,t,s,i){return e==null?new U(this.attr("viewBox")):this.attr("viewBox",new U(e,t,s,i))},zoom(e,t){let{width:s,height:i}=this.attr(["width","height"]);if((!s&&!i||typeof s=="string"||typeof i=="string")&&(s=this.node.clientWidth,i=this.node.clientHeight),!s||!i)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const n=this.viewbox(),r=s/n.width,o=i/n.height,a=Math.min(r,o);if(e==null)return a;let h=a/e;h===1/0&&(h=Number.MAX_SAFE_INTEGER/100),t=t||new F(s/2/r+n.x,i/2/o+n.y);const l=new U(n).transform(new _({scale:h,origin:t}));return this.viewbox(l)}}});T(U,"Box");class Ut extends Array{constructor(t=[],...s){if(super(t,...s),typeof t=="number")return this;this.length=0,this.push(...t)}}M([Ut],{each(e,...t){return typeof e=="function"?this.map((s,i,n)=>e.call(s,s,i,n)):this.map(s=>s[e](...t))},toArray(){return Array.prototype.concat.apply([],this)}});const Va=["toArray","constructor","each"];Ut.extend=function(e){e=e.reduce((t,s)=>(Va.includes(s)||s[0]==="_"||(s in Array.prototype&&(t["$"+s]=Array.prototype[s]),t[s]=function(...i){return this.each(s,...i)}),t),{}),M([Ut],e)};function le(e,t){return new Ut(ui((t||k.document).querySelectorAll(e),function(s){return lt(s)}))}function $a(e){return le(e,this.node)}function Ga(e){return lt(this.node.querySelector(e))}let Wa=0;const jn={};function Fn(e){let t=e.getEventHolder();return t===k.window&&(t=jn),t.events||(t.events={}),t.events}function pi(e){return e.getEventTarget()}function Qa(e){let t=e.getEventHolder();t===k.window&&(t=jn),t.events&&(t.events={})}function Ds(e,t,s,i,n){const r=s.bind(i||e),o=G(e),a=Fn(o),h=pi(o);t=Array.isArray(t)?t:t.split(bt),s._svgjsListenerId||(s._svgjsListenerId=++Wa),t.forEach(function(l){const u=l.split(".")[0],c=l.split(".")[1]||"*";a[u]=a[u]||{},a[u][c]=a[u][c]||{},a[u][c][s._svgjsListenerId]=r,h.addEventListener(u,r,n||!1)})}function Zt(e,t,s,i){const n=G(e),r=Fn(n),o=pi(n);typeof s=="function"&&(s=s._svgjsListenerId,!s)||(t=Array.isArray(t)?t:(t||"").split(bt),t.forEach(function(a){const h=a&&a.split(".")[0],l=a&&a.split(".")[1];let u,c;if(s)r[h]&&r[h][l||"*"]&&(o.removeEventListener(h,r[h][l||"*"][s],i||!1),delete r[h][l||"*"][s]);else if(h&&l){if(r[h]&&r[h][l]){for(c in r[h][l])Zt(o,[h,l].join("."),c);delete r[h][l]}}else if(l)for(a in r)for(u in r[a])l===u&&Zt(o,[a,l].join("."));else if(h){if(r[h]){for(u in r[h])Zt(o,[h,u].join("."));delete r[h]}}else{for(a in r)Zt(o,a);Qa(n)}}))}function Ja(e,t,s,i){const n=pi(e);return t instanceof k.window.Event||(t=new k.window.CustomEvent(t,{detail:s,cancelable:!0,...i})),n.dispatchEvent(t),t}let He=class extends fi{addEventListener(){}dispatch(t,s,i){return Ja(this,t,s,i)}dispatchEvent(t){const s=this.getEventHolder().events;if(!s)return!0;const i=s[t.type];for(const n in i)for(const r in i[n])i[n][r](t);return!t.defaultPrevented}fire(t,s,i){return this.dispatch(t,s,i),this}getEventHolder(){return this}getEventTarget(){return this}off(t,s,i){return Zt(this,t,s,i),this}on(t,s,i,n){return Ds(this,t,s,i,n),this}removeEventListener(){}};T(He,"EventTarget");function Vi(){}const _e={duration:400,ease:">",delay:0},Ka={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class re extends Array{constructor(...t){super(...t),this.init(...t)}clone(){return new this.constructor(this)}init(t){return typeof t=="number"?this:(this.length=0,this.push(...this.parse(t)),this)}parse(t=[]){return t instanceof Array?t:t.trim().split(bt).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const t=[];return t.push(...this),t}}class b{constructor(...t){this.init(...t)}convert(t){return new b(this.value,t)}divide(t){return t=new b(t),new b(this/t,this.unit||t.unit)}init(t,s){return s=Array.isArray(t)?t[1]:s,t=Array.isArray(t)?t[0]:t,this.value=0,this.unit=s||"",typeof t=="number"?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:typeof t=="string"?(s=t.match(Pn),s&&(this.value=parseFloat(s[1]),s[5]==="%"?this.value/=100:s[5]==="s"&&(this.value*=1e3),this.unit=s[5])):t instanceof b&&(this.value=t.valueOf(),this.unit=t.unit),this}minus(t){return t=new b(t),new b(this-t,this.unit||t.unit)}plus(t){return t=new b(t),new b(this+t,this.unit||t.unit)}times(t){return t=new b(t),new b(this*t,this.unit||t.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return(this.unit==="%"?~~(this.value*1e8)/1e6:this.unit==="s"?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const Za=new Set(["fill","stroke","color","bgcolor","stop-color","flood-color","lighting-color"]),Bn=[];function th(e){Bn.push(e)}function eh(e,t,s){if(e==null){e={},t=this.node.attributes;for(const i of t)e[i.nodeName]=Yi.test(i.nodeValue)?parseFloat(i.nodeValue):i.nodeValue;return e}else{if(e instanceof Array)return e.reduce((i,n)=>(i[n]=this.attr(n),i),{});if(typeof e=="object"&&e.constructor===Object)for(t in e)this.attr(t,e[t]);else if(t===null)this.node.removeAttribute(e);else{if(t==null)return t=this.node.getAttribute(e),t==null?Ka[e]:Yi.test(t)?parseFloat(t):t;t=Bn.reduce((i,n)=>n(e,i,this),t),typeof t=="number"?t=new b(t):Za.has(e)&&D.isColor(t)?t=new D(t):t.constructor===Array&&(t=new re(t)),e==="leading"?this.leading&&this.leading(t):typeof s=="string"?this.node.setAttributeNS(s,e,t.toString()):this.node.setAttribute(e,t.toString()),this.rebuild&&(e==="font-size"||e==="x")&&this.rebuild()}}return this}class Ot extends He{constructor(t,s){super(),this.node=t,this.type=t.nodeName,s&&t!==s&&this.attr(s)}add(t,s){return t=G(t),t.removeNamespace&&this.node instanceof k.window.SVGElement&&t.removeNamespace(),s==null?this.node.appendChild(t.node):t.node!==this.node.childNodes[s]&&this.node.insertBefore(t.node,this.node.childNodes[s]),this}addTo(t,s){return G(t).put(this,s)}children(){return new Ut(ui(this.node.children,function(t){return lt(t)}))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(t=!0,s=!0){this.writeDataToDom();let i=this.node.cloneNode(t);return s&&(i=Hn(i)),new this.constructor(i)}each(t,s){const i=this.children();let n,r;for(n=0,r=i.length;n<r;n++)t.apply(i[n],[n,i]),s&&i[n].each(t,s);return this}element(t,s){return this.put(new Ot(Me(t),s))}first(){return lt(this.node.firstChild)}get(t){return lt(this.node.childNodes[t])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(t){return this.index(t)>=0}html(t,s){return this.xml(t,s,ta)}id(t){return typeof t>"u"&&!this.node.id&&(this.node.id=Nn(this.type)),this.attr("id",t)}index(t){return[].slice.call(this.node.childNodes).indexOf(t.node)}last(){return lt(this.node.lastChild)}matches(t){const s=this.node,i=s.matches||s.matchesSelector||s.msMatchesSelector||s.mozMatchesSelector||s.webkitMatchesSelector||s.oMatchesSelector||null;return i&&i.call(s,t)}parent(t){let s=this;if(!s.node.parentNode)return null;if(s=lt(s.node.parentNode),!t)return s;do if(typeof t=="string"?s.matches(t):s instanceof t)return s;while(s=lt(s.node.parentNode));return s}put(t,s){return t=G(t),this.add(t,s),t}putIn(t,s){return G(t).add(this,s)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(t){return this.node.removeChild(t.node),this}replace(t){return t=G(t),this.node.parentNode&&this.node.parentNode.replaceChild(t.node,this.node),t}round(t=2,s=null){const i=10**t,n=this.attr(s);for(const r in n)typeof n[r]=="number"&&(n[r]=Math.round(n[r]*i)/i);return this.attr(n),this}svg(t,s){return this.xml(t,s,ci)}toString(){return this.id()}words(t){return this.node.textContent=t,this}wrap(t){const s=this.parent();if(!s)return this.addTo(t);const i=s.index(this);return s.put(t,i).put(this)}writeDataToDom(){return this.each(function(){this.writeDataToDom()}),this}xml(t,s,i){if(typeof t=="boolean"&&(i=s,s=t,t=null),t==null||typeof t=="function"){s=s??!0,this.writeDataToDom();let a=this;if(t!=null){if(a=lt(a.node.cloneNode(!0)),s){const h=t(a);if(a=h||a,h===!1)return""}a.each(function(){const h=t(this),l=h||this;h===!1?this.remove():h&&this!==l&&this.replace(l)},!0)}return s?a.node.outerHTML:a.node.innerHTML}s=s??!1;const n=Me("wrapper",i),r=k.document.createDocumentFragment();n.innerHTML=t;for(let a=n.children.length;a--;)r.appendChild(n.firstElementChild);const o=this.parent();return s?this.replace(r)&&o:this.add(r)}}M(Ot,{attr:eh,find:$a,findOne:Ga});T(Ot,"Dom");let vt=class extends Ot{constructor(t,s){super(t,s),this.dom={},this.node.instance=this,(t.hasAttribute("data-svgjs")||t.hasAttribute("svgjs:data"))&&this.setData(JSON.parse(t.getAttribute("data-svgjs"))??JSON.parse(t.getAttribute("svgjs:data"))??{})}center(t,s){return this.cx(t).cy(s)}cx(t){return t==null?this.x()+this.width()/2:this.x(t-this.width()/2)}cy(t){return t==null?this.y()+this.height()/2:this.y(t-this.height()/2)}defs(){const t=this.root();return t&&t.defs()}dmove(t,s){return this.dx(t).dy(s)}dx(t=0){return this.x(new b(t).plus(this.x()))}dy(t=0){return this.y(new b(t).plus(this.y()))}getEventHolder(){return this}height(t){return this.attr("height",t)}move(t,s){return this.x(t).y(s)}parents(t=this.root()){const s=typeof t=="string";s||(t=G(t));const i=new Ut;let n=this;for(;(n=n.parent())&&n.node!==k.document&&n.nodeName!=="#document-fragment"&&(i.push(n),!(!s&&n.node===t.node||s&&n.matches(t)));)if(n.node===this.root().node)return null;return i}reference(t){if(t=this.attr(t),!t)return null;const s=(t+"").match(wa);return s?G(s[1]):null}root(){const t=this.parent(sa(di));return t&&t.root()}setData(t){return this.dom=t,this}size(t,s){const i=he(this,t,s);return this.width(new b(i.width)).height(new b(i.height))}width(t){return this.attr("width",t)}writeDataToDom(){return Dn(this,this.dom),super.writeDataToDom()}x(t){return this.attr("x",t)}y(t){return this.attr("y",t)}};M(vt,{bbox:Ua,rbox:Xa,inside:Ya,point:ja,ctm:Fa,screenCTM:Ba});T(vt,"Element");const ve={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(e,t){return t==="color"?e:e+"-"+t}};["fill","stroke"].forEach(function(e){const t={};let s;t[e]=function(i){if(typeof i>"u")return this.attr(e);if(typeof i=="string"||i instanceof D||D.isRgb(i)||i instanceof vt)this.attr(e,i);else for(s=ve[e].length-1;s>=0;s--)i[ve[e][s]]!=null&&this.attr(ve.prefix(e,ve[e][s]),i[ve[e][s]]);return this},E(["Element","Runner"],t)});E(["Element","Runner"],{matrix:function(e,t,s,i,n,r){return e==null?new _(this):this.attr("transform",new _(e,t,s,i,n,r))},rotate:function(e,t,s){return this.transform({rotate:e,ox:t,oy:s},!0)},skew:function(e,t,s,i){return arguments.length===1||arguments.length===3?this.transform({skew:e,ox:t,oy:s},!0):this.transform({skew:[e,t],ox:s,oy:i},!0)},shear:function(e,t,s){return this.transform({shear:e,ox:t,oy:s},!0)},scale:function(e,t,s,i){return arguments.length===1||arguments.length===3?this.transform({scale:e,ox:t,oy:s},!0):this.transform({scale:[e,t],ox:s,oy:i},!0)},translate:function(e,t){return this.transform({translate:[e,t]},!0)},relative:function(e,t){return this.transform({relative:[e,t]},!0)},flip:function(e="both",t="center"){return"xybothtrue".indexOf(e)===-1&&(t=e,e="both"),this.transform({flip:e,origin:t},!0)},opacity:function(e){return this.attr("opacity",e)}});E("radius",{radius:function(e,t=e){return(this._element||this).type==="radialGradient"?this.attr("r",new b(e)):this.rx(e).ry(t)}});E("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(e){return new F(this.node.getPointAtLength(e))}});E(["Element","Runner"],{font:function(e,t){if(typeof e=="object"){for(t in e)this.font(t,e[t]);return this}return e==="leading"?this.leading(t):e==="anchor"?this.attr("text-anchor",t):e==="size"||e==="family"||e==="weight"||e==="stretch"||e==="variant"||e==="style"?this.attr("font-"+e,t):this.attr(e,t)}});const sh=["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel","contextmenu","wheel","pointerdown","pointermove","pointerup","pointerleave","pointercancel"].reduce(function(e,t){const s=function(i){return i===null?this.off(t):this.on(t,i),this};return e[t]=s,e},{});E("Element",sh);function ih(){return this.attr("transform",null)}function nh(){return(this.attr("transform")||"").split(ya).slice(0,-1).map(function(t){const s=t.trim().split("(");return[s[0],s[1].split(bt).map(function(i){return parseFloat(i)})]}).reverse().reduce(function(t,s){return s[0]==="matrix"?t.lmultiply(_.fromArray(s[1])):t[s[0]].apply(t,s[1])},new _)}function rh(e,t){if(this===e)return this;if(Os(this.node))return this.addTo(e,t);const s=this.screenCTM(),i=e.screenCTM().inverse();return this.addTo(e,t).untransform().transform(i.multiply(s)),this}function oh(e){return this.toParent(this.root(),e)}function ah(e,t){if(e==null||typeof e=="string"){const n=new _(this).decompose();return e==null?n:n[e]}_.isMatrixLike(e)||(e={...e,origin:As(e,this)});const s=t===!0?this:t||!1,i=new _(s).transform(e);return this.attr("transform",i)}E("Element",{untransform:ih,matrixify:nh,toParent:rh,toRoot:oh,transform:ah});class K extends vt{flatten(){return this.each(function(){if(this instanceof K)return this.flatten().ungroup()}),this}ungroup(t=this.parent(),s=t.index(this)){return s=s===-1?t.children().length:s,this.each(function(i,n){return n[n.length-i-1].toParent(t,s)}),this.remove()}}T(K,"Container");class gi extends K{constructor(t,s=t){super(H("defs",t),s)}flatten(){return this}ungroup(){return this}}T(gi,"Defs");class ot extends vt{}T(ot,"Shape");function vi(e){return this.attr("rx",e)}function wi(e){return this.attr("ry",e)}function qn(e){return e==null?this.cx()-this.rx():this.cx(e+this.rx())}function Un(e){return e==null?this.cy()-this.ry():this.cy(e+this.ry())}function Xn(e){return this.attr("cx",e)}function Yn(e){return this.attr("cy",e)}function Vn(e){return e==null?this.rx()*2:this.rx(new b(e).divide(2))}function $n(e){return e==null?this.ry()*2:this.ry(new b(e).divide(2))}const hh=Object.freeze(Object.defineProperty({__proto__:null,cx:Xn,cy:Yn,height:$n,rx:vi,ry:wi,width:Vn,x:qn,y:Un},Symbol.toStringTag,{value:"Module"}));class ls extends ot{constructor(t,s=t){super(H("ellipse",t),s)}size(t,s){const i=he(this,t,s);return this.rx(new b(i.width).divide(2)).ry(new b(i.height).divide(2))}}M(ls,hh);E("Container",{ellipse:N(function(e=0,t=e){return this.put(new ls).size(e,t).move(0,0)})});T(ls,"Ellipse");class Gn extends Ot{constructor(t=k.document.createDocumentFragment()){super(t)}xml(t,s,i){if(typeof t=="boolean"&&(i=s,s=t,t=null),t==null||typeof t=="function"){const n=new Ot(Me("wrapper",i));return n.add(this.node.cloneNode(!0)),n.xml(!1,i)}return super.xml(t,!1,i)}}T(Gn,"Fragment");function Wn(e,t){return(this._element||this).type==="radialGradient"?this.attr({fx:new b(e),fy:new b(t)}):this.attr({x1:new b(e),y1:new b(t)})}function Qn(e,t){return(this._element||this).type==="radialGradient"?this.attr({cx:new b(e),cy:new b(t)}):this.attr({x2:new b(e),y2:new b(t)})}const lh=Object.freeze(Object.defineProperty({__proto__:null,from:Wn,to:Qn},Symbol.toStringTag,{value:"Module"}));class Pe extends K{constructor(t,s){super(H(t+"Gradient",typeof t=="string"?null:t),s)}attr(t,s,i){return t==="transform"&&(t="gradientTransform"),super.attr(t,s,i)}bbox(){return new U}targets(){return le("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(t){return this.clear(),typeof t=="function"&&t.call(this,this),this}url(){return"url(#"+this.id()+")"}}M(Pe,lh);E({Container:{gradient(...e){return this.defs().gradient(...e)}},Defs:{gradient:N(function(e,t){return this.put(new Pe(e)).update(t)})}});T(Pe,"Gradient");class ke extends K{constructor(t,s=t){super(H("pattern",t),s)}attr(t,s,i){return t==="transform"&&(t="patternTransform"),super.attr(t,s,i)}bbox(){return new U}targets(){return le("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(t){return this.clear(),typeof t=="function"&&t.call(this,this),this}url(){return"url(#"+this.id()+")"}}E({Container:{pattern(...e){return this.defs().pattern(...e)}},Defs:{pattern:N(function(e,t,s){return this.put(new ke).update(s).attr({x:0,y:0,width:e,height:t,patternUnits:"userSpaceOnUse"})})}});T(ke,"Pattern");class us extends ot{constructor(t,s=t){super(H("image",t),s)}load(t,s){if(!t)return this;const i=new k.window.Image;return Ds(i,"load",function(n){const r=this.parent(ke);this.width()===0&&this.height()===0&&this.size(i.width,i.height),r instanceof ke&&r.width()===0&&r.height()===0&&r.size(this.width(),this.height()),typeof s=="function"&&s.call(this,n)},this),Ds(i,"load error",function(){Zt(i)}),this.attr("href",i.src=t,Ne)}}th(function(e,t,s){return(e==="fill"||e==="stroke")&&xa.test(t)&&(t=s.root().defs().image(t)),t instanceof us&&(t=s.root().defs().pattern(0,0,i=>{i.add(t)})),t});E({Container:{image:N(function(e,t){return this.put(new us).size(0,0).load(e,t)})}});T(us,"Image");class Dt extends re{bbox(){let t=-1/0,s=-1/0,i=1/0,n=1/0;return this.forEach(function(r){t=Math.max(r[0],t),s=Math.max(r[1],s),i=Math.min(r[0],i),n=Math.min(r[1],n)}),new U(i,n,t-i,s-n)}move(t,s){const i=this.bbox();if(t-=i.x,s-=i.y,!isNaN(t)&&!isNaN(s))for(let n=this.length-1;n>=0;n--)this[n]=[this[n][0]+t,this[n][1]+s];return this}parse(t=[0,0]){const s=[];t instanceof Array?t=Array.prototype.concat.apply([],t):t=t.trim().split(bt).map(parseFloat),t.length%2!==0&&t.pop();for(let i=0,n=t.length;i<n;i=i+2)s.push([t[i],t[i+1]]);return s}size(t,s){let i;const n=this.bbox();for(i=this.length-1;i>=0;i--)n.width&&(this[i][0]=(this[i][0]-n.x)*t/n.width+n.x),n.height&&(this[i][1]=(this[i][1]-n.y)*s/n.height+n.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const t=[];for(let s=0,i=this.length;s<i;s++)t.push(this[s].join(","));return t.join(" ")}transform(t){return this.clone().transformO(t)}transformO(t){_.isMatrixLike(t)||(t=new _(t));for(let s=this.length;s--;){const[i,n]=this[s];this[s][0]=t.a*i+t.c*n+t.e,this[s][1]=t.b*i+t.d*n+t.f}return this}}const uh=Dt;function ch(e){return e==null?this.bbox().x:this.move(e,this.bbox().y)}function fh(e){return e==null?this.bbox().y:this.move(this.bbox().x,e)}function dh(e){const t=this.bbox();return e==null?t.width:this.size(e,t.height)}function mh(e){const t=this.bbox();return e==null?t.height:this.size(t.width,e)}const yi=Object.freeze(Object.defineProperty({__proto__:null,MorphArray:uh,height:mh,width:dh,x:ch,y:fh},Symbol.toStringTag,{value:"Module"}));class Le extends ot{constructor(t,s=t){super(H("line",t),s)}array(){return new Dt([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(t,s){return this.attr(this.array().move(t,s).toLine())}plot(t,s,i,n){return t==null?this.array():(typeof s<"u"?t={x1:t,y1:s,x2:i,y2:n}:t=new Dt(t).toLine(),this.attr(t))}size(t,s){const i=he(this,t,s);return this.attr(this.array().size(i.width,i.height).toLine())}}M(Le,yi);E({Container:{line:N(function(...e){return Le.prototype.plot.apply(this.put(new Le),e[0]!=null?e:[0,0,0,0])})}});T(Le,"Line");class Ze extends K{constructor(t,s=t){super(H("marker",t),s)}height(t){return this.attr("markerHeight",t)}orient(t){return this.attr("orient",t)}ref(t,s){return this.attr("refX",t).attr("refY",s)}toString(){return"url(#"+this.id()+")"}update(t){return this.clear(),typeof t=="function"&&t.call(this,this),this}width(t){return this.attr("markerWidth",t)}}E({Container:{marker(...e){return this.defs().marker(...e)}},Defs:{marker:N(function(e,t,s){return this.put(new Ze).size(e,t).ref(e/2,t/2).viewbox(0,0,e,t).attr("orient","auto").update(s)})},marker:{marker(e,t,s,i){let n=["marker"];return e!=="all"&&n.push(e),n=n.join("-"),e=arguments[1]instanceof Ze?arguments[1]:this.defs().marker(t,s,i),this.attr(n,e)}}});T(Ze,"Marker");function te(e,t){return function(s){return s==null?this[e]:(this[e]=s,t&&t.call(this),this)}}const ph={"-":function(e){return e},"<>":function(e){return-Math.cos(e*Math.PI)/2+.5},">":function(e){return Math.sin(e*Math.PI/2)},"<":function(e){return-Math.cos(e*Math.PI/2)+1},bezier:function(e,t,s,i){return function(n){return n<0?e>0?t/e*n:s>0?i/s*n:0:n>1?s<1?(1-i)/(1-s)*n+(i-s)/(1-s):e<1?(1-t)/(1-e)*n+(t-e)/(1-e):1:3*n*(1-n)**2*t+3*n**2*(1-n)*i+n**3}},steps:function(e,t="end"){t=t.split("-").reverse()[0];let s=e;return t==="none"?--s:t==="both"&&++s,(i,n=!1)=>{let r=Math.floor(i*e);const o=i*r%1===0;return(t==="start"||t==="both")&&++r,n&&o&&--r,i>=0&&r<0&&(r=0),i<=1&&r>s&&(r=s),r/s}}};class _i{done(){return!1}}class Ns extends _i{constructor(t=_e.ease){super(),this.ease=ph[t]||t}step(t,s,i){return typeof t!="number"?i<1?t:s:t+(s-t)*this.ease(i)}}class ts extends _i{constructor(t){super(),this.stepper=t}done(t){return t.done}step(t,s,i,n){return this.stepper(t,s,i,n)}}function $i(){const e=(this._duration||500)/1e3,t=this._overshoot||0,s=1e-10,i=Math.PI,n=Math.log(t/100+s),r=-n/Math.sqrt(i*i+n*n),o=3.9/(r*e);this.d=2*r*o,this.k=o*o}class gh extends ts{constructor(t=500,s=0){super(),this.duration(t).overshoot(s)}step(t,s,i,n){if(typeof t=="string")return t;if(n.done=i===1/0,i===1/0)return s;if(i===0)return t;i>100&&(i=16),i/=1e3;const r=n.velocity||0,o=-this.d*r-this.k*(t-s),a=t+r*i+o*i*i/2;return n.velocity=r+o*i,n.done=Math.abs(s-a)+Math.abs(r)<.002,n.done?s:a}}M(gh,{duration:te("_duration",$i),overshoot:te("_overshoot",$i)});class vh extends ts{constructor(t=.1,s=.01,i=0,n=1e3){super(),this.p(t).i(s).d(i).windup(n)}step(t,s,i,n){if(typeof t=="string")return t;if(n.done=i===1/0,i===1/0)return s;if(i===0)return t;const r=s-t;let o=(n.integral||0)+r*i;const a=(r-(n.error||0))/i,h=this._windup;return h!==!1&&(o=Math.max(-h,Math.min(o,h))),n.error=r,n.integral=o,n.done=Math.abs(r)<.001,n.done?s:t+(this.P*r+this.I*o+this.D*a)}}M(vh,{windup:te("_windup"),p:te("P"),i:te("I"),d:te("D")});const wh={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},Hs={M:function(e,t,s){return t.x=s.x=e[0],t.y=s.y=e[1],["M",t.x,t.y]},L:function(e,t){return t.x=e[0],t.y=e[1],["L",e[0],e[1]]},H:function(e,t){return t.x=e[0],["H",e[0]]},V:function(e,t){return t.y=e[0],["V",e[0]]},C:function(e,t){return t.x=e[4],t.y=e[5],["C",e[0],e[1],e[2],e[3],e[4],e[5]]},S:function(e,t){return t.x=e[2],t.y=e[3],["S",e[0],e[1],e[2],e[3]]},Q:function(e,t){return t.x=e[2],t.y=e[3],["Q",e[0],e[1],e[2],e[3]]},T:function(e,t){return t.x=e[0],t.y=e[1],["T",e[0],e[1]]},Z:function(e,t,s){return t.x=s.x,t.y=s.y,["Z"]},A:function(e,t){return t.x=e[5],t.y=e[6],["A",e[0],e[1],e[2],e[3],e[4],e[5],e[6]]}},_s="mlhvqtcsaz".split("");for(let e=0,t=_s.length;e<t;++e)Hs[_s[e]]=function(s){return function(i,n,r){if(s==="H")i[0]=i[0]+n.x;else if(s==="V")i[0]=i[0]+n.y;else if(s==="A")i[5]=i[5]+n.x,i[6]=i[6]+n.y;else for(let o=0,a=i.length;o<a;++o)i[o]=i[o]+(o%2?n.y:n.x);return Hs[s](i,n,r)}}(_s[e].toUpperCase());function yh(e){const t=e.segment[0];return Hs[t](e.segment.slice(1),e.p,e.p0)}function Ps(e){return e.segment.length&&e.segment.length-1===wh[e.segment[0].toUpperCase()]}function _h(e,t){e.inNumber&&Pt(e,!1);const s=mi.test(t);if(s)e.segment=[t];else{const i=e.lastCommand,n=i.toLowerCase(),r=i===n;e.segment=[n==="m"?r?"l":"L":i]}return e.inSegment=!0,e.lastCommand=e.segment[0],s}function Pt(e,t){if(!e.inNumber)throw new Error("Parser Error");e.number&&e.segment.push(parseFloat(e.number)),e.inNumber=t,e.number="",e.pointSeen=!1,e.hasExponent=!1,Ps(e)&&Is(e)}function Is(e){e.inSegment=!1,e.absolute&&(e.segment=yh(e)),e.segments.push(e.segment)}function xh(e){if(!e.segment.length)return!1;const t=e.segment[0].toUpperCase()==="A",s=e.segment.length;return t&&(s===4||s===5)}function bh(e){return e.lastToken.toUpperCase()==="E"}const Sh=new Set([" ",",","	",`
`,"\r","\f"]);function Eh(e,t=!0){let s=0,i="";const n={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:t,p0:new F,p:new F};for(;n.lastToken=i,i=e.charAt(s++);)if(!(!n.inSegment&&_h(n,i))){if(i==="."){if(n.pointSeen||n.hasExponent){Pt(n,!1),--s;continue}n.inNumber=!0,n.pointSeen=!0,n.number+=i;continue}if(!isNaN(parseInt(i))){if(n.number==="0"||xh(n)){n.inNumber=!0,n.number=i,Pt(n,!0);continue}n.inNumber=!0,n.number+=i;continue}if(Sh.has(i)){n.inNumber&&Pt(n,!1);continue}if(i==="-"||i==="+"){if(n.inNumber&&!bh(n)){Pt(n,!1),--s;continue}n.number+=i,n.inNumber=!0;continue}if(i.toUpperCase()==="E"){n.number+=i,n.hasExponent=!0;continue}if(mi.test(i)){if(n.inNumber)Pt(n,!1);else if(Ps(n))Is(n);else throw new Error("parser Error");--s}}return n.inNumber&&Pt(n,!1),n.inSegment&&Ps(n)&&Is(n),n.segments}function Mh(e){let t="";for(let s=0,i=e.length;s<i;s++)t+=e[s][0],e[s][1]!=null&&(t+=e[s][1],e[s][2]!=null&&(t+=" ",t+=e[s][2],e[s][3]!=null&&(t+=" ",t+=e[s][3],t+=" ",t+=e[s][4],e[s][5]!=null&&(t+=" ",t+=e[s][5],t+=" ",t+=e[s][6],e[s][7]!=null&&(t+=" ",t+=e[s][7])))));return t+" "}class Xt extends re{bbox(){return kt().path.setAttribute("d",this.toString()),new U(kt.nodes.path.getBBox())}move(t,s){const i=this.bbox();if(t-=i.x,s-=i.y,!isNaN(t)&&!isNaN(s))for(let n,r=this.length-1;r>=0;r--)n=this[r][0],n==="M"||n==="L"||n==="T"?(this[r][1]+=t,this[r][2]+=s):n==="H"?this[r][1]+=t:n==="V"?this[r][1]+=s:n==="C"||n==="S"||n==="Q"?(this[r][1]+=t,this[r][2]+=s,this[r][3]+=t,this[r][4]+=s,n==="C"&&(this[r][5]+=t,this[r][6]+=s)):n==="A"&&(this[r][6]+=t,this[r][7]+=s);return this}parse(t="M0 0"){return Array.isArray(t)&&(t=Array.prototype.concat.apply([],t).toString()),Eh(t)}size(t,s){const i=this.bbox();let n,r;for(i.width=i.width===0?1:i.width,i.height=i.height===0?1:i.height,n=this.length-1;n>=0;n--)r=this[n][0],r==="M"||r==="L"||r==="T"?(this[n][1]=(this[n][1]-i.x)*t/i.width+i.x,this[n][2]=(this[n][2]-i.y)*s/i.height+i.y):r==="H"?this[n][1]=(this[n][1]-i.x)*t/i.width+i.x:r==="V"?this[n][1]=(this[n][1]-i.y)*s/i.height+i.y:r==="C"||r==="S"||r==="Q"?(this[n][1]=(this[n][1]-i.x)*t/i.width+i.x,this[n][2]=(this[n][2]-i.y)*s/i.height+i.y,this[n][3]=(this[n][3]-i.x)*t/i.width+i.x,this[n][4]=(this[n][4]-i.y)*s/i.height+i.y,r==="C"&&(this[n][5]=(this[n][5]-i.x)*t/i.width+i.x,this[n][6]=(this[n][6]-i.y)*s/i.height+i.y)):r==="A"&&(this[n][1]=this[n][1]*t/i.width,this[n][2]=this[n][2]*s/i.height,this[n][6]=(this[n][6]-i.x)*t/i.width+i.x,this[n][7]=(this[n][7]-i.y)*s/i.height+i.y);return this}toString(){return Mh(this)}}const Jn=e=>{const t=typeof e;return t==="number"?b:t==="string"?D.isColor(e)?D:bt.test(e)?mi.test(e)?Xt:re:Pn.test(e)?b:Rs:xi.indexOf(e.constructor)>-1?e.constructor:Array.isArray(e)?re:t==="object"?Te:Rs};class It{constructor(t){this._stepper=t||new Ns("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(t){return this._morphObj.morph(this._from,this._to,t,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce(function(s,i){return s&&i},!0)}from(t){return t==null?this._from:(this._from=this._set(t),this)}stepper(t){return t==null?this._stepper:(this._stepper=t,this)}to(t){return t==null?this._to:(this._to=this._set(t),this)}type(t){return t==null?this._type:(this._type=t,this)}_set(t){this._type||this.type(Jn(t));let s=new this._type(t);return this._type===D&&(s=this._to?s[this._to[4]]():this._from?s[this._from[4]]():s),this._type===Te&&(s=this._to?s.align(this._to):this._from?s.align(this._from):s),s=s.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(s.length)).map(Object).map(function(i){return i.done=!0,i}),s}}class Rs{constructor(...t){this.init(...t)}init(t){return t=Array.isArray(t)?t[0]:t,this.value=t,this}toArray(){return[this.value]}valueOf(){return this.value}}class Ie{constructor(...t){this.init(...t)}init(t){return Array.isArray(t)&&(t={scaleX:t[0],scaleY:t[1],shear:t[2],rotate:t[3],translateX:t[4],translateY:t[5],originX:t[6],originY:t[7]}),Object.assign(this,Ie.defaults,t),this}toArray(){const t=this;return[t.scaleX,t.scaleY,t.shear,t.rotate,t.translateX,t.translateY,t.originX,t.originY]}}Ie.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const kh=(e,t)=>e[0]<t[0]?-1:e[0]>t[0]?1:0;class Te{constructor(...t){this.init(...t)}align(t){const s=this.values;for(let i=0,n=s.length;i<n;++i){if(s[i+1]===t[i+1]){if(s[i+1]===D&&t[i+7]!==s[i+7]){const a=t[i+7],h=new D(this.values.splice(i+3,5))[a]().toArray();this.values.splice(i+3,0,...h)}i+=s[i+2]+2;continue}if(!t[i+1])return this;const r=new t[i+1]().toArray(),o=s[i+2]+3;s.splice(i,o,t[i],t[i+1],t[i+2],...r),i+=s[i+2]+2}return this}init(t){if(this.values=[],Array.isArray(t)){this.values=t.slice();return}t=t||{};const s=[];for(const i in t){const n=Jn(t[i]),r=new n(t[i]).toArray();s.push([i,n,r.length,...r])}return s.sort(kh),this.values=s.reduce((i,n)=>i.concat(n),[]),this}toArray(){return this.values}valueOf(){const t={},s=this.values;for(;s.length;){const i=s.shift(),n=s.shift(),r=s.shift(),o=s.splice(0,r);t[i]=new n(o)}return t}}const xi=[Rs,Ie,Te];function Lh(e=[]){xi.push(...[].concat(e))}function Th(){M(xi,{to(e){return new It().type(this.constructor).from(this.toArray()).to(e)},fromArray(e){return this.init(e),this},toConsumable(){return this.toArray()},morph(e,t,s,i,n){const r=function(o,a){return i.step(o,t[a],s,n[a],n)};return this.fromArray(e.map(r))}})}class ue extends ot{constructor(t,s=t){super(H("path",t),s)}array(){return this._array||(this._array=new Xt(this.attr("d")))}clear(){return delete this._array,this}height(t){return t==null?this.bbox().height:this.size(this.bbox().width,t)}move(t,s){return this.attr("d",this.array().move(t,s))}plot(t){return t==null?this.array():this.clear().attr("d",typeof t=="string"?t:this._array=new Xt(t))}size(t,s){const i=he(this,t,s);return this.attr("d",this.array().size(i.width,i.height))}width(t){return t==null?this.bbox().width:this.size(t,this.bbox().height)}x(t){return t==null?this.bbox().x:this.move(t,this.bbox().y)}y(t){return t==null?this.bbox().y:this.move(this.bbox().x,t)}}ue.prototype.MorphArray=Xt;E({Container:{path:N(function(e){return this.put(new ue).plot(e||new Xt)})}});T(ue,"Path");function Ch(){return this._array||(this._array=new Dt(this.attr("points")))}function Ah(){return delete this._array,this}function Oh(e,t){return this.attr("points",this.array().move(e,t))}function Dh(e){return e==null?this.array():this.clear().attr("points",typeof e=="string"?e:this._array=new Dt(e))}function Nh(e,t){const s=he(this,e,t);return this.attr("points",this.array().size(s.width,s.height))}const Kn=Object.freeze(Object.defineProperty({__proto__:null,array:Ch,clear:Ah,move:Oh,plot:Dh,size:Nh},Symbol.toStringTag,{value:"Module"}));class Re extends ot{constructor(t,s=t){super(H("polygon",t),s)}}E({Container:{polygon:N(function(e){return this.put(new Re).plot(e||new Dt)})}});M(Re,yi);M(Re,Kn);T(Re,"Polygon");class ze extends ot{constructor(t,s=t){super(H("polyline",t),s)}}E({Container:{polyline:N(function(e){return this.put(new ze).plot(e||new Dt)})}});M(ze,yi);M(ze,Kn);T(ze,"Polyline");class cs extends ot{constructor(t,s=t){super(H("rect",t),s)}}M(cs,{rx:vi,ry:wi});E({Container:{rect:N(function(e,t){return this.put(new cs).size(e,t)})}});T(cs,"Rect");class xs{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(t){const s=typeof t.next<"u"?t:{value:t,next:null,prev:null};return this._last?(s.prev=this._last,this._last.next=s,this._last=s):(this._last=s,this._first=s),s}remove(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this._last&&(this._last=t.prev),t===this._first&&(this._first=t.next),t.prev=null,t.next=null}shift(){const t=this._first;return t?(this._first=t.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,t.value):null}}const A={nextDraw:null,frames:new xs,timeouts:new xs,immediates:new xs,timer:()=>k.window.performance||k.window.Date,transforms:[],frame(e){const t=A.frames.push({run:e});return A.nextDraw===null&&(A.nextDraw=k.window.requestAnimationFrame(A._draw)),t},timeout(e,t){t=t||0;const s=A.timer().now()+t,i=A.timeouts.push({run:e,time:s});return A.nextDraw===null&&(A.nextDraw=k.window.requestAnimationFrame(A._draw)),i},immediate(e){const t=A.immediates.push(e);return A.nextDraw===null&&(A.nextDraw=k.window.requestAnimationFrame(A._draw)),t},cancelFrame(e){e!=null&&A.frames.remove(e)},clearTimeout(e){e!=null&&A.timeouts.remove(e)},cancelImmediate(e){e!=null&&A.immediates.remove(e)},_draw(e){let t=null;const s=A.timeouts.last();for(;(t=A.timeouts.shift())&&(e>=t.time?t.run():A.timeouts.push(t),t!==s););let i=null;const n=A.frames.last();for(;i!==n&&(i=A.frames.shift());)i.run(e);let r=null;for(;r=A.immediates.shift();)r();A.nextDraw=A.timeouts.first()||A.frames.first()?k.window.requestAnimationFrame(A._draw):null}},Hh=function(e){const t=e.start,s=e.runner.duration(),i=t+s;return{start:t,duration:s,end:i,runner:e.runner}},Ph=function(){const e=k.window;return(e.performance||e.Date).now()};class Zn extends He{constructor(t=Ph){super(),this._timeSource=t,this.terminate()}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const t=this.getLastRunnerInfo(),s=t?t.runner.duration():0;return(t?t.start:this._time)+s}getEndTimeOfTimeline(){const t=this._runners.map(s=>s.start+s.runner.duration());return Math.max(0,...t)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(t){return this._runners[this._runnerIds.indexOf(t)]||null}pause(){return this._paused=!0,this._continue()}persist(t){return t==null?this._persist:(this._persist=t,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(t){const s=this.speed();if(t==null)return this.speed(-s);const i=Math.abs(s);return this.speed(t?-i:i)}schedule(t,s,i){if(t==null)return this._runners.map(Hh);let n=0;const r=this.getEndTime();if(s=s||0,i==null||i==="last"||i==="after")n=r;else if(i==="absolute"||i==="start")n=s,s=0;else if(i==="now")n=this._time;else if(i==="relative"){const h=this.getRunnerInfoById(t.id);h&&(n=h.start+s,s=0)}else if(i==="with-last"){const h=this.getLastRunnerInfo();n=h?h.start:this._time}else throw new Error('Invalid value for the "when" parameter');t.unschedule(),t.timeline(this);const o=t.persist(),a={persist:o===null?this._persist:o,start:n+s,runner:t};return this._lastRunnerId=t.id,this._runners.push(a),this._runners.sort((h,l)=>h.start-l.start),this._runnerIds=this._runners.map(h=>h.runner.id),this.updateTime()._continue(),this}seek(t){return this.time(this._time+t)}source(t){return t==null?this._timeSource:(this._timeSource=t,this)}speed(t){return t==null?this._speed:(this._speed=t,this)}stop(){return this.time(0),this.pause()}time(t){return t==null?this._time:(this._time=t,this._continue(!0))}unschedule(t){const s=this._runnerIds.indexOf(t.id);return s<0?this:(this._runners.splice(s,1),this._runnerIds.splice(s,1),t.timeline(null),this)}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(t=!1){return A.cancelFrame(this._nextFrame),this._nextFrame=null,t?this._stepImmediate():this._paused?this:(this._nextFrame=A.frame(this._step),this)}_stepFn(t=!1){const s=this._timeSource();let i=s-this._lastSourceTime;t&&(i=0);const n=this._speed*i+(this._time-this._lastStepTime);this._lastSourceTime=s,t||(this._time+=n,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let o=this._runners.length;o--;){const a=this._runners[o],h=a.runner;this._time-a.start<=0&&h.reset()}let r=!1;for(let o=0,a=this._runners.length;o<a;o++){const h=this._runners[o],l=h.runner;let u=n;const c=this._time-h.start;if(c<=0){r=!0;continue}else c<u&&(u=c);if(!l.active())continue;l.step(u).done?h.persist!==!0&&l.duration()-l.time()+this._time+h.persist<this._time&&(l.unschedule(),--o,--a):r=!0}return r&&!(this._speed<0&&this._time===0)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}terminate(){this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}}E({Element:{timeline:function(e){return e==null?(this._timeline=this._timeline||new Zn,this._timeline):(this._timeline=e,this)}}});class nt extends He{constructor(t){super(),this.id=nt.id++,t=t??_e.duration,t=typeof t=="function"?new ts(t):t,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration=typeof t=="number"&&t,this._isDeclarative=t instanceof ts,this._stepper=this._isDeclarative?t:new Ns,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new _,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=this._isDeclarative?!0:null}static sanitise(t,s,i){let n=1,r=!1,o=0;return t=t??_e.duration,s=s??_e.delay,i=i||"last",typeof t=="object"&&!(t instanceof _i)&&(s=t.delay??s,i=t.when??i,r=t.swing||r,n=t.times??n,o=t.wait??o,t=t.duration??_e.duration),{duration:t,delay:s,swing:r,times:n,wait:o,when:i}}active(t){return t==null?this.enabled:(this.enabled=t,this)}addTransform(t){return this.transforms.lmultiplyO(t),this}after(t){return this.on("finished",t)}animate(t,s,i){const n=nt.sanitise(t,s,i),r=new nt(n.duration);return this._timeline&&r.timeline(this._timeline),this._element&&r.element(this._element),r.loop(n).schedule(n.delay,n.when)}clearTransform(){return this.transforms=new _,this}clearTransformsFromQueue(){(!this.done||!this._timeline||!this._timeline._runnerIds.includes(this.id))&&(this._queue=this._queue.filter(t=>!t.isTransform))}delay(t){return this.animate(0,t)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(t){return this.queue(null,t)}ease(t){return this._stepper=new Ns(t),this}element(t){return t==null?this._element:(this._element=t,t._prepareRunner(),this)}finish(){return this.step(1/0)}loop(t,s,i){return typeof t=="object"&&(s=t.swing,i=t.wait,t=t.times),this._times=t||1/0,this._swing=s||!1,this._wait=i||0,this._times===!0&&(this._times=1/0),this}loops(t){const s=this._duration+this._wait;if(t==null){const o=Math.floor(this._time/s),h=(this._time-o*s)/this._duration;return Math.min(o+h,this._times)}const i=Math.floor(t),n=t%1,r=s*i+this._duration*n;return this.time(r)}persist(t){return t==null?this._persist:(this._persist=t,this)}position(t){const s=this._time,i=this._duration,n=this._wait,r=this._times,o=this._swing,a=this._reverse;let h;if(t==null){const f=function(m){const p=o*Math.floor(m%(2*(n+i))/(n+i)),v=p&&!a||!p&&a,y=Math.pow(-1,v)*(m%(n+i))/i+v;return Math.max(Math.min(y,1),0)},d=r*(n+i)-n;return h=s<=0?Math.round(f(1e-5)):s<d?f(s):Math.round(f(d-1e-5)),h}const l=Math.floor(this.loops()),u=o&&l%2===0;return h=l+(u&&!a||a&&u?t:1-t),this.loops(h)}progress(t){return t==null?Math.min(1,this._time/this.duration()):this.time(t*this.duration())}queue(t,s,i,n){return this._queue.push({initialiser:t||Vi,runner:s||Vi,retarget:i,isTransform:n,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted?this:(this.time(0),this._reseted=!0,this)}reverse(t){return this._reverse=t??!this._reverse,this}schedule(t,s,i){if(t instanceof Zn||(i=s,s=t,t=this.timeline()),!t)throw Error("Runner cannot be scheduled without timeline");return t.schedule(this,s,i),this}step(t){if(!this.enabled)return this;t=t??16,this._time+=t;const s=this.position(),i=this._lastPosition!==s&&this._time>=0;this._lastPosition=s;const n=this.duration(),r=this._lastTime<=0&&this._time>0,o=this._lastTime<n&&this._time>=n;this._lastTime=this._time,r&&this.fire("start",this);const a=this._isDeclarative;this.done=!a&&!o&&this._time>=n,this._reseted=!1;let h=!1;return(i||a)&&(this._initialise(i),this.transforms=new _,h=this._run(a?t:s),this.fire("step",this)),this.done=this.done||h&&a,o&&this.fire("finished",this),this}time(t){if(t==null)return this._time;const s=t-this._time;return this.step(s),this}timeline(t){return typeof t>"u"?this._timeline:(this._timeline=t,this)}unschedule(){const t=this.timeline();return t&&t.unschedule(this),this}_initialise(t){if(!(!t&&!this._isDeclarative))for(let s=0,i=this._queue.length;s<i;++s){const n=this._queue[s],r=this._isDeclarative||!n.initialised&&t;t=!n.finished,r&&t&&(n.initialiser.call(this),n.initialised=!0)}}_rememberMorpher(t,s){if(this._history[t]={morpher:s,caller:this._queue[this._queue.length-1]},this._isDeclarative){const i=this.timeline();i&&i.play()}}_run(t){let s=!0;for(let i=0,n=this._queue.length;i<n;++i){const r=this._queue[i],o=r.runner.call(this,t);r.finished=r.finished||o===!0,s=s&&r.finished}return s}_tryRetarget(t,s,i){if(this._history[t]){if(!this._history[t].caller.initialised){const r=this._queue.indexOf(this._history[t].caller);return this._queue.splice(r,1),!1}this._history[t].caller.retarget?this._history[t].caller.retarget.call(this,s,i):this._history[t].morpher.to(s),this._history[t].caller.finished=!1;const n=this.timeline();return n&&n.play(),!0}return!1}}nt.id=0;class es{constructor(t=new _,s=-1,i=!0){this.transforms=t,this.id=s,this.done=i}clearTransformsFromQueue(){}}M([nt,es],{mergeWith(e){return new es(e.transforms.lmultiply(this.transforms),e.id)}});const tr=(e,t)=>e.lmultiplyO(t),er=e=>e.transforms;function Ih(){const t=this._transformationRunners.runners.map(er).reduce(tr,new _);this.transform(t),this._transformationRunners.merge(),this._transformationRunners.length()===1&&(this._frameId=null)}class Rh{constructor(){this.runners=[],this.ids=[]}add(t){if(this.runners.includes(t))return;const s=t.id+1;return this.runners.push(t),this.ids.push(s),this}clearBefore(t){const s=this.ids.indexOf(t+1)||1;return this.ids.splice(0,s,0),this.runners.splice(0,s,new es).forEach(i=>i.clearTransformsFromQueue()),this}edit(t,s){const i=this.ids.indexOf(t+1);return this.ids.splice(i,1,t+1),this.runners.splice(i,1,s),this}getByID(t){return this.runners[this.ids.indexOf(t+1)]}length(){return this.ids.length}merge(){let t=null;for(let s=0;s<this.runners.length;++s){const i=this.runners[s];if(t&&i.done&&t.done&&(!i._timeline||!i._timeline._runnerIds.includes(i.id))&&(!t._timeline||!t._timeline._runnerIds.includes(t.id))){this.remove(i.id);const r=i.mergeWith(t);this.edit(t.id,r),t=r,--s}else t=i}return this}remove(t){const s=this.ids.indexOf(t+1);return this.ids.splice(s,1),this.runners.splice(s,1),this}}E({Element:{animate(e,t,s){const i=nt.sanitise(e,t,s),n=this.timeline();return new nt(i.duration).loop(i).element(this).timeline(n.play()).schedule(i.delay,i.when)},delay(e,t){return this.animate(0,e,t)},_clearTransformRunnersBefore(e){this._transformationRunners.clearBefore(e.id)},_currentTransform(e){return this._transformationRunners.runners.filter(t=>t.id<=e.id).map(er).reduce(tr,new _)},_addRunner(e){this._transformationRunners.add(e),A.cancelImmediate(this._frameId),this._frameId=A.immediate(Ih.bind(this))},_prepareRunner(){this._frameId==null&&(this._transformationRunners=new Rh().add(new es(new _(this))))}}});const zh=(e,t)=>e.filter(s=>!t.includes(s));M(nt,{attr(e,t){return this.styleAttr("attr",e,t)},css(e,t){return this.styleAttr("css",e,t)},styleAttr(e,t,s){if(typeof t=="string")return this.styleAttr(e,{[t]:s});let i=t;if(this._tryRetarget(e,i))return this;let n=new It(this._stepper).to(i),r=Object.keys(i);return this.queue(function(){n=n.from(this.element()[e](r))},function(o){return this.element()[e](n.at(o).valueOf()),n.done()},function(o){const a=Object.keys(o),h=zh(a,r);if(h.length){const u=this.element()[e](h),c=new Te(n.from()).valueOf();Object.assign(c,u),n.from(c)}const l=new Te(n.to()).valueOf();Object.assign(l,o),n.to(l),r=a,i=o}),this._rememberMorpher(e,n),this},zoom(e,t){if(this._tryRetarget("zoom",e,t))return this;let s=new It(this._stepper).to(new b(e));return this.queue(function(){s=s.from(this.element().zoom())},function(i){return this.element().zoom(s.at(i),t),s.done()},function(i,n){t=n,s.to(i)}),this._rememberMorpher("zoom",s),this},transform(e,t,s){if(t=e.relative||t,this._isDeclarative&&!t&&this._tryRetarget("transform",e))return this;const i=_.isMatrixLike(e);s=e.affine!=null?e.affine:s??!i;const n=new It(this._stepper).type(s?Ie:_);let r,o,a,h,l;function u(){o=o||this.element(),r=r||As(e,o),l=new _(t?void 0:o),o._addRunner(this),t||o._clearTransformRunnersBefore(this)}function c(d){t||this.clearTransform();const{x:m,y:p}=new F(r).transform(o._currentTransform(this));let v=new _({...e,origin:[m,p]}),y=this._isDeclarative&&a?a:l;if(s){v=v.decompose(m,p),y=y.decompose(m,p);const x=v.rotate,O=y.rotate,P=[x-360,x,x+360],S=P.map(Z=>Math.abs(Z-O)),ut=Math.min(...S),Q=S.indexOf(ut);v.rotate=P[Q]}t&&(i||(v.rotate=e.rotate||0),this._isDeclarative&&h&&(y.rotate=h)),n.from(y),n.to(v);const g=n.at(d);return h=g.rotate,a=new _(g),this.addTransform(a),o._addRunner(this),n.done()}function f(d){(d.origin||"center").toString()!==(e.origin||"center").toString()&&(r=As(d,o)),e={...d,origin:r}}return this.queue(u,c,f,!0),this._isDeclarative&&this._rememberMorpher("transform",n),this},x(e){return this._queueNumber("x",e)},y(e){return this._queueNumber("y",e)},ax(e){return this._queueNumber("ax",e)},ay(e){return this._queueNumber("ay",e)},dx(e=0){return this._queueNumberDelta("x",e)},dy(e=0){return this._queueNumberDelta("y",e)},dmove(e,t){return this.dx(e).dy(t)},_queueNumberDelta(e,t){if(t=new b(t),this._tryRetarget(e,t))return this;const s=new It(this._stepper).to(t);let i=null;return this.queue(function(){i=this.element()[e](),s.from(i),s.to(i+t)},function(n){return this.element()[e](s.at(n)),s.done()},function(n){s.to(i+new b(n))}),this._rememberMorpher(e,s),this},_queueObject(e,t){if(this._tryRetarget(e,t))return this;const s=new It(this._stepper).to(t);return this.queue(function(){s.from(this.element()[e]())},function(i){return this.element()[e](s.at(i)),s.done()}),this._rememberMorpher(e,s),this},_queueNumber(e,t){return this._queueObject(e,new b(t))},cx(e){return this._queueNumber("cx",e)},cy(e){return this._queueNumber("cy",e)},move(e,t){return this.x(e).y(t)},amove(e,t){return this.ax(e).ay(t)},center(e,t){return this.cx(e).cy(t)},size(e,t){let s;return(!e||!t)&&(s=this._element.bbox()),e||(e=s.width/s.height*t),t||(t=s.height/s.width*e),this.width(e).height(t)},width(e){return this._queueNumber("width",e)},height(e){return this._queueNumber("height",e)},plot(e,t,s,i){if(arguments.length===4)return this.plot([e,t,s,i]);if(this._tryRetarget("plot",e))return this;const n=new It(this._stepper).type(this._element.MorphArray).to(e);return this.queue(function(){n.from(this._element.array())},function(r){return this._element.plot(n.at(r)),n.done()}),this._rememberMorpher("plot",n),this},leading(e){return this._queueNumber("leading",e)},viewbox(e,t,s,i){return this._queueObject("viewbox",new U(e,t,s,i))},update(e){return typeof e!="object"?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(e.opacity!=null&&this.attr("stop-opacity",e.opacity),e.color!=null&&this.attr("stop-color",e.color),e.offset!=null&&this.attr("offset",e.offset),this)}});M(nt,{rx:vi,ry:wi,from:Wn,to:Qn});T(nt,"Runner");class bi extends K{constructor(t,s=t){super(H("svg",t),s),this.namespace()}defs(){return this.isRoot()?lt(this.node.querySelector("defs"))||this.put(new gi):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof k.window.SVGElement)&&this.node.parentNode.nodeName!=="#document-fragment"}namespace(){return this.isRoot()?this.attr({xmlns:ci,version:"1.1"}).attr("xmlns:xlink",Ne,vs):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,vs).attr("xmlns:svgjs",null,vs)}root(){return this.isRoot()?this:super.root()}}E({Container:{nested:N(function(){return this.put(new bi)})}});T(bi,"Svg",!0);let Si=class extends K{constructor(t,s=t){super(H("symbol",t),s)}};E({Container:{symbol:N(function(){return this.put(new Si)})}});T(Si,"Symbol");function jh(e){return this._build===!1&&this.clear(),this.node.appendChild(k.document.createTextNode(e)),this}function Fh(){return this.node.getComputedTextLength()}function Bh(e,t=this.bbox()){return e==null?t.x:this.attr("x",this.attr("x")+e-t.x)}function qh(e,t=this.bbox()){return e==null?t.y:this.attr("y",this.attr("y")+e-t.y)}function Uh(e,t,s=this.bbox()){return this.x(e,s).y(t,s)}function Xh(e,t=this.bbox()){return e==null?t.cx:this.attr("x",this.attr("x")+e-t.cx)}function Yh(e,t=this.bbox()){return e==null?t.cy:this.attr("y",this.attr("y")+e-t.cy)}function Vh(e,t,s=this.bbox()){return this.cx(e,s).cy(t,s)}function $h(e){return this.attr("x",e)}function Gh(e){return this.attr("y",e)}function Wh(e,t){return this.ax(e).ay(t)}function Qh(e){return this._build=!!e,this}const sr=Object.freeze(Object.defineProperty({__proto__:null,amove:Wh,ax:$h,ay:Gh,build:Qh,center:Vh,cx:Xh,cy:Yh,length:Fh,move:Uh,plain:jh,x:Bh,y:qh},Symbol.toStringTag,{value:"Module"}));let ft=class extends ot{constructor(t,s=t){super(H("text",t),s),this.dom.leading=this.dom.leading??new b(1.3),this._rebuild=!0,this._build=!1}leading(t){return t==null?this.dom.leading:(this.dom.leading=new b(t),this.rebuild())}rebuild(t){if(typeof t=="boolean"&&(this._rebuild=t),this._rebuild){const s=this;let i=0;const n=this.dom.leading;this.each(function(r){if(Os(this.node))return;const o=k.window.getComputedStyle(this.node).getPropertyValue("font-size"),a=n*new b(o);this.dom.newLined&&(this.attr("x",s.attr("x")),this.text()===`
`?i+=a:(this.attr("dy",r?a+i:0),i=0))}),this.fire("rebuild")}return this}setData(t){return this.dom=t,this.dom.leading=new b(t.leading||1.3),this}writeDataToDom(){return Dn(this,this.dom,{leading:1.3}),this}text(t){if(t===void 0){const s=this.node.childNodes;let i=0;t="";for(let n=0,r=s.length;n<r;++n){if(s[n].nodeName==="textPath"||Os(s[n])){n===0&&(i=n+1);continue}n!==i&&s[n].nodeType!==3&&lt(s[n]).dom.newLined===!0&&(t+=`
`),t+=s[n].textContent}return t}if(this.clear().build(!0),typeof t=="function")t.call(this,this);else{t=(t+"").split(`
`);for(let s=0,i=t.length;s<i;s++)this.newLine(t[s])}return this.build(!1).rebuild()}};M(ft,sr);E({Container:{text:N(function(e=""){return this.put(new ft).text(e)}),plain:N(function(e=""){return this.put(new ft).plain(e)})}});T(ft,"Text");class fs extends ot{constructor(t,s=t){super(H("tspan",t),s),this._build=!1}dx(t){return this.attr("dx",t)}dy(t){return this.attr("dy",t)}newLine(){this.dom.newLined=!0;const t=this.parent();if(!(t instanceof ft))return this;const s=t.index(this),i=k.window.getComputedStyle(this.node).getPropertyValue("font-size"),n=t.dom.leading*new b(i);return this.dy(s?n:0).attr("x",t.x())}text(t){return t==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof t=="function"?(this.clear().build(!0),t.call(this,this),this.build(!1)):this.plain(t),this)}}M(fs,sr);E({Tspan:{tspan:N(function(e=""){const t=new fs;return this._build||this.clear(),this.put(t).text(e)})},Text:{newLine:function(e=""){return this.tspan(e).newLine()}}});T(fs,"Tspan");class Ei extends ot{constructor(t,s=t){super(H("circle",t),s)}radius(t){return this.attr("r",t)}rx(t){return this.attr("r",t)}ry(t){return this.rx(t)}size(t){return this.radius(new b(t).divide(2))}}M(Ei,{x:qn,y:Un,cx:Xn,cy:Yn,width:Vn,height:$n});E({Container:{circle:N(function(e=0){return this.put(new Ei).size(e).move(0,0)})}});T(Ei,"Circle");class zs extends K{constructor(t,s=t){super(H("clipPath",t),s)}remove(){return this.targets().forEach(function(t){t.unclip()}),super.remove()}targets(){return le("svg [clip-path*="+this.id()+"]")}}E({Container:{clip:N(function(){return this.defs().put(new zs)})},Element:{clipper(){return this.reference("clip-path")},clipWith(e){const t=e instanceof zs?e:this.parent().clip().add(e);return this.attr("clip-path","url(#"+t.id()+")")},unclip(){return this.attr("clip-path",null)}}});T(zs,"ClipPath");class ir extends vt{constructor(t,s=t){super(H("foreignObject",t),s)}}E({Container:{foreignObject:N(function(e,t){return this.put(new ir).size(e,t)})}});T(ir,"ForeignObject");function Jh(e,t){return this.children().forEach(s=>{let i;try{i=s.node instanceof ea().SVGSVGElement?new U(s.attr(["x","y","width","height"])):s.bbox()}catch{return}const n=new _(s),r=n.translate(e,t).transform(n.inverse()),o=new F(i.x,i.y).transform(r);s.move(o.x,o.y)}),this}function Kh(e){return this.dmove(e,0)}function Zh(e){return this.dmove(0,e)}function tl(e,t=this.bbox()){return e==null?t.height:this.size(t.width,e,t)}function el(e=0,t=0,s=this.bbox()){const i=e-s.x,n=t-s.y;return this.dmove(i,n)}function sl(e,t,s=this.bbox()){const i=he(this,e,t,s),n=i.width/s.width,r=i.height/s.height;return this.children().forEach(o=>{const a=new F(s).transform(new _(o).inverse());o.scale(n,r,a.x,a.y)}),this}function il(e,t=this.bbox()){return e==null?t.width:this.size(e,t.height,t)}function nl(e,t=this.bbox()){return e==null?t.x:this.move(e,t.y,t)}function rl(e,t=this.bbox()){return e==null?t.y:this.move(t.x,e,t)}const nr=Object.freeze(Object.defineProperty({__proto__:null,dmove:Jh,dx:Kh,dy:Zh,height:tl,move:el,size:sl,width:il,x:nl,y:rl},Symbol.toStringTag,{value:"Module"}));class Mi extends K{constructor(t,s=t){super(H("g",t),s)}}M(Mi,nr);E({Container:{group:N(function(){return this.put(new Mi)})}});T(Mi,"G");class ss extends K{constructor(t,s=t){super(H("a",t),s)}target(t){return this.attr("target",t)}to(t){return this.attr("href",t,Ne)}}M(ss,nr);E({Container:{link:N(function(e){return this.put(new ss).to(e)})},Element:{unlink(){const e=this.linker();if(!e)return this;const t=e.parent();if(!t)return this.remove();const s=t.index(e);return t.add(this,s),e.remove(),this},linkTo(e){let t=this.linker();return t||(t=new ss,this.wrap(t)),typeof e=="function"?e.call(t,t):t.to(e),this},linker(){const e=this.parent();return e&&e.node.nodeName.toLowerCase()==="a"?e:null}}});T(ss,"A");class js extends K{constructor(t,s=t){super(H("mask",t),s)}remove(){return this.targets().forEach(function(t){t.unmask()}),super.remove()}targets(){return le("svg [mask*="+this.id()+"]")}}E({Container:{mask:N(function(){return this.defs().put(new js)})},Element:{masker(){return this.reference("mask")},maskWith(e){const t=e instanceof js?e:this.parent().mask().add(e);return this.attr("mask","url(#"+t.id()+")")},unmask(){return this.attr("mask",null)}}});T(js,"Mask");class rr extends vt{constructor(t,s=t){super(H("stop",t),s)}update(t){return(typeof t=="number"||t instanceof b)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),t.opacity!=null&&this.attr("stop-opacity",t.opacity),t.color!=null&&this.attr("stop-color",t.color),t.offset!=null&&this.attr("offset",new b(t.offset)),this}}E({Gradient:{stop:function(e,t,s){return this.put(new rr).update(e,t,s)}}});T(rr,"Stop");function ol(e,t){if(!e)return"";if(!t)return e;let s=e+"{";for(const i in t)s+=Ko(i)+":"+t[i]+";";return s+="}",s}class Fs extends vt{constructor(t,s=t){super(H("style",t),s)}addText(t=""){return this.node.textContent+=t,this}font(t,s,i={}){return this.rule("@font-face",{fontFamily:t,src:s,...i})}rule(t,s){return this.addText(ol(t,s))}}E("Dom",{style(e,t){return this.put(new Fs).rule(e,t)},fontface(e,t,s){return this.put(new Fs).font(e,t,s)}});T(Fs,"Style");class ki extends ft{constructor(t,s=t){super(H("textPath",t),s)}array(){const t=this.track();return t?t.array():null}plot(t){const s=this.track();let i=null;return s&&(i=s.plot(t)),t==null?i:this}track(){return this.reference("href")}}E({Container:{textPath:N(function(e,t){return e instanceof ft||(e=this.text(e)),e.path(t)})},Text:{path:N(function(e,t=!0){const s=new ki;e instanceof ue||(e=this.defs().path(e)),s.attr("href","#"+e,Ne);let i;if(t)for(;i=this.node.firstChild;)s.node.appendChild(i);return this.put(s)}),textPath(){return this.findOne("textPath")}},Path:{text:N(function(e){return e instanceof ft||(e=new ft().addTo(this.parent()).text(e)),e.path(this)}),targets(){return le("svg textPath").filter(e=>(e.attr("href")||"").includes(this.id()))}}});ki.prototype.MorphArray=Xt;T(ki,"TextPath");class or extends ot{constructor(t,s=t){super(H("use",t),s)}use(t,s){return this.attr("href",(s||"")+"#"+t,Ne)}}E({Container:{use:N(function(e,t){return this.put(new or).use(e,t)})}});T(or,"Use");const al=G;M([bi,Si,us,ke,Ze],J("viewbox"));M([Le,ze,Re,ue],J("marker"));M(ft,J("Text"));M(ue,J("Path"));M(gi,J("Defs"));M([ft,fs],J("Tspan"));M([cs,ls,Pe,nt],J("radius"));M(He,J("EventTarget"));M(Ot,J("Dom"));M(vt,J("Element"));M(ot,J("Shape"));M([K,Gn],J("Container"));M(Pe,J("Gradient"));M(nt,J("Runner"));Ut.extend(Qo());Lh([b,D,U,_,re,Dt,Xt,F]);Th();class hl{stack=[];current=-1;listeners=[];addListener(t){this.listeners.push(t)}execute(t){this.current+1<this.stack.length&&this.stack.splice(this.current+1,this.stack.length-this.current),this.stack.push(t),this.current+=1,t.execute(),this.fireChange()}canUndo(){return this.current>=0}canRedo(){return this.current+1<this.stack.length}undo(){this.canUndo()&&(this.stack[this.current].undo(),this.current-=1,this.fireChange())}redo(){this.canRedo()&&(this.current+=1,this.stack[this.current].redo(),this.fireChange())}fireChange(){this.listeners.forEach(t=>{t({canUndo:this.canUndo(),canRedo:this.canRedo()})})}}class W{constructor(t,s){this.x=t,this.y=s}centeredRect(t,s){return new Ce(this.x-t/2,this.y-s/2,t,s)}rect(t,s){return new Ce(this.x,this.y,t,s)}distance(t){const s=this.x-t.x,i=this.y-t.y;return Math.sqrt(s*s+i*i)}move(t,s){return new W(this.x+t,this.y+s)}}class Ce{constructor(t,s,i,n){this.x=t,this.y=s,this.width=i,this.height=n}contains(t){return this.x<=t.x&&t.x<this.corner().x&&this.y<=t.y&&t.y<this.corner().y}corner(){return new W(this.x+this.width,this.y+this.height)}expand(t){return new Ce(this.x-t,this.y-t,this.width+t*2,this.height+t*2)}center(){return new W(this.x+this.width/2,this.y+this.height/2)}topCenter(){return new W(this.x+this.width/2,this.y)}topRight(){return new W(this.x+this.width,this.y)}}function ll(){const e={},t=new Promise((s,i)=>{e.resolve=s,e.reject=i});return e.promise=t,e}function bs(e,t){const s={};return e.forEach(i=>{s[t(i)]=i}),s}class ul{mainEl;inputEl;editDefer=null;constructor(t){this.mainEl=document.createElement("div"),this.mainEl.classList.add("directEdit"),t.appendChild(this.mainEl),this.inputEl=document.createElement("input"),this.mainEl.appendChild(this.inputEl),this.mainEl.addEventListener("mouseup",s=>{this.editDefer&&s.target!==this.inputEl&&(this.editDefer.reject(),this.close())}),this.inputEl.addEventListener("keyup",s=>{this.editDefer&&(s.keyCode==27?(this.editDefer.reject(),this.close()):s.keyCode==13&&(this.editDefer.resolve(this.inputEl.value),this.close()))})}close(){this.mainEl.classList.remove("opened")}start(t){return this.editDefer=ll(),t?(this.mainEl.classList.add("opened"),this.inputEl.value=t.value,this.inputEl.style.left=`${t.bounds.x}px`,this.inputEl.style.top=`${t.bounds.y}px`,this.inputEl.style.width=`${t.bounds.width}px`,this.inputEl.style.height=`${t.bounds.height}px`,this.inputEl.select(),this.inputEl.focus()):(console.log("START DIRECT EDIT WITH NULL"),this.close(),this.editDefer.reject()),this.editDefer.promise}}class cl{context;constructor(){const t=document.createElement("canvas");this.context=t.getContext("2d")}measure(t,s){return this.context.font=s+" arial",this.context.measureText(t)}}class fl{measurer=new cl;commandStack=new hl;directEdit;rootView;state;model;container;svg;constructor(t,s){this.directEdit=new ul(s.container),this.container=this.createContainer(s.container),window.addEventListener("resize",o=>this.resizePage()),this.svg=this.createSvg(this.container,t);const{model:i,view:n,state:r}=t.initialize(this);this.model=i,this.rootView=n,this.state=r,this.resizePage()}mouseDown(t){const s=new W(t.clientX,t.clientY);this.state=this.state.mouseDown(s)}mouseUp(t){const s=new W(t.clientX,t.clientY);this.state=this.state.mouseUp(s)}mouseMove(t){const s=new W(t.clientX,t.clientY);this.state=this.state.mouseMove(s)}undo(){this.commandStack.undo(),this.rootView.render()}redo(){this.commandStack.redo(),this.rootView.render()}executeCommand(t){this.commandStack.execute(t),this.rootView.render()}onStackChange(t){this.commandStack.addListener(t)}createContainer(t){const s=document.createElement("div");return s.setAttribute("class","editor-container"),t.appendChild(s),s.addEventListener("mousedown",i=>this.mouseDown(i)),s.addEventListener("mouseup",i=>this.mouseUp(i)),s.addEventListener("mousemove",i=>this.mouseMove(i)),s}createSvg(t,s){const i=al().addTo(t).viewbox(0,0,100,100);return s.initializeSvg(i),i}resizePage(){const t=this.container.clientWidth,s=this.container.clientHeight;this.svg.viewbox(0,0,t,s).size(t,s)}}const Ue=parseFloat;function is(e,t=";"){let s;if(Array.isArray(e))s=e.filter(i=>i);else{s=[];for(const i in e)e[i]&&s.push(`${i}:${e[i]}`)}return s.join(t)}function dl(e,t,s,i){let n,r;const o="1em";let a,h,l,u="-.125em";const c="visible";return i&&(l="center",r="1.25em"),s&&(n=s),t&&(t=="lg"?(h="1.33333em",a=".75em",u="-.225em"):t=="xs"?h=".75em":t=="sm"?h=".875em":h=t.replace("x","em")),is([is({float:n,width:r,height:o,"line-height":a,"font-size":h,"text-align":l,"vertical-align":u,"transform-origin":"center",overflow:c}),e])}function ml(e,t,s,i,n,r=1,o="",a=""){let h=1,l=1;return n&&(n=="horizontal"?h=-1:n=="vertical"?l=-1:h=l=-1),is([`translate(${Ue(t)*r}${o},${Ue(s)*r}${o})`,`scale(${h*Ue(e)},${l*Ue(e)})`,i&&`rotate(${i}${a})`]," ")}var pl=li('<path class="svelte-1cj2gr0"></path>'),gl=li('<path class="svelte-1cj2gr0"></path><path class="svelte-1cj2gr0"></path>',1),vl=li('<svg aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg"><g class="svelte-1cj2gr0"><g class="svelte-1cj2gr0"><!></g></g></svg>');function Gi(e,t){Zs(t,!1);let s=R(t,"class",8,""),i=R(t,"id",8,""),n=R(t,"style",8,""),r=R(t,"icon",8),o=R(t,"size",8,""),a=R(t,"color",8,""),h=R(t,"fw",8,!1),l=R(t,"pull",8,""),u=R(t,"scale",8,1),c=R(t,"translateX",8,0),f=R(t,"translateY",8,0),d=R(t,"rotate",8,""),m=R(t,"flip",8,!1),p=R(t,"spin",8,!1),v=R(t,"pulse",8,!1),y=R(t,"primaryColor",8,""),g=R(t,"secondaryColor",8,""),x=R(t,"primaryOpacity",8,1),O=R(t,"secondaryOpacity",8,.4),P=R(t,"swapOpacity",8,!1),S=Lt(),ut=Lt(),Q=Lt(),Z=Lt();Be(()=>V(r()),()=>{Y(S,r()&&r().icon||[0,0,"",[],""])}),Be(()=>(V(s()),V(p()),V(v())),()=>{Y(ut,is([s(),"svelte-fa",p()&&"spin",v()&&"pulse"]," "))}),Be(()=>(V(n()),V(o()),V(l()),V(h())),()=>{Y(Q,dl(n(),o(),l(),h()))}),Be(()=>(V(u()),V(c()),V(f()),V(d()),V(m())),()=>{Y(Z,ml(u(),c(),f(),d(),m(),512))}),co(),Tn();var ce=ko(),fe=Ni(ce);{var de=me=>{var St=vl(),pe=at(St),Li=at(pe),mr=at(Li);{var pr=$t=>{var Ht=pl();xe(()=>{X(Ht,"d",(w(S),z(()=>w(S)[4]))),X(Ht,"fill",a()||y()||"currentColor"),X(Ht,"transform",(w(S),z(()=>`translate(${w(S)[0]/-2} ${w(S)[1]/-2})`)))}),Kt($t,Ht)},gr=$t=>{var Ht=gl(),ge=Ni(Ht),je=Xe(ge);xe(()=>{X(ge,"d",(w(S),z(()=>w(S)[4][0]))),X(ge,"fill",g()||a()||"currentColor"),X(ge,"fill-opacity",P()!=!1?x():O()),X(ge,"transform",(w(S),z(()=>`translate(${w(S)[0]/-2} ${w(S)[1]/-2})`))),X(je,"d",(w(S),z(()=>w(S)[4][1]))),X(je,"fill",y()||a()||"currentColor"),X(je,"fill-opacity",P()!=!1?O():x()),X(je,"transform",(w(S),z(()=>`translate(${w(S)[0]/-2} ${w(S)[1]/-2})`)))}),Kt($t,Ht)};zi(mr,$t=>{w(S),z(()=>typeof w(S)[4]=="string")?$t(pr):$t(gr,!1)})}xe(()=>{X(St,"id",i()),jo(St,0,Io(w(ut)),"svelte-1cj2gr0"),Fo(St,w(Q)),X(St,"viewBox",(w(S),z(()=>`0 0 ${w(S)[0]} ${w(S)[1]}`))),X(pe,"transform",(w(S),z(()=>`translate(${w(S)[0]/2} ${w(S)[1]/2})`))),X(pe,"transform-origin",(w(S),z(()=>`${w(S)[0]/4} 0`))),X(Li,"transform",w(Z))}),Kt(me,St)};zi(fe,me=>{w(S),z(()=>w(S)[4])&&me(de)})}Kt(e,ce),ti()}/*!
 * Font Awesome Free 5.15.3 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */var ar={icon:[576,512,[],"f044","M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"]},wl={prefix:"fas",iconName:"redo",icon:[512,512,[],"f01e","M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"]},hr={icon:[448,512,[],"f2ed","M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"]},yl={prefix:"fas",iconName:"undo",icon:[512,512,[],"f0e2","M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"]},_l=En('<li class="spacer svelte-1jbr9wa"><button> </button></li>'),xl=En('<div class="container svelte-1jbr9wa"><div></div> <div class="palette svelte-1jbr9wa"><ul class="svelte-1jbr9wa"><li class="svelte-1jbr9wa"><button title="Undo"><!></button></li> <li class="svelte-1jbr9wa"><button title="Redo"><!></button></li> <!></ul></div></div>');function bl(e,t){Zs(t,!1);let s=R(t,"diagramType",8),i=Lt(),n=Lt(),r=Lt({canUndo:!1,canRedo:!1});$o(()=>{Y(n,new fl(s(),{container:w(i)})),w(n).onStackChange(y=>{Y(r,y)})}),Tn();var o=xl(),a=at(o);Yo(a,y=>Y(i,y),()=>w(i));var h=Xe(a,2),l=at(h),u=at(l),c=at(u),f=at(c);Gi(f,{get icon(){return yl}});var d=Xe(u,2),m=at(d),p=at(m);Gi(p,{get icon(){return wl}});var v=Xe(d,2);No(v,1,()=>(V(s()),z(()=>s().actions)),Oo,(y,g)=>{var x=_l(),O=at(x),P=at(O);xe(()=>Lo(P,(w(g),z(()=>w(g).label)))),ms("click",O,()=>w(g).run(w(n))),Kt(y,x)}),xe(()=>{c.disabled=(w(r),z(()=>!w(r).canUndo)),m.disabled=(w(r),z(()=>!w(r).canRedo))}),ms("click",c,()=>w(n).undo()),ms("click",m,()=>w(n).redo()),Kt(e,o),ti()}class Sl{constructor(t,s){this.message=t,this.end=s,this.oldEnd=this.message.from}oldEnd;execute(){this.message.from=this.end}undo(){this.message.from=this.oldEnd}redo(){this.execute()}}class El{constructor(t,s){this.message=t,this.end=s,this.oldEnd=this.message.to}oldEnd;execute(){this.message.to=this.end}undo(){this.message.to=this.oldEnd}redo(){this.execute()}}class Ml{constructor(t,s){this.model=t,this.lifeLine=s}execute(){this.model.lifeLines.push(this.lifeLine)}undo(){this.model.lifeLines.pop()}redo(){this.execute()}}class kl{constructor(t,s,i=-1){this.model=t,this.message=s,this.position=i,i<0&&(this.position=t.messages.length)}execute(){this.model.messages.splice(this.position,0,this.message)}undo(){this.model.messages.splice(this.position,1)}redo(){this.execute()}}class Ll{constructor(t,s,i){this.model=t,this.message=s,this.position=i,this.oldPosition=this.model.messages.indexOf(s)}oldPosition;execute(){this.model.messages.splice(this.oldPosition,1),this.model.messages.splice(this.position,0,this.message)}undo(){this.model.messages.splice(this.position,1),this.model.messages.splice(this.oldPosition,0,this.message)}redo(){this.execute()}}class Tl{constructor(t,s){this.message=t,this.newText=s,this.oldText=this.message.text}oldText;execute(){this.message.text=this.newText}undo(){this.message.text=this.oldText}redo(){this.execute()}}class Cl{constructor(t,s){this.model=t,this.message=s,this.oldPosition=this.model.messages.indexOf(s)}oldPosition;execute(){this.model.messages.splice(this.model.messages.indexOf(this.message),1)}undo(){this.model.messages.splice(this.oldPosition,0,this.message)}redo(){this.execute()}}class Al{constructor(t,s){this.lifeLine=t,this.newName=s,this.oldName=this.lifeLine.name}oldName;execute(){this.lifeLine.name=this.newName}undo(){this.lifeLine.name=this.oldName}redo(){this.execute()}}class Ol{constructor(t,s,i){this.model=t,this.lifeLine=s,this.position=i,this.oldPosition=this.model.lifeLines.indexOf(s)}oldPosition;execute(){this.model.lifeLines.splice(this.oldPosition,1),this.model.lifeLines.splice(this.position,0,this.lifeLine)}undo(){this.model.lifeLines.splice(this.position,1),this.model.lifeLines.splice(this.oldPosition,0,this.lifeLine)}redo(){this.execute()}}class Dl{constructor(t,s){this.model=t,this.lifeLine=s,this.removedMessages=t.messages.map((i,n)=>({message:i,position:n})).filter(i=>i.message.from===s||i.message.to===s),this.oldPosition=this.model.lifeLines.indexOf(s)}oldPosition;removedMessages;execute(){this.removedMessages.reverse().forEach(t=>{this.model.messages.splice(t.position,1)}),this.model.lifeLines.splice(this.model.lifeLines.indexOf(this.lifeLine),1)}undo(){this.model.lifeLines.splice(this.oldPosition,0,this.lifeLine),this.removedMessages.forEach(t=>{this.model.messages.splice(t.position,0,t.message)})}redo(){this.execute()}}let lr=0;function Nl(){const e=[Bs("Roméo"),Bs("Juliette")];return{lifeLines:e,messages:[qs(e[0],e[1],"Je t'aime"),qs(e[1],e[0],"Moi non plus")]}}function Bs(e="actor"){return{id:`L${lr++}`,name:e}}function qs(e,t,s="message"){return{id:`M${lr++}`,from:e,to:t,text:s}}class Hl{icon=ar.icon[4];action(t,s){const{diagram:i,message:n}=s,r={value:n.model.text,bounds:n.textBounds.expand(3)};i.directEdit(r).then(o=>{t.execute(new Tl(n.model,o)),i.layout()},()=>{})}}class Pl{icon=hr.icon[4];action(t,s){const{diagram:i,message:n}=s;t.execute(new Cl(i.model,n.model)),i.unselectAll(),i.render()}}class Il{icon=ar.icon[4];action(t,s){const{diagram:i,lifeLine:n}=s,r={value:n.model.name,bounds:n.textBounds.expand(3)};i.directEdit(r).then(o=>{t.execute(new Al(n.model,o)),i.layout()},()=>{})}}class Rl{icon=hr.icon[4];action(t,s){const{diagram:i,lifeLine:n}=s;t.execute(new Dl(i.model,n.model)),i.unselectAll(),i.render()}}class zl{constructor(t,s,i,n,r){this.bounds=t,this.tool=s,this.context=i,this.parentSvg=n,this.commandStack=r,this.draw()}hover=!1;svg;testHover(t){this.bounds.contains(t)?this.setHover(!0):this.setHover(!1)}setHover(t){this.hover!=t&&(this.hover=t,Rt(this.svg,this.hover,"hover"))}draw(){this.svg=this.parentSvg.group().transform({translate:[this.bounds.x,this.bounds.y]}),this.svg.addClass("tool"),this.svg.rect().radius(5,5).size(this.bounds.width,this.bounds.height).fill("white"),this.svg.group().transform({translate:[4,3],scale:.039}).path(this.tool.icon)}action(){this.tool.action(this.commandStack,this.context)}remove(){this.svg.remove()}}class jl{constructor(t,s,i,n,r,o){this.model=t,this.style=s,this.measurer=i,this.svg=n,this.directEdit=r,this.commandStack=o,this.shapesSvg=this.svg.group(),this.feedbackSvg=this.svg.group(),this.toolsSvg=this.svg.group(),this.render()}messageStart=0;pendingDragMessage=null;pendingMessage=null;pendingLifeLine=null;startMessageHandle=null;tools=[];shapesSvg;feedbackSvg;toolsSvg;lifeLines=[];messages=[];render(){this.lifeLines.forEach(n=>n.clearFlags());const t=bs(this.lifeLines,n=>n.model.id);this.lifeLines=this.model.lifeLines.map((n,r)=>{const o=t[n.id],a=o!=null?o.updateIndex(r):this.createLifeline(n,r);return a.setUsed(),a});for(let n in t){const r=t[n];r.isUsed()||r.remove()}const s=bs(this.lifeLines,n=>n.model.id);this.messages.forEach(n=>n.clearFlags());const i=bs(this.messages,n=>n.model.id);this.messages=this.model.messages.map(n=>{const r=i[n.id],o=r??this.createMessage(n,s);return o.setUsed(),o});for(let n in i){const r=i[n];r.isUsed()||r.remove()}this.layout()}createLifeline(t,s){return new Yl(t,s,this.style,this.measurer,this.shapesSvg)}createMessage(t,s){return new Vl(t,s[t.from.id],s[t.to.id],!1,this.style,this.measurer,this.shapesSvg)}testHover(t){let s=!1;if(this.tools.forEach(n=>{n.testHover(t),s||=n.hover}),s){this.clearOtherHover();return}this.lifeLines.forEach(n=>{n.testHover(t)});let i=!1;this.messages.forEach(n=>{n.testHover(t),i||=n.hover}),i?this.clearStartMessageHandle():this.testHoverInsertMessage(t)}testHoverInsertMessage(t){let s=!1;this.lifeLines.forEach(i=>{if(i.isNearLine(t)){const n=new W(i.centerX(),t.y);this.startMessageHandle?this.startMessageHandle.update(n):this.startMessageHandle=new Fl(i,n,this.feedbackSvg),s=!0}}),s||this.clearStartMessageHandle()}clearStartMessageHandle(){this.startMessageHandle&&(this.startMessageHandle.remove(),this.startMessageHandle=null)}clearOtherHover(){this.messages.forEach(t=>t.setHover(!1)),this.lifeLines.forEach(t=>t.setHover(!1))}startDragMessageHandle(t,s){this.pendingMessage=new Bl(t,s,this.feedbackSvg)}startDragNewMessageHandle(t){this.pendingMessage=new ql(this,this.startMessageHandle.lifeLine,this.startMessageHandle.position.y,t,this.feedbackSvg),this.clearStartMessageHandle()}updateDragMessageHandle(t){let s=null;this.lifeLines.forEach(i=>{Math.abs(i.centerX()-t)<10&&(s=i)}),this.pendingMessage.setHover(s,t)}finishDragMessageHandle(){this.pendingMessage.finish(this.commandStack),this.pendingMessage=null,this.render()}startDragMessage(t,s){this.unselectAll(),this.pendingDragMessage=new Ul(this,t,s)}updateDragMessage(t){this.pendingDragMessage.setPosition(t)}finishDragMessage(){this.pendingDragMessage.finish(this.commandStack),this.pendingDragMessage=null,this.layout()}startDragLifeLine(t,s){this.pendingLifeLine=new Xl(this,t,s,this.feedbackSvg)}updateDragLifeLine(t){this.pendingLifeLine.updatePosition(t)}finishDragLifeLine(){this.pendingLifeLine.finish(this.commandStack),this.pendingLifeLine=null}findMessageHandle(t){for(let s of this.messages){if(s.from.bounds().contains(t))return s.from;if(s.to.bounds().contains(t))return s.to}return null}findMessage(t){return this.messages.find(s=>s.markerBounds.contains(t))}findLifeLine(t){return this.lifeLines.find(s=>s.hoverBounds.contains(t))}findTool(t){return this.tools.find(s=>s.bounds.contains(t))}layout(){this.lifeLines.forEach(s=>s.measureText()),this.messages.forEach(s=>s.measureText()),this.messageStart=0,this.lifeLines.forEach(s=>{this.messageStart=Math.max(this.messageStart,s.headHeight)});let t=this.messageStart+this.style.messageStartGap;this.messages.forEach(s=>{s.y=t,t+=this.style.messageGap}),this.lifeLines.forEach(s=>{s.x=this.style.leftMargin,s.y=this.style.topMargin,s.lineHeight=t-this.messageStart}),this.lifeLines.forEach(s=>{if(this.messages.forEach(i=>{const n=i.width+this.style.messageMargin*2;if(i.from.lifeLine==s&&i.to.lifeLine.index<s.index){const r=s.centerX()-i.to.lifeLine.centerX();r<n&&(s.x+=n-r)}else if(i.to.lifeLine==s&&i.from.lifeLine.index<s.index){const r=s.centerX()-i.from.lifeLine.centerX();r<n&&(s.x+=n-r)}}),s.index>0){const i=this.lifeLines[s.index-1],n=i.width+this.style.minHeadGap;s.x-i.x<n&&(s.x=i.x+n)}}),this.lifeLines.forEach(s=>s.layout()),this.messages.forEach(s=>s.layout())}update(){this.lifeLines.forEach(t=>t.update()),this.messages.forEach(t=>t.update())}selectMessage(t){if(this.unselectAll(),t){t.selected=!0;const s={diagram:this,message:t};this.placeTools(t.markerBounds.topCenter().move(0,-30),s,[new Hl,new Pl])}this.update()}selectLifeLine(t){this.unselectAll();const s=this.resolveLifeline(t);if(s){s.selected=!0;const i={diagram:this,lifeLine:s};this.placeTools(s.hoverBounds.topRight().move(5,5),i,[new Il,new Rl])}this.update()}resolveLifeline(t){return this.lifeLines.find(s=>s.model==t.model)}unselectAll(){this.messages.forEach(t=>t.selected=!1),this.lifeLines.forEach(t=>t.selected=!1),this.tools.forEach(t=>t.remove()),this.tools=[]}placeTools(t,s,i){let n=t;this.tools=i.map(r=>{const o=new zl(n.rect(26,26),r,s,this.toolsSvg,this.commandStack);return n=n.move(30,0),o})}}class Fl{constructor(t,s,i){this.lifeLine=t,this.position=s,this.svg=i.circle().radius(6),this.svg.addClass("point-marker").addClass("hover"),this.update(s)}svg;update(t){this.position=t,this.svg.cx(t.x).cy(t.y)}remove(){this.svg.remove()}}class ur{constructor(t,s,i,n,r){this.y=t,this.lifeLine=i,this.isMovingFrom=n,n?(this.from=s,this.to=i.centerX()):(this.from=i.centerX(),this.to=s),this.draw(r)}from;to;hoverOther=null;svg;lineSvg;circleSvg;setHover(t,s){t&&t!=this.lifeLine?(this.addHover(t),this.setPosition(this.hoverOther.centerX())):(this.removeHover(),this.setPosition(s))}setPosition(t){this.isMovingFrom?this.from=t:this.to=t,this.update()}addHover(t){this.hoverOther||(this.circleSvg=this.svg.circle().radius(6),this.circleSvg.addClass("point-marker").addClass("hover")),this.hoverOther=t}removeHover(){this.hoverOther&&(this.hoverOther=null,this.circleSvg.remove())}draw(t){this.svg=t.group(),this.lineSvg=this.svg.line(0,this.y,0,this.y).fill("none").stroke("black").attr("marker-end","url(#triangle)"),this.update()}update(){this.lineSvg.attr("x1",this.from).attr("x2",this.to),this.hoverOther&&this.circleSvg.cx(this.hoverOther.centerX()).cy(this.y)}finish(t){this.finishAction(t),this.svg.remove()}}class Bl extends ur{constructor(t,s,i){super(t.message.y,s,t.message.other(t).lifeLine,t==t.message.from,i),this.handle=t,this.handle.setHover(!1),this.handle.message.setEditing(!0)}finishAction(t){this.handle.message.setEditing(!1),this.hoverOther!=null&&this.hoverOther!=this.lifeLine&&(this.handle.message.from==this.handle?t.execute(new Sl(this.handle.message.model,this.hoverOther.model)):t.execute(new El(this.handle.message.model,this.hoverOther.model)))}}class ql extends ur{constructor(t,s,i,n,r){super(i,n,s,!1,r),this.diagram=t}finishAction(t){if(this.hoverOther!=null){let s=0;for(let i of this.diagram.messages){if(this.y<=i.markerBounds.y)break;++s}t.execute(new kl(this.diagram.model,qs(this.lifeLine.model,this.hoverOther.model),s))}}}class Ul{constructor(t,s,i){this.diagram=t,this.message=s,this.y=i,this.message.y=i,this.oldPosition=t.messages.indexOf(s),this.message.hover=!1}oldPosition;setPosition(t){for(let s of this.diagram.messages)if(s!=this.message&&s.markerBounds.y<=t&&t<=s.markerBounds.corner().y){const n=Math.sign(s.markerBounds.center().y-t)>0?1:0;this.diagram.messages.splice(this.diagram.messages.indexOf(this.message),1),this.diagram.messages.splice(this.diagram.messages.indexOf(s)+n,0,this.message)}this.diagram.layout(),this.message.y=t,this.message.update()}finish(t){const s=this.diagram.messages.indexOf(this.message);s!=this.oldPosition&&t.execute(new Ll(this.diagram.model,this.message.model,s))}}class Xl{constructor(t,s,i,n){this.diagram=t,this.lifeLine=s,this.x=i,this.y=this.lifeLine.y,this.width=this.lifeLine.width,this.height=this.lifeLine.headHeight+this.lifeLine.lineHeight,this.draw(n)}x;y;width;height;snap=!1;position=-1;lineSvg;draw(t){this.lineSvg=t.line().stroke({dasharray:"4"}),this.update()}update(){this.lineSvg.plot(this.x,this.y,this.x,this.y+this.height).stroke({width:this.snap?3:1,color:this.snap?"green":"#55CCFF"})}updatePosition(t){this.x=t,this.snap=!1,this.position=-1;let s=null;for(let i of this.diagram.lifeLines){if(s){const n=(s.x+s.width+i.x)/2;if(Math.abs(n-t)<10){this.x=n,this.snap=!0,this.position=this.diagram.lifeLines.indexOf(i);break}}else if(t<i.x){this.x=i.x-10,this.snap=!0,this.position=0;break}s=i}!this.snap&&s&&t>s.x+s.width&&(this.x=s.x+s.width+10,this.snap=!0,this.position=this.diagram.lifeLines.indexOf(s)+1),this.update()}finish(t){this.remove(),this.position>this.lifeLine.index&&(this.position-=1);const s=this.diagram.lifeLines.indexOf(this.lifeLine);this.position>=0&&this.position!=s&&(t.execute(new Ol(this.diagram.model,this.lifeLine.model,this.position)),this.diagram.render())}remove(){this.lineSvg.remove()}}const ns=1;class Yl{constructor(t,s,i,n,r){this.model=t,this.index=s,this.style=i,this.text=new cr(this.model.name,this.style.lifeLineHeadTextSize,1,n),this.draw(r)}flags=0;text;width=0;headHeight=0;lineHeight=0;x=0;y=0;selected=!1;hover=!1;hoverBounds;markerBounds;textBounds;textDy;gSvg;rectSvg;textSvg;lineSvg;selectSvg;clearFlags(){this.flags=0}setUsed(){this.flags|=ns}isUsed(){return(this.flags&ns)!=0}updateIndex(t){return this.index=t,this}isNearLine(t){return Math.abs(this.centerX()-t.x)<10&&this.y+this.headHeight<t.y&&t.y<this.y+this.headHeight+this.lineHeight}centerX(){return this.x+this.width/2}testHover(t){this.setHover(this.hoverBounds.contains(t))}setHover(t){this.hover!=t&&(this.hover=t,this.updateHover())}measureText(){this.text.update(this.model.name),this.headHeight=Math.max(this.text.height+this.style.lifeLineHeadMargin*2,this.style.minHeadHeight),this.width=this.text.width+this.style.lifeLineHeadMargin*2,this.textDy=this.style.lifeLineHeadMargin+this.text.ascent+10}layout(){this.textBounds=this.text.boundsAt(new W(this.x+this.width/2,this.y).move(0,this.textDy)),this.hoverBounds=new W(this.x,this.y).rect(this.width,this.headHeight).expand(10),this.markerBounds=new W(this.x,this.y).rect(this.width,this.headHeight+this.lineHeight).expand(10),this.update()}draw(t){this.gSvg=t.group(),this.rectSvg=this.gSvg.rect().stroke("black").fill("none"),this.textSvg=this.gSvg.plain("").font({anchor:"middle"}),this.lineSvg=this.gSvg.line().stroke({color:"black",dasharray:"4"}),this.selectSvg=this.gSvg.rect().x(-10).y(-10).radius(10,10).fill("none").stroke({width:2,dasharray:"4"}),this.selectSvg.addClass("select-marker")}update(){this.gSvg.transform({translate:[this.x,this.y]}),this.rectSvg.width(this.width).height(this.headHeight),this.textSvg.font({size:this.text.size}).text(t=>{t.tspan(this.text.value).dx(this.width/2).dy(this.textDy)}),this.lineSvg.plot(this.width/2,this.headHeight,this.width/2,this.headHeight+this.lineHeight),this.selectSvg.width(this.markerBounds.width).height(this.markerBounds.height),this.updateHover(),Rt(this.selectSvg,this.selected,"selected")}updateHover(){Rt(this.selectSvg,!this.selected&&this.hover,"hover")}remove(){this.gSvg.remove()}}function Rt(e,t,s){t?e.addClass(s):e.removeClass(s)}class Vl{constructor(t,s,i,n,r,o,a){this.model=t,this.selected=n,this.style=r,this.from=new Wi(s,this),this.to=new Wi(i,this),this.text=new cr(this.model.text,this.style.messageTextSize,0,o),this.draw(a)}flags=0;from;to;reversed=!1;text;width=0;height=0;hover=!1;markerBounds;textBounds;y=0;editing=!1;gSvg;lineSvg;textSvg;startCircleSvg;endCircleSvg;selectSvg;clearFlags(){this.flags=0}setUsed(){this.flags|=ns}isUsed(){return(this.flags&ns)!=0}other(t){return t==this.from?this.to:this.from}testHover(t){this.markerBounds.contains(t)?(this.setHover(!0),this.checkOver(this.from.setHover(this.from.bounds().contains(t))),this.checkOver(this.to.setHover(this.to.bounds().contains(t)))):(this.setHover(!1),this.checkOver(this.from.setHover(!1)),this.checkOver(this.to.setHover(!1)))}setHover(t){this.hover!=t&&(this.hover=t,this.updateHover())}checkOver(t){t&&this.updateHover()}measureText(){this.text.update(this.model.text),this.width=this.text.width,this.height=this.text.height}layout(){this.reversed=this.from.lifeLine.index>this.to.lifeLine.index,this.text.align=this.reversed?0:2,this.markerBounds=new Ce(Math.min(this.from.lifeLine.centerX()-10,this.to.lifeLine.centerX()-10),this.y-this.height-7,Math.abs(this.from.lifeLine.centerX()-this.to.lifeLine.centerX())+20,this.height+20);const t=this.reversed?this.style.messageMargin:-this.style.messageMargin;this.textBounds=this.text.boundsAt(new W(this.to.lifeLine.centerX(),this.y).move(t,-7)),this.update()}draw(t){this.gSvg=t.group(),this.lineSvg=this.gSvg.line().stroke("black").attr("marker-end","url(#triangle)"),this.textSvg=this.gSvg.plain(""),this.startCircleSvg=this.gSvg.circle().radius(6),this.startCircleSvg.addClass("point-marker"),this.endCircleSvg=this.gSvg.circle().radius(6),this.endCircleSvg.addClass("point-marker"),this.selectSvg=this.gSvg.rect().radius(10,10).fill("none").stroke({width:2,dasharray:"4"}),this.selectSvg.addClass("select-marker")}update(){this.editing?this.gSvg.addClass("hide"):(this.gSvg.removeClass("hide"),this.lineSvg.plot(this.from.lifeLine.centerX(),this.y,this.to.lifeLine.centerX(),this.y),this.textSvg.ay(this.y-7).font({size:this.text.size}).plain(this.text.value),this.reversed?this.textSvg.ax(this.to.lifeLine.centerX()+this.style.messageMargin).font({anchor:"start"}):this.textSvg.ax(this.to.lifeLine.centerX()-this.style.messageMargin).font({anchor:"end"}),this.startCircleSvg.cx(this.from.center().x).cy(this.from.center().y),this.endCircleSvg.cx(this.to.center().x).cy(this.to.center().y),this.selectSvg.x(this.markerBounds.x).y(this.markerBounds.y).width(this.markerBounds.width).height(this.markerBounds.height),this.updateHover())}updateHover(){Rt(this.startCircleSvg,this.from.hover,"hover"),Rt(this.endCircleSvg,this.to.hover,"hover"),Rt(this.selectSvg,!this.selected&&this.hover,"hover"),Rt(this.selectSvg,this.selected,"selected")}remove(){this.gSvg.remove()}setEditing(t){this.editing=t,this.update()}}class cr{constructor(t,s,i,n){this.size=s,this.align=i,this.measurer=n,this.update(t)}value;width;height;ascent;update(t){this.value=t;const s=this.measurer.measure(this.value,this.size);this.width=s.width,this.ascent=s.actualBoundingBoxAscent,this.height=s.actualBoundingBoxAscent+s.actualBoundingBoxDescent}boundsAt(t){return this.align==2?t.move(-this.width,-this.ascent).rect(this.width,this.height):this.align==1?t.move(-this.width/2,-this.ascent).rect(this.width,this.height):t.move(0,-this.ascent).rect(this.width,this.height)}}class Wi{constructor(t,s){this.lifeLine=t,this.message=s}hover=!1;center(){return new W(this.lifeLine.centerX(),this.message.y)}bounds(){return this.center().centeredRect(20,20)}setHover(t){return this.hover!=t?(this.hover=t,!0):!1}}class $l{constructor(t){this.view=t}}class _t{constructor(t){this.context=t}mouseDown(t){const s=this.context.view.findTool(t);if(s)return new Gl(this.context,s);const i=this.context.view.findMessageHandle(t);if(i)return new Wl(this.context,t,i);const n=this.context.view.findMessage(t);if(n)return new Ql(this.context,t,n);const r=this.context.view.findLifeLine(t);return r?new Kl(this.context,t,r):this.context.view.startMessageHandle?(this.context.view.startDragNewMessageHandle(t.x),new fr(this.context)):this}mouseUp(t){return this.context.view.unselectAll(),this.context.view.update(),this}mouseMove(t){return this.context.view.testHover(t),this}}class Gl{constructor(t,s){this.context=t,this.tool=s}mouseDown(t){return this}mouseUp(t){return this.tool.action(),new _t(this.context)}mouseMove(t){return this.tool.bounds.contains(t)?this:new _t(this.context)}}class Wl{constructor(t,s,i){this.context=t,this.startDrag=s,this.handle=i}mouseDown(t){return this}mouseUp(t){return new _t(this.context)}mouseMove(t){return t.distance(this.startDrag)>10?(this.context.view.startDragMessageHandle(this.handle,t.x),new fr(this.context)):this}}class fr{constructor(t){this.context=t}mouseDown(t){return this}mouseUp(t){return this.context.view.finishDragMessageHandle(),new _t(this.context)}mouseMove(t){return this.context.view.updateDragMessageHandle(t.x),this}}class Ql{constructor(t,s,i){this.context=t,this.startDrag=s,this.message=i}mouseDown(t){return this}mouseUp(t){return this.context.view.selectMessage(this.message),new _t(this.context)}mouseMove(t){return t.distance(this.startDrag)>10?new Jl(this.context,t,this.message):this}}class Jl{constructor(t,s,i){this.context=t,this.dragPoint=s,this.message=i,this.context.view.startDragMessage(i,s.y)}mouseDown(t){return this}mouseUp(t){return this.context.view.finishDragMessage(),this.context.view.selectMessage(this.message),new _t(this.context)}mouseMove(t){return this.context.view.updateDragMessage(t.y),dr(),this}}class Kl{constructor(t,s,i){this.context=t,this.startDrag=s,this.lifeLine=i}mouseDown(t){return this}mouseUp(t){return this.context.view.selectLifeLine(this.lifeLine),new _t(this.context)}mouseMove(t){return t.distance(this.startDrag)>10?new Zl(this.context,t,this.lifeLine):this}}class Zl{constructor(t,s,i){this.context=t,this.dragPoint=s,this.lifeLine=i,this.context.view.startDragLifeLine(this.lifeLine,s.x)}mouseDown(t){return this}mouseUp(t){return this.context.view.finishDragLifeLine(),this.context.view.selectLifeLine(this.lifeLine),new _t(this.context)}mouseMove(t){return this.context.view.updateDragLifeLine(t.x),dr(),this}}function dr(){document.selection?document.selection.empty():window.getSelection().removeAllRanges()}const tu={lifeLineHeadTextSize:"24px",lifeLineHeadMargin:10,minHeadHeight:60,topMargin:20,leftMargin:20,minHeadGap:20,messageTextSize:"18px",messageStartGap:80,messageGap:60,messageMargin:15},eu={initialize:e=>{const t=Nl(),s=new jl(t,tu,e.measurer,e.svg,n=>e.directEdit.start(n),e.commandStack),i=new $l(s);return{model:t,view:s,state:new _t(i)}},initializeSvg:e=>{e.defs().marker(10,10).id("triangle").viewbox("0 0 10 10").ref(10,5).attr("markerUnits","strokeWidth").orient("auto-start-reverse").path("M 0 0 L 10 5 L 0 10 z").fill("black"),e.style().addText(`
        g.hide {
            visibility: hidden;
        }
        .select-marker {
            stroke: none;
        }
        .select-marker.hover {
            stroke: #55CCFF;
        }
        .select-marker.selected {
            stroke: #55CC99;
        }
        .point-marker {
            fill: none;
        }
        .point-marker.hover {
            fill: #55CCFF;
        }
        .tool rect {
            stroke: #CCCCCC;
        }
        .tool.hover rect {
            stroke: #55CCFF;
        }`)},actions:[{label:"Add LifeLine",run:e=>{e.executeCommand(new Ml(e.model,Bs()))}}]};function su(e){bl(e,{get diagramType(){return eu}})}To(su,{target:document.body});
